WEBVTT

1
00:00:00.000 --> 00:00:03.924
[MUSIC]

2
00:00:03.924 --> 00:00:04.638
&gt;&gt; Speaker 1: Couple questions?

3
00:00:04.638 --> 00:00:06.120
&gt;&gt; Jon Kuperman: Yeah?

4
00:00:06.120 --> 00:00:12.300
&gt;&gt; Speaker 1: From Richie,
do our inline styles auto vid?

5
00:00:14.090 --> 00:00:17.020
&gt;&gt; Jon Kuperman: Are they audited for
unused CSS rule or

6
00:00:17.020 --> 00:00:20.820
I guess I don't understand that question,
sorry.

7
00:00:20.820 --> 00:00:26.040
Because if it's an inline style

8
00:00:26.040 --> 00:00:30.260
in style tags, it will be audited for
unused CSS rules.

9
00:00:30.260 --> 00:00:33.718
If it's inline on the actual element,
it's definitely used, so

10
00:00:33.718 --> 00:00:36.015
I don't know if that answers the question.

11
00:00:36.015 --> 00:00:36.964
&gt;&gt; Speaker 1: I'll check on that.

12
00:00:36.964 --> 00:00:37.853
&gt;&gt; Jon Kuperman: Cool.

13
00:00:37.853 --> 00:00:44.638
&gt;&gt; Speaker 1: And then in your opinion, at
what point I'm adding the in your opinion.

14
00:00:44.638 --> 00:00:46.005
&gt;&gt; Jon Kuperman: Okay.
&gt;&gt; Speaker 1: [LAUGH] At what point

15
00:00:46.005 --> 00:00:49.680
in app development should you start
being concerned with page mode time?

16
00:00:49.680 --> 00:00:51.586
It's obviously it's good habits.

17
00:00:51.586 --> 00:00:52.920
&gt;&gt; Jon Kuperman: Sure.

18
00:00:52.920 --> 00:00:56.002
&gt;&gt; Speaker 1: But
when do you start thinking about that?

19
00:00:56.002 --> 00:01:00.494
&gt;&gt; Jon Kuperman: I mean personally I think
about it kind of the whole time that I'm

20
00:01:00.494 --> 00:01:02.880
building something.

21
00:01:02.880 --> 00:01:04.970
It would depend so
much on a lot of different things,

22
00:01:04.970 --> 00:01:08.070
one of the big things is
what is your convert.

23
00:01:10.210 --> 00:01:12.790
Are you selling something?

24
00:01:12.790 --> 00:01:17.740
Are you making money off this web app or
website or whatever?

25
00:01:17.740 --> 00:01:19.850
And there's like there's so
much that goes into it, right?

26
00:01:19.850 --> 00:01:24.100
Because it's a really
a people thing if your

27
00:01:24.100 --> 00:01:27.000
already logged into your bank and
it's your bank.

28
00:01:27.000 --> 00:01:28.810
It's super annoying to switch banks.

29
00:01:28.810 --> 00:01:33.165
So if I make a transfer pages slow,
no one is gonna deal with that, right,

30
00:01:33.165 --> 00:01:35.432
because you don't have any choices.

31
00:01:35.432 --> 00:01:40.126
If your selling shoes and
there's like 30 other shoe

32
00:01:40.126 --> 00:01:44.480
vendors right there competing with you.

33
00:01:44.480 --> 00:01:47.119
Time to page load and things like
that can really, really matter.

34
00:01:48.170 --> 00:01:50.460
So I think you really have to like, for

35
00:01:50.460 --> 00:01:53.630
me it would just be something that you
would talk about from the beginning.

36
00:01:53.630 --> 00:01:55.587
But it really matters on your market,

37
00:01:55.587 --> 00:01:58.290
how competitive it is our
people already logged in.

38
00:01:59.500 --> 00:02:02.963
How easy is to switch,
a bunch of different stuff like that.

39
00:02:02.963 --> 00:02:06.520
Yeah.

40
00:02:06.520 --> 00:02:09.200
&gt;&gt; Speaker 3: Just to clarify,
we try to do

41
00:02:09.200 --> 00:02:12.530
just performance budgets upfront
just to help establish some of that.

42
00:02:12.530 --> 00:02:18.086
That way we know if something is slow, why
it's slow and how we can maybe offset in

43
00:02:18.086 --> 00:02:21.987
different areas and so it just helps to-
&gt;&gt; Jon Kuperman: Yeah, I mean,

44
00:02:21.987 --> 00:02:26.675
it is what it is if you're just
trying MVP something that really,

45
00:02:26.675 --> 00:02:29.080
really fast and I do understand.

46
00:02:29.080 --> 00:02:32.930
It's also a nice place if you're building,
if you're bootstrapping some new project.

47
00:02:32.930 --> 00:02:36.834
It's nice to use open source libraries
cuz they worry about performance a lot,

48
00:02:36.834 --> 00:02:39.587
right, there's a team at
Facebook making react fast.

49
00:02:39.587 --> 00:02:42.512
So if you're just trying to put something
up, use some cool open source tools

50
00:02:42.512 --> 00:02:44.630
because they'll help you a lot
with that kind of stuff.

51
00:02:45.700 --> 00:02:48.050
&gt;&gt; Speaker 1: So
basically the answer is it depends.

52
00:02:48.050 --> 00:02:50.154
&gt;&gt; Jon Kuperman: It depends.
Yeah, yeah, you can quote me on that.

53
00:02:50.154 --> 00:02:50.952
&gt;&gt; Speaker 1: Okay.

54
00:02:50.952 --> 00:02:55.280
&gt;&gt; Speaker 4: I can tell our story with
front end masters.com was really totally

55
00:02:55.280 --> 00:02:56.890
the MVP approach.

56
00:02:56.890 --> 00:02:58.422
We didn't really know exactly,

57
00:02:58.422 --> 00:03:02.510
if our money was gonna come from
ticket sales and then we did the video

58
00:03:02.510 --> 00:03:04.280
subscription site and-
&gt;&gt; Jon Kuperman: Yeah.

59
00:03:04.280 --> 00:03:08.150
&gt;&gt; Speaker 4: Before it was pay for
download and now it's subscription in and

60
00:03:08.150 --> 00:03:12.320
then, it's always like we just hack
together a bunch of WordPress plugins.

61
00:03:12.320 --> 00:03:13.662
&gt;&gt; Jon Kuperman: Yeah.
&gt;&gt; Speaker 4: To get the MVPO.

62
00:03:13.662 --> 00:03:15.962
&gt;&gt; Jon Kuperman: Yeah.
&gt;&gt; Speaker 4: And so even our current say,

63
00:03:15.962 --> 00:03:20.230
suffers today because of bad
sort of past baggage, right.

64
00:03:20.230 --> 00:03:23.686
And we did optimize a bunch of
stuff like compress images,

65
00:03:23.686 --> 00:03:26.023
is like the biggest thing, all right.

66
00:03:26.023 --> 00:03:26.989
&gt;&gt; Jon Kuperman: Absolutely.
&gt;&gt; Speaker 4: That's like one of

67
00:03:26.989 --> 00:03:28.930
the biggest thing, it was just compress.

68
00:03:28.930 --> 00:03:32.250
You take your P and Gs,
run it through P and G mini or whatever.

69
00:03:32.250 --> 00:03:32.880
&gt;&gt; Jon Kuperman: Yeah.

70
00:03:32.880 --> 00:03:34.794
&gt;&gt; Speaker 4: That really
shrinks the page size down.

71
00:03:34.794 --> 00:03:36.940
&gt;&gt; Jon Kuperman: Actually,
I think it's my next slide.

72
00:03:36.940 --> 00:03:38.630
Common Audit Problems.

73
00:03:38.630 --> 00:03:41.463
&gt;&gt; Speaker 4: Load things asynchronously,
but

74
00:03:41.463 --> 00:03:45.181
our new site will be all
in the new Google AMP.

75
00:03:45.181 --> 00:03:46.240
&gt;&gt; Jon Kuperman: Heck, yeah.

76
00:03:46.240 --> 00:03:46.800
AMP is great.

77
00:03:46.800 --> 00:03:50.800
I kind of wanted to talk about it but it's
not really relevant, but it kind of is.

78
00:03:50.800 --> 00:03:53.182
&gt;&gt; Speaker 4: Its relevant,
we should at least throw [INAUDIBLE].

79
00:03:53.182 --> 00:03:54.790
&gt;&gt; Jon Kuperman: Yeah,
it's relevant to performance.

80
00:03:54.790 --> 00:03:58.760
So it's the accelerated mobile pages and
open source project from Google.

81
00:03:58.760 --> 00:03:59.724
It's on GitHub.

82
00:03:59.724 --> 00:04:03.020
Basically it's for
mobile content producers,

83
00:04:03.020 --> 00:04:05.610
if you're in New York Times,
Huffington Post.

84
00:04:05.610 --> 00:04:09.910
I mean even famous blogs and things
like that and it's just basically like,

85
00:04:09.910 --> 00:04:13.000
it's not a framework so
much as it's a set of enforced guidelines.

86
00:04:14.050 --> 00:04:18.140
So it's like you can't have an external
stylesheet, you have to have it in style

87
00:04:18.140 --> 00:04:22.560
types and you don't get an extra HTTP
request in the head is one of the rules.

88
00:04:22.560 --> 00:04:24.254
And then you can have JavaScript but

89
00:04:24.254 --> 00:04:27.089
they all have to be all your
script sources have to be async.

90
00:04:27.089 --> 00:04:31.310
So you can't have any JavaScript that's
required for the initial rendering path.

91
00:04:31.310 --> 00:04:32.660
And some some rules like that.

92
00:04:32.660 --> 00:04:36.630
But what they allow you to do is if you do
a Google search on your phone right now,

93
00:04:36.630 --> 00:04:39.866
you'll see some of the items at the top
have this a lightning bolt on them.

94
00:04:39.866 --> 00:04:44.300
Those are AMP passing pages and
if you click one of those, they load so

95
00:04:44.300 --> 00:04:46.240
fast, I mean they really
do lightning fast.

96
00:04:47.320 --> 00:04:48.950
It's definitely worth checking out.

97
00:04:48.950 --> 00:04:52.500
Even if you don't use AMP, you should
read what their criteria are and

98
00:04:52.500 --> 00:04:54.780
see how many of those things
you can apply to your site.

99
00:04:54.780 --> 00:04:58.486
They're just interesting-
&gt;&gt; Speaker 4: Its a collection of best

100
00:04:58.486 --> 00:04:59.670
practices all kind of bundled up.

101
00:04:59.670 --> 00:05:02.797
&gt;&gt; Jon Kuperman: Right, absolutely,
and some of them you can do and

102
00:05:02.797 --> 00:05:04.850
some of them you can't with AMP.

103
00:05:04.850 --> 00:05:08.698
You have to specify all your
images height and width,

104
00:05:08.698 --> 00:05:11.880
which is tough for depending on
your design and stuff like that.

105
00:05:11.880 --> 00:05:15.170
But it's worth reading and
seeing could I do some of these?

106
00:05:15.170 --> 00:05:18.900
Because they have some really,
really genius performance solutions.

107
00:05:18.900 --> 00:05:19.780
And then yeah,

108
00:05:19.780 --> 00:05:23.990
I wanted to talk about some really common
things that just, I guess this list here.

109
00:05:25.180 --> 00:05:27.800
To answer that question from a while ago,
I think this list here,

110
00:05:27.800 --> 00:05:29.570
you should do from the very beginning.

111
00:05:29.570 --> 00:05:34.630
Any other performance audits,
do whenever you can.

112
00:05:34.630 --> 00:05:36.994
Your production build for

113
00:05:36.994 --> 00:05:42.585
now should serve most likely one CSS and
one JavaScript file.

114
00:05:42.585 --> 00:05:47.290
Let me take a small deviation because
this is how complex performances, right?

115
00:05:47.290 --> 00:05:52.100
So on one hand you have this knowledge
that multiple HTTP request is a bad thing

116
00:05:52.100 --> 00:05:54.780
and because if there's more than five.

117
00:05:54.780 --> 00:05:57.120
Some have to wait on other ones to finish,
right?

118
00:05:57.120 --> 00:06:02.370
On the other hand, let's say you
have a single page application where

119
00:06:02.370 --> 00:06:05.900
your landing screen is just
like some texts says hello.

120
00:06:05.900 --> 00:06:10.000
But later it's loading in tons
of complex functionality,

121
00:06:10.000 --> 00:06:11.770
like mint.com or something like that.

122
00:06:11.770 --> 00:06:16.250
Does all this stuff, do you really need
to send all that cool functionality

123
00:06:16.250 --> 00:06:19.610
JavaScript down just to display hello
on the critical, on the first render?

124
00:06:20.830 --> 00:06:24.100
So maybe you want to experiment
with having two JavaScript files.

125
00:06:24.100 --> 00:06:27.440
One that's like the stuff
that's absolutely necessary for

126
00:06:27.440 --> 00:06:28.900
the original page load.

127
00:06:28.900 --> 00:06:33.900
And one that has all your big app
stuff that can come afterward,

128
00:06:33.900 --> 00:06:35.120
it gets really tricky.

129
00:06:35.120 --> 00:06:37.655
And there's no one right approach for
any of this stuff.

130
00:06:37.655 --> 00:06:43.280
Aother thing is sometimes images
take a long time to load and

131
00:06:43.280 --> 00:06:47.415
image request is sent as soon as the HTML
is parsed with an image tag, all right?

132
00:06:47.415 --> 00:06:52.730
So one thing that you could do,
just like whatever spit balling here.

133
00:06:52.730 --> 00:06:56.290
Is if you have a site with a bunch
of face avatars like Facebook or

134
00:06:56.290 --> 00:06:57.350
something like that.

135
00:06:57.350 --> 00:07:01.170
Maybe you could experiment with passing
the image down as a data attribute, so

136
00:07:01.170 --> 00:07:04.980
it doesn't load, your avatars
don't load in the initial render.

137
00:07:04.980 --> 00:07:08.460
And then using JavaScript to
make image attributes, so

138
00:07:08.460 --> 00:07:09.720
they load asynchronously or so.

139
00:07:09.720 --> 00:07:12.730
I mean there's so
many things you can start playing with,

140
00:07:12.730 --> 00:07:14.202
once you start figuring
out performance stuff.

141
00:07:14.202 --> 00:07:18.580
And there really isn't a right approach or
say you have a video blog, YouTube or

142
00:07:18.580 --> 00:07:21.130
something like that and
you know the view port size.

143
00:07:21.130 --> 00:07:24.576
Do you really need to pre-render
the videos that are scroll down there?

144
00:07:24.576 --> 00:07:28.130
Cuz you can get a really fast load if you
only render the first two videos, right?

145
00:07:28.130 --> 00:07:29.860
As opposed to 30 in your, you know?

146
00:07:29.860 --> 00:07:32.636
So you can start thinking about
all this different stuff and

147
00:07:32.636 --> 00:07:34.510
these ones up here are really easy.

148
00:07:34.510 --> 00:07:38.810
There's a one size fits all solution,
rest of the stuff it gets like yeah.

149
00:07:38.810 --> 00:07:41.474
&gt;&gt; Speaker 4: And some of this is gonna
change as best practices at [INAUDIBLE].

150
00:07:41.474 --> 00:07:44.443
&gt;&gt; Jon Kuperman: Yeah, so for
now that I keep saying yeah, and

151
00:07:44.443 --> 00:07:48.210
this is such a boogeyman
hard to talk about thing.

152
00:07:48.210 --> 00:07:50.510
There are some services on a cheapy too.

153
00:07:50.510 --> 00:07:52.503
For those that aren't familiar,

154
00:07:52.503 --> 00:07:56.154
it's Google came out with this
new HTTP server called Speedy.

155
00:07:56.154 --> 00:07:59.930
And it's kind of evolved
into the next level of HTTP.

156
00:07:59.930 --> 00:08:02.940
And what's gonna flip on
that is it's gonna be

157
00:08:02.940 --> 00:08:04.920
able to handle a ton of small requests.

158
00:08:04.920 --> 00:08:07.040
It's gonna be kind of
the opposite of what we have now.

159
00:08:07.040 --> 00:08:11.914
So right now it's all about bundling one
JavaScript, one CSS, one image Sprite,

160
00:08:11.914 --> 00:08:13.733
right, that's the profile.

161
00:08:13.733 --> 00:08:16.889
But with HTTP2,
I think it's really the exact opposite or

162
00:08:16.889 --> 00:08:20.940
it's your little components that
are gonna send down the wire really fast.

163
00:08:22.540 --> 00:08:23.820
So it's all gonna change.

164
00:08:23.820 --> 00:08:29.040
But for now, unless you specifically
set up otherwise, do you have an HTTP1

165
00:08:29.040 --> 00:08:32.770
server for all your stuff, all your hosts,
everything like that, in one bundles.

166
00:08:32.770 --> 00:08:35.890
That's what you want, but
yes, it is all gonna change.

167
00:08:35.890 --> 00:08:39.030
Gzip compression, talked about,
there's a plugin for it or

168
00:08:39.030 --> 00:08:43.250
you can just, actually I think
I have in just a hop over.

169
00:08:43.250 --> 00:08:45.464
I think I actually have commented out.

170
00:08:45.464 --> 00:08:48.700
Yeah, so this is the node
compression library for Express.

171
00:08:48.700 --> 00:08:50.380
And so if you uncomment these two lines,

172
00:08:50.380 --> 00:08:53.260
that compression warning goes
away just to kind of show.

173
00:08:53.260 --> 00:08:54.910
It's pretty easy to set
this kind of stuff up.

174
00:08:56.480 --> 00:08:57.600
Compressor images.

175
00:08:57.600 --> 00:09:02.100
I use this tool image often and for those
I know you're mentioning gulp task or

176
00:09:02.100 --> 00:09:04.620
whatever you're using,
there's probably an image optimum plug in.

177
00:09:05.740 --> 00:09:09.450
There is what's called lossless image
compression and the idea is you're

178
00:09:09.450 --> 00:09:12.730
making the image smaller without actually
reducing the quality of the image.

179
00:09:12.730 --> 00:09:15.560
And that's done because I'm
not even sure why this is,

180
00:09:15.560 --> 00:09:18.800
but images have all this meta information
that they carry around with them.

181
00:09:18.800 --> 00:09:22.370
What program was used to edit them and
sizing information a title,

182
00:09:22.370 --> 00:09:23.225
all this stuff.

183
00:09:23.225 --> 00:09:27.250
And so imageoptim can squeeze
out all of that stuff.

184
00:09:27.250 --> 00:09:31.530
And then there's more advanced ones
that are loss full compression,

185
00:09:31.530 --> 00:09:33.926
don't call me on that, I don't know
what the opposite of lossless is.

186
00:09:33.926 --> 00:09:36.690
But I know those ones can
actually reduce quality, so

187
00:09:36.690 --> 00:09:37.900
you can kind of make these trades.

188
00:09:37.900 --> 00:09:40.350
Again, there's no one
size fits all solution,

189
00:09:40.350 --> 00:09:44.870
just maybe checking out how big your stuff
is and if there's any gains you can make.

190
00:09:46.450 --> 00:09:51.070
Browser caching, again just specify how
long a browser can cache items for.

191
00:09:51.070 --> 00:09:54.040
Your CSS should go in the document head

192
00:09:54.040 --> 00:09:57.720
because I don't know if you've ever seen
the flash of unstyled content before.

193
00:09:57.720 --> 00:10:01.540
Where you hit a page and it's all black
text on white and then it flashes and

194
00:10:01.540 --> 00:10:02.950
then it colors in.

195
00:10:02.950 --> 00:10:06.569
So that everything in
the head blocks render.

196
00:10:06.569 --> 00:10:08.813
So if you have a CSS
file in your head tag,

197
00:10:08.813 --> 00:10:13.367
your content will not render until that
file is downloaded and parsed basically,

198
00:10:13.367 --> 00:10:15.660
which is slow but it's what you want.

199
00:10:15.660 --> 00:10:17.020
You want your style to just look,

200
00:10:17.020 --> 00:10:19.860
your site needs to look like your
site the moment it's able to be seen.

201
00:10:21.060 --> 00:10:23.303
With other stuff like some jQuery or
something like that,

202
00:10:23.303 --> 00:10:24.784
you wanna put it at the end of the body.

203
00:10:24.784 --> 00:10:27.480
Cuz if you don't want to block the render
but you do want to load immediately.

204
00:10:28.960 --> 00:10:31.690
And then the unused CSS rules.

205
00:10:31.690 --> 00:10:36.226
Sorry, I can't have more check out this
one easy fix to make your site way faster.

206
00:10:36.226 --> 00:10:39.030
Again, you wanna be careful with this
because you wanna make sure that

207
00:10:39.030 --> 00:10:43.350
you're not actually using those in some
asynchronously loaded portion of your app.

208
00:10:43.350 --> 00:10:46.840
But these are big, they're pretty
easy to add to your site and

209
00:10:46.840 --> 00:10:47.990
they make a huge difference.

