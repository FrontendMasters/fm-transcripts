WEBVTT

1
00:00:00.200 --> 00:00:03.560
Now we're gonna continue
working on the auth form.

2
00:00:03.560 --> 00:00:06.229
So people can sign in and sign up, and

3
00:00:06.229 --> 00:00:10.010
then we can move on to
the actual music player.

4
00:00:10.010 --> 00:00:15.340
So to do that, we're gonna head back into
the auth form component that we created.

5
00:00:16.470 --> 00:00:18.892
And we'll just start working
on the form that I have here.

6
00:00:18.892 --> 00:00:22.108
So we'll get rid of this default text for
form and

7
00:00:22.108 --> 00:00:24.387
we will actually build out a form.

8
00:00:24.387 --> 00:00:29.062
So it's gonna make a box here and
this box is just gonna be centered in

9
00:00:29.062 --> 00:00:32.355
a page where our inputs
in the button are gonna.

10
00:00:32.355 --> 00:00:37.276
So I'm just gonna add some padding all
around it something like 50 pixels.

11
00:00:37.276 --> 00:00:42.297
And then I'm gonna make the background
just slightly lighter than black,

12
00:00:42.297 --> 00:00:44.135
so we can do gray.900.

13
00:00:44.135 --> 00:00:48.435
And it's gonna give it a border radius so
it's not square,

14
00:00:48.435 --> 00:00:53.800
so like 3 px or 4 pixels,
get crazy, let's say 6 pixels.

15
00:00:53.800 --> 00:00:57.744
And then from there,
we're gonna actually use a form, so

16
00:00:57.744 --> 00:01:01.055
we can be semantic and
we can actually hit Enter.

17
00:01:01.055 --> 00:01:05.235
And then inside that form it's
just gonna be two inputs and

18
00:01:05.235 --> 00:01:07.802
a button and that's basically it.

19
00:01:07.802 --> 00:01:10.267
So we're gonna have one input and

20
00:01:10.267 --> 00:01:16.178
we're gonna use the input component From
chakra and not the native input form.

21
00:01:16.178 --> 00:01:18.511
So another input here, and

22
00:01:18.511 --> 00:01:23.694
then we'll just have a button
like that from chakra as well.

23
00:01:23.694 --> 00:01:27.212
And in for this first input,

24
00:01:27.212 --> 00:01:32.935
we'll put a placeholder of Email,
type email

25
00:01:37.221 --> 00:01:40.050
And then we will do an on change.

26
00:01:40.050 --> 00:01:43.365
So on change is going
to take the events and

27
00:01:43.365 --> 00:01:48.660
it's just gonna set email to
whatever e.target.value is.

28
00:01:48.660 --> 00:01:56.766
So we got our email there, The second
ones also have a placeholder for password

29
00:01:58.947 --> 00:02:03.530
And a type of password so
it won't actually be visible, and

30
00:02:03.530 --> 00:02:08.403
then on change very similar,
we're just gonna set password.

31
00:02:10.111 --> 00:02:11.528
So e.target.value.

32
00:02:16.758 --> 00:02:22.547
And then for the button,
Place simple button here but

33
00:02:22.547 --> 00:02:25.447
it's got some really nice
things attached to it.

34
00:02:25.447 --> 00:02:28.524
So for the button, first thing to
do make sure it says type Submit.

35
00:02:28.524 --> 00:02:32.859
If we don't do this, we won't be able to
hit Enter when we do our own submit, so

36
00:02:32.859 --> 00:02:34.740
make sure you have that.

37
00:02:34.740 --> 00:02:37.390
Something here has to be type
submit by this input or button.

38
00:02:38.460 --> 00:02:42.560
And then what we'll do is I
just wanna change it green.

39
00:02:42.560 --> 00:02:46.566
So what I'll do is I'll say
bg which is background and

40
00:02:46.566 --> 00:02:52.366
I'll do like green dots 500,
that's kind of bright, so we'll do that.

41
00:02:52.366 --> 00:02:57.133
And then there's a loading prop that
we can pass, so I'll say is loading and

42
00:02:57.133 --> 00:02:59.826
I want that to be true
if is loading is true.

43
00:02:59.826 --> 00:03:07.650
So they'll show like a little spinner,
and then we want to do it on click here.

44
00:03:07.650 --> 00:03:10.530
Well, I guess we don't need to do on
click, we could just do the on Submit and

45
00:03:10.530 --> 00:03:11.660
the form so we won't do that.

46
00:03:12.750 --> 00:03:16.300
And then as far as the text that's
on the button, it'll just be mode.

47
00:03:16.300 --> 00:03:19.602
So either sign in or sign up.

48
00:03:25.723 --> 00:03:29.720
So yeah, we just basically added a box
that'll be the center of the page.

49
00:03:29.720 --> 00:03:35.306
That box is going to be a container for
form and that form has an input that has

50
00:03:35.306 --> 00:03:41.290
a type of email that on change will
set the email state and another input.

51
00:03:41.290 --> 00:03:45.249
That's type password that will
set the password state and

52
00:03:45.249 --> 00:03:50.927
then a button that's green that will load
or not load depending on loading is true.

53
00:03:55.018 --> 00:03:59.635
So I'll come back to this just want to
verify that it looks the way it should

54
00:03:59.635 --> 00:04:04.188
look and there we go we have box in
the middle the page two inputs a button.

55
00:04:04.188 --> 00:04:07.030
And yeah, the button screen so
we're getting there.

56
00:04:07.030 --> 00:04:11.899
The hover colors, pretty gross and
we can change that but

57
00:04:11.899 --> 00:04:15.360
yeah, it's pretty gross hover color.

58
00:04:18.370 --> 00:04:22.670
That's cuz I think they want you to do so
just changing the background directly.

59
00:04:22.670 --> 00:04:25.345
They want you to make a different
variant that handles like all

60
00:04:25.345 --> 00:04:27.230
the different things.

61
00:04:27.230 --> 00:04:33.961
But pretty sure we could come in here and
do something like sx and

62
00:04:33.961 --> 00:04:38.280
then we can do something like and hover.

63
00:04:39.520 --> 00:04:43.832
We can do say hover background,

64
00:04:43.832 --> 00:04:52.316
green dot something slightly
lighter 400 that might do it.

65
00:04:52.316 --> 00:04:55.240
Yeah, it's pretty cool.

66
00:04:55.240 --> 00:04:59.437
That's why I like this component
loop because you can just literally

67
00:04:59.437 --> 00:05:03.286
do Sudo states in CSS right on the prop,
it's pretty awesome.

68
00:05:07.491 --> 00:05:11.342
Probably make that a little
lighter 300 maybe.

69
00:05:11.342 --> 00:05:14.229
Yeah, there we go okay, so

70
00:05:14.229 --> 00:05:19.658
now we need to actually make
this work need to hook it up.

71
00:05:19.658 --> 00:05:22.831
I mean there's still some styling we can
do to we should probably add a link down

72
00:05:22.831 --> 00:05:26.217
here that says already have an account or
don't have an account click or to sign up.

73
00:05:26.217 --> 00:05:28.570
Don't you know like we could do that.

74
00:05:28.570 --> 00:05:31.770
Maybe we'll get we'll add that but
it's pretty simple stuff.

75
00:05:32.880 --> 00:05:36.271
And then we should add a logo up top
it says hello, which I like a logo or

76
00:05:36.271 --> 00:05:37.470
at least a border.

77
00:05:37.470 --> 00:05:38.520
So a border bottom up here.

78
00:05:40.020 --> 00:05:47.010
So say border bottom, white,
1 px solid, there we go.

79
00:05:47.010 --> 00:05:50.478
And then we could probably add
the logo up here, the tracks logo so

80
00:05:50.478 --> 00:05:52.702
people know what they're signing into.

81
00:05:52.702 --> 00:05:56.844
So let's do that, I'm gonna

82
00:05:56.844 --> 00:06:01.491
import next image from next image

83
00:06:04.449 --> 00:06:07.691
And then here I'll just say Next image.

84
00:06:10.857 --> 00:06:14.992
Source will be I forgot what I called it,

85
00:06:14.992 --> 00:06:19.730
I think it's this logo, SVG and height.

86
00:06:19.730 --> 00:06:27.116
How tall this thing is things 100 px,
so let's say 60 px Ops.

87
00:06:27.116 --> 00:06:31.578
Height will be 60 and width will be,

88
00:06:34.149 --> 00:06:38.885
Once we double that there,
so now we got a logo there,

89
00:06:38.885 --> 00:06:42.160
email, password, sign in button.

90
00:06:44.050 --> 00:06:45.620
Okay, let's make this thing work.

91
00:06:45.620 --> 00:06:49.058
So in order to make this work,

92
00:06:49.058 --> 00:06:53.471
we need to add an On submit on the form.

93
00:06:53.471 --> 00:06:57.330
So the on submit for
function called handle submit, and

94
00:06:57.330 --> 00:07:00.462
then now we just got to
go make that function.

95
00:07:00.462 --> 00:07:03.607
So what we'll do is we'll come up here,

96
00:07:03.607 --> 00:07:08.870
we'll say const handleSubmit
like this Gonna take an event.

97
00:07:08.870 --> 00:07:12.650
Because it's a form,
we wanna prevent the default.

98
00:07:12.650 --> 00:07:16.230
Otherwise, it'll reload the page and
try to submit it to the server, and

99
00:07:16.230 --> 00:07:16.940
do whatever.

100
00:07:16.940 --> 00:07:19.210
So we don't want that to happen,
so we'll prevent the defaults.

101
00:07:20.240 --> 00:07:23.370
And then from here,
there's a couple things we wanna do.

102
00:07:23.370 --> 00:07:27.316
First thing we wanna do is because
we're about to make API calls,

103
00:07:27.316 --> 00:07:30.708
we wanna set loading to true,
so set is loading is true.

104
00:07:30.708 --> 00:07:36.363
So we'll do that and, I'm just

105
00:07:36.363 --> 00:07:40.218
gonna test out that our button actually
loads when we try to submit this form.

106
00:07:40.218 --> 00:07:48.472
So if I just come in here,
Got my hack emails,

107
00:07:48.472 --> 00:07:52.302
you can see that it's actually loading and
it's disabled, which is pretty cool.

108
00:07:54.243 --> 00:07:59.410
So that works and then from there,
we wanna go ahead and make the API call.

109
00:07:59.410 --> 00:08:04.484
So I'll say const user = await,
and then I wanna use that

110
00:08:04.484 --> 00:08:09.150
Auth method that we made,
so this needs to be a sync.

111
00:08:11.540 --> 00:08:17.009
So like the auth method that we made which
takes in a mode which we have here and

112
00:08:17.009 --> 00:08:19.843
then you can see it also takes in a body.

113
00:08:19.843 --> 00:08:23.612
So we also have that this email and
password.

114
00:08:26.625 --> 00:08:31.617
And yeah, this thing's
freaking out because it's like

115
00:08:31.617 --> 00:08:37.668
it has to be either they're sign in or
sign up and not just a regular string.

116
00:08:37.668 --> 00:08:39.748
So yeah, that's what you get for

117
00:08:39.748 --> 00:08:44.444
making this super strict but
yeah that's why that thing's freaking out.

118
00:08:44.444 --> 00:08:49.402
The way I'll fix that as
they come up here say,

119
00:08:49.402 --> 00:08:52.974
okay, this is sign in or sign up.

120
00:08:57.055 --> 00:09:00.699
And now, it's fixed or
just don't use the types at all.

121
00:09:00.699 --> 00:09:07.072
[LAUGH] you don't have that problem,
[LAUGH] so, yeah.

122
00:09:07.072 --> 00:09:11.674
Okay, so now we have our user, eventually
we're gonna update the cache, but

123
00:09:11.674 --> 00:09:13.218
we'll get to that later.

124
00:09:13.218 --> 00:09:19.753
For now we'll just say set,
loading to be false so we'll do that and

125
00:09:19.753 --> 00:09:26.530
then we'll say router.push which
will navigate us to the home page.

126
00:09:26.530 --> 00:09:29.995
And for now we don't even really
need the user will just await it,

127
00:09:29.995 --> 00:09:33.461
we'll come back and set the cache
once we talk about that, okay?

128
00:09:33.461 --> 00:09:39.697
So now I'm going to try and test this out
things like stuck in a state there we go,

129
00:09:39.697 --> 00:09:45.395
so I'm actually going to try to sign,
yeah try to stop Sign in actually.

130
00:09:45.395 --> 00:09:49.823
So I'm about to sign in
with the test email, so

131
00:09:49.823 --> 00:09:54.026
that will be user@test.com, password,

132
00:09:54.026 --> 00:09:58.468
then Enter, boom,
signs man brings me here.

133
00:09:58.468 --> 00:10:04.082
If I try to sign up for some accounts And

134
00:10:04.082 --> 00:10:11.070
I say new@new.com and
password is admin, that also works.

135
00:10:12.710 --> 00:10:16.284
And we know that because if we go back and
we look pull up the console,

136
00:10:16.284 --> 00:10:18.982
and click on application and
you go to the cookies,

137
00:10:18.982 --> 00:10:22.967
you can see that the cookies actually
stored there with the JSON web token.

138
00:10:25.893 --> 00:10:30.249
So we are now signed in,
this is proof of us being signed either.

139
00:10:30.249 --> 00:10:36.293
If this wasn't here we would not be signed
in, we'll circle back on the USSWR config.

140
00:10:36.293 --> 00:10:39.203
Later when we get to making
an API call to get the user and

141
00:10:39.203 --> 00:10:43.023
then it'll make more sense when we
come back here and update the cache.

142
00:10:43.023 --> 00:10:45.776
I should feel like traditional
react we didn't I mean,

143
00:10:45.776 --> 00:10:47.603
there was really nothing specific.

144
00:10:47.603 --> 00:10:51.141
I mean, it was all just client side,
making an API call.

145
00:10:51.141 --> 00:10:55.578
But I think the really cool thing is that
like we made a API call to an API function

146
00:10:55.578 --> 00:10:58.030
that we made in the same repo.

147
00:10:58.030 --> 00:11:01.515
We don't have another server running,
it's just here so some file,

148
00:11:01.515 --> 00:11:03.960
which is really interesting.

149
00:11:03.960 --> 00:11:09.359
Whereas traditionally, you would have
another server running like Python,

150
00:11:09.359 --> 00:11:12.120
express rails, whatever.

151
00:11:12.120 --> 00:11:14.358
And then you make a call to that,
whereas we don't.

152
00:11:14.358 --> 00:11:19.823
It's just running in the same process, at
least locally here, so it's pretty cool.

153
00:11:19.823 --> 00:11:24.021
And that's just one way to fetch data.

154
00:11:24.021 --> 00:11:25.890
In next js that's client side.

155
00:11:25.890 --> 00:11:27.506
When we do server side data fetching,

156
00:11:27.506 --> 00:11:29.577
we actually don't even
need to make an API call.

157
00:11:29.577 --> 00:11:31.893
We can just actually talk
directly to the database and

158
00:11:31.893 --> 00:11:33.840
we will be doing that with the playlist.

159
00:11:33.840 --> 00:11:35.948
So we'll check that out.

