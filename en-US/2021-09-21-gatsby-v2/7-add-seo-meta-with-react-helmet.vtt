WEBVTT

1
00:00:00.260 --> 00:00:04.209
Where we left off was we had
just pulled in the site metadata

2
00:00:04.209 --> 00:00:07.039
that we'd created in our Gatsby config.

3
00:00:07.039 --> 00:00:12.232
So, we pulled in this title here,
and we're querying for it using

4
00:00:12.232 --> 00:00:18.096
Gatsby's graphqL layer and displaying
it in a little bit of a header here.

5
00:00:18.096 --> 00:00:23.079
So that is giving us this great
experience where we have our home

6
00:00:23.079 --> 00:00:27.560
link in a header controlled
by this Gatsby config.

7
00:00:27.560 --> 00:00:31.920
So anywhere that we use this, if we
edit the config, it's gonna get updated.

8
00:00:31.920 --> 00:00:34.071
Nice and handy, that's pretty great.

9
00:00:34.071 --> 00:00:38.819
So the next thing that I wanna do is we
still haven't solved this problem where

10
00:00:38.819 --> 00:00:42.010
we're just showing
the URL in the title bar.

11
00:00:42.010 --> 00:00:44.910
I want this to show something
useful on the homepage.

12
00:00:44.910 --> 00:00:48.106
I want it to show this
Frontend Masters Intro to Gatsby,

13
00:00:48.106 --> 00:00:50.220
I wanna include a meta description.

14
00:00:50.220 --> 00:00:54.582
I wanna include that image that we created
so that if you share this on Twitter,

15
00:00:54.582 --> 00:00:57.900
you'll actually be able to
see that image shared, right?

16
00:00:57.900 --> 00:01:01.164
So we wanna make sure that our
sites have all the SEO benefits and

17
00:01:01.164 --> 00:01:05.550
meta tags that they need to be shared on
Facebook, LinkedIn, Twitter, etc, etc.

18
00:01:07.400 --> 00:01:08.362
So let's do that.

19
00:01:08.362 --> 00:01:13.055
What we're gonna do first is we are going
to install a React project called

20
00:01:13.055 --> 00:01:14.570
react-helmet.

21
00:01:14.570 --> 00:01:16.560
This is a package that is designed for

22
00:01:16.560 --> 00:01:19.459
modifying the head of
documents generated by React.

23
00:01:19.459 --> 00:01:23.870
And the head tag is where we're gonna put
title tags, meta tags, so on and so forth.

24
00:01:25.310 --> 00:01:26.440
So, let's do that.

25
00:01:26.440 --> 00:01:31.470
And then we're also going to need
a plugin for Gatsby to use react-helmet.

26
00:01:31.470 --> 00:01:35.130
And that's what allows the Gatsby to
server side render those had tags so

27
00:01:35.130 --> 00:01:38.410
that they're available if
JavaScript is disabled.

28
00:01:38.410 --> 00:01:42.210
So let's start with that,
we're gonna npm install.

29
00:01:42.210 --> 00:01:43.460
Actually, let me do this in the other one.

30
00:01:44.460 --> 00:01:47.185
We're gonna stop our server.

31
00:01:47.185 --> 00:01:53.240
Npm install, react-helmet, and
gatsby-plugin-react-helmet.

32
00:01:55.900 --> 00:01:58.891
And as these install, here they go,

33
00:01:58.891 --> 00:02:03.050
we can head back over here
into our Gatsby config.

34
00:02:03.050 --> 00:02:08.507
And now we're going to use another
field in our config, which is plugins.

35
00:02:08.507 --> 00:02:12.496
And plugins is an array, so
we can put whatever we want in here, and

36
00:02:12.496 --> 00:02:15.434
I'm going to add Gatsby
plugin react-helmet.

37
00:02:15.434 --> 00:02:18.970
Okay, so
here is Gatsby plugin react-helmet,

38
00:02:18.970 --> 00:02:23.830
it's now added to our Gatsby config,
which means we can use it.

39
00:02:23.830 --> 00:02:26.402
So let's restart that dev server.

40
00:02:31.930 --> 00:02:35.105
And as of right now, nothing has happened.

41
00:02:35.105 --> 00:02:40.890
If I wait for this to go, here we go,
refresh the page, no changes.

42
00:02:40.890 --> 00:02:45.020
So we're gonna go into our index file and
we're gonna make this thing work.

43
00:02:45.020 --> 00:02:51.790
So the way that we do that is I'm
gonna add a bunch of Seo tags.

44
00:02:51.790 --> 00:02:55.088
And we're gonna need this for
every page, right?

45
00:02:55.088 --> 00:02:57.261
So let's take advantage of
something that React does and

46
00:02:57.261 --> 00:02:58.740
let's make this into a component.

47
00:02:58.740 --> 00:03:01.580
Let's not hard code this whole thing out.

48
00:03:01.580 --> 00:03:04.502
So I'm going to create
a components folder.

49
00:03:07.250 --> 00:03:11.784
And inside of that,
I'm gonna create a file called seo.js.

50
00:03:11.784 --> 00:03:15.099
And inside of this,
we're going to do the dance with React,

51
00:03:15.099 --> 00:03:17.310
import everything as React from react.

52
00:03:19.390 --> 00:03:26.555
And we're also going to use helmet, so
let's import helmet from react-helmet.

53
00:03:27.636 --> 00:03:32.432
And finally,
we're gonna need that data that we put in

54
00:03:32.432 --> 00:03:35.780
the static config, the site config.

55
00:03:35.780 --> 00:03:40.935
So let's import useStaticQuery and
graphql again from Gatsby, all right?

56
00:03:40.935 --> 00:03:45.356
Now, we can export a function
that we are gonna call Seo, and

57
00:03:45.356 --> 00:03:50.491
I don't want React to yell at me
about not pascal casing my component.

58
00:03:50.491 --> 00:03:53.689
Which is why I'm not
capitalizing the E and O,

59
00:03:53.689 --> 00:03:57.440
even though it deeply pains me to do that.

60
00:03:57.440 --> 00:04:02.726
And inside of this, we're gonna
accept some props, because we wanna

61
00:04:02.726 --> 00:04:09.020
pull in title, description, etc,
as something you can customize in this.

62
00:04:09.020 --> 00:04:12.985
So let's do that, we're gonna have
the ability to pull in, actually,

63
00:04:12.985 --> 00:04:13.837
you know what?

64
00:04:13.837 --> 00:04:16.080
Let's just call these props.

65
00:04:16.080 --> 00:04:18.373
And I'll show you why momentarily.

66
00:04:18.373 --> 00:04:20.690
So first and foremost,
let's get our data again.

67
00:04:20.690 --> 00:04:25.699
So we're gonna get data and that is
gonna be the result of useStaticQuery,

68
00:04:25.699 --> 00:04:27.854
and that's gonna use graphql.

69
00:04:27.854 --> 00:04:31.821
And this time,
I do actually want all of those fields, so

70
00:04:31.821 --> 00:04:37.350
I'm gonna go back out to my graphical,
and we're gonna do site.

71
00:04:37.350 --> 00:04:39.960
And I do want the description image and
site URL.

72
00:04:41.600 --> 00:04:43.038
So let me grab all of that.

73
00:04:46.095 --> 00:04:49.134
And again, we wanna give our queries
a unique name because otherwise,

74
00:04:49.134 --> 00:04:51.780
Gatsby will complain that we've
done something confusing.

75
00:04:51.780 --> 00:04:56.950
So let's call this GetSiteMetadata,
all right?

76
00:04:56.950 --> 00:05:04.799
And then down here, I'm going to,
Call these our defaults.

77
00:05:04.799 --> 00:05:09.195
So by default,
we don't provide any arguments,

78
00:05:09.195 --> 00:05:14.020
we're gonna use the metadata
from Gatsby's config.

79
00:05:15.090 --> 00:05:23.234
So we're gonna get this as
data?.site?.sitemetadata; and

80
00:05:23.234 --> 00:05:27.830
then we're gonna pull out each one.

81
00:05:27.830 --> 00:05:31.475
So for the title,
we wanna check if a title was set.

82
00:05:31.475 --> 00:05:34.210
If the title was set, we're gonna use it.

83
00:05:34.210 --> 00:05:37.950
Otherwise, we'll use
the default start title, right?

84
00:05:37.950 --> 00:05:43.537
And the reason I'm using props here is
because I don't wanna have to have title

85
00:05:43.537 --> 00:05:48.633
equals, and then here would be actual
title, or something like that.

86
00:05:48.633 --> 00:05:50.830
We don't wanna have to double declare.

87
00:05:50.830 --> 00:05:54.252
So by leaving it as a props object,
we don't have to worry about that,

88
00:05:54.252 --> 00:05:56.110
it can just be title, title, title.

89
00:05:56.110 --> 00:06:03.696
Let's do the same thing for
the description, And for the image.

90
00:06:03.696 --> 00:06:04.631
Whoops.

91
00:06:08.377 --> 00:06:11.347
Description and

92
00:06:11.347 --> 00:06:16.050
this one, It's gonna be image.

93
00:06:17.420 --> 00:06:21.004
And then finally down here,
we're gonna do a little bit of magic,

94
00:06:21.004 --> 00:06:23.889
cuz we want the URL,
we're gonna do a canonical URL.

95
00:06:23.889 --> 00:06:28.984
And the way that we're gonna
do canonical URL is we're

96
00:06:28.984 --> 00:06:34.500
gonna use the URL and
we'll get the props.path.

97
00:06:34.500 --> 00:06:40.732
So props.path will be
the full link to our page,

98
00:06:40.732 --> 00:06:46.270
or it'll be just an empty like a slash.

99
00:06:46.270 --> 00:06:49.924
And we're gonna set the base
as the site URL, right?

100
00:06:49.924 --> 00:06:55.144
And so what that'll do is it'll make
the canonical URL a full HTTP URL,

101
00:06:55.144 --> 00:06:57.370
which is what we want.

102
00:06:57.370 --> 00:07:01.190
And now that I think about it,
we wanna do the same thing for the image.

103
00:07:01.190 --> 00:07:05.355
So I'm going to,
let's do the same thing here, new URL,

104
00:07:05.355 --> 00:07:10.552
because the image again, in a social
sharing that needs to be a full URL.

105
00:07:10.552 --> 00:07:16.140
It can't just be like \images\whatever,
it needs to be http and so on.

106
00:07:16.140 --> 00:07:20.257
So we're gonna use the props image or
the default image, and

107
00:07:20.257 --> 00:07:23.820
that will also use as a base
the defaults' site URL.

108
00:07:25.000 --> 00:07:28.870
And that gives us a fully qualified URL.

109
00:07:28.870 --> 00:07:32.933
And the nice thing about this is
if you put in here a full URL,

110
00:07:32.933 --> 00:07:35.360
it'll just override this base.

111
00:07:35.360 --> 00:07:39.042
So the the URL API is smart
enough to handle that.

112
00:07:39.042 --> 00:07:44.340
But if we wanna put in relative path,
this makes sure that it still works.

113
00:07:45.440 --> 00:07:47.960
So now that we've got our title,
description, image, and URL,

114
00:07:47.960 --> 00:07:49.310
we can actually start using these.

115
00:07:49.310 --> 00:07:52.310
So let's return some react.

116
00:07:52.310 --> 00:07:54.390
The first thing we're gonna do
is set up a helmet component.

117
00:07:55.640 --> 00:07:59.392
And helmet is kind of,

118
00:07:59.392 --> 00:08:05.320
it's like a head tag but not quite.

119
00:08:05.320 --> 00:08:07.790
So it's got a little bit of its own API.

120
00:08:07.790 --> 00:08:11.990
But for the most part, we can just
use it like a standard head tag, so

121
00:08:11.990 --> 00:08:13.840
we'll add in a title.

122
00:08:13.840 --> 00:08:17.976
Let's add in a meta name="description',
and

123
00:08:17.976 --> 00:08:22.217
we'll give that one a content
of the description.

124
00:08:25.290 --> 00:08:29.078
And we wanna do a link rel"canonical", and

125
00:08:29.078 --> 00:08:32.968
this will solve that
trailing slash problem,

126
00:08:32.968 --> 00:08:38.371
because this URL will be the same and
we'll get a canonical URL.

127
00:08:38.371 --> 00:08:43.730
So we can set the href to be our URL.

128
00:08:46.010 --> 00:08:51.919
And finally, if there is an image,
because there might not be,

129
00:08:51.919 --> 00:08:55.968
then we're gonna set
a meta name of image and

130
00:08:55.968 --> 00:08:59.599
the content will be the image, right?

131
00:08:59.599 --> 00:09:05.030
Okay, so, and
then we need to make that here.

132
00:09:05.030 --> 00:09:09.419
And the reason that I make this optional
is that it is possible, but maybe you

133
00:09:09.419 --> 00:09:14.300
don't want a default image and so you
leave this empty in your Gatsby config.

134
00:09:14.300 --> 00:09:20.300
And then that way means we don't put
a broken image up as your image.

135
00:09:21.910 --> 00:09:24.240
So next, we wanna set up for Facebook.

136
00:09:24.240 --> 00:09:28.386
So let's do property="og:url", and

137
00:09:28.386 --> 00:09:32.080
that's gonna be content=(url).

138
00:09:33.320 --> 00:09:39.100
We can do this again, let's do a type and
you can do a lot of things with these.

139
00:09:39.100 --> 00:09:45.100
I'm doing a pretty general purpose,
this will be fine.

140
00:09:45.100 --> 00:09:51.811
And you can do a little more research if
you wanna do it exactly the right way for

141
00:09:51.811 --> 00:09:55.744
rendering the title,
og title will be that.

142
00:09:55.744 --> 00:10:03.026
The description, Right, and
then we want, what else?

143
00:10:03.026 --> 00:10:05.120
Yeah, we need one of these image ones.

144
00:10:05.120 --> 00:10:07.720
So let's copy this one actually.

145
00:10:07.720 --> 00:10:12.720
And this one will be an og:image,
and its content will be image.

146
00:10:12.720 --> 00:10:17.463
All right, so that's Facebook and
a lot of other services,

147
00:10:17.463 --> 00:10:22.430
but we also wanna make sure
that we're doing Twitter.

148
00:10:22.430 --> 00:10:23.440
All right, so let's add one more.

149
00:10:23.440 --> 00:10:27.690
We're gonna do a name of twitter:card.

150
00:10:27.690 --> 00:10:31.552
And because we're assuming
we're gonna have an image,

151
00:10:31.552 --> 00:10:35.980
we're gonna make this
a summary_large_image, right?

152
00:10:35.980 --> 00:10:41.890
Then we're gonna set meta:"name",
and that'll be twitter:title.

153
00:10:41.890 --> 00:10:46.313
And all of these could be, you could make
these configurable where you could Set

154
00:10:46.313 --> 00:10:49.910
custom stuff on Twitter and
custom stuff on Facebook.

155
00:10:49.910 --> 00:10:55.987
I don't like doing that mainly because
it makes me lazy and I never do it.

156
00:10:55.987 --> 00:11:00.229
So then I just have all this config that
I don't wanna deal with, and then I get

157
00:11:00.229 --> 00:11:04.564
overwhelmed and either ignore it entirely
or end up letting my site languish.

158
00:11:04.564 --> 00:11:09.410
Because I can't bear the thought of
having to update all this content.

159
00:11:09.410 --> 00:11:11.270
So let's do another one
of those image ones.

160
00:11:11.270 --> 00:11:14.900
This one is gonna be called twitter:image.

161
00:11:14.900 --> 00:11:22.490
Okay, so now what we've created is we
have grabbed out default metadata.

162
00:11:22.490 --> 00:11:27.343
We are exporting a prop called Seo that
accepts props with the title description

163
00:11:27.343 --> 00:11:28.950
image in path.

164
00:11:28.950 --> 00:11:33.857
And we are returning all of the Seo
tags that we might need to manage not

165
00:11:33.857 --> 00:11:38.172
just the browser display, but
also what shows up on Google,

166
00:11:38.172 --> 00:11:42.000
what shows up on Facebook,
what shows up on Twitter.

167
00:11:42.000 --> 00:11:46.622
And a whole lot of other services
will read these open graph, so

168
00:11:46.622 --> 00:11:49.250
like LinkedIn and stuff like that.

169
00:11:49.250 --> 00:11:52.520
So we're customizing the way that our
site is gonna look across social media.

170
00:11:54.100 --> 00:11:58.930
Once we have saved that,
we can head on over to our index page.

171
00:12:00.370 --> 00:12:07.650
And we're gonna import
Seo from /components/seo.

172
00:12:07.650 --> 00:12:12.572
I include the extension because, yes,
modules include the extension and

173
00:12:12.572 --> 00:12:16.180
eventually, we'll get away from Babel and
Webpack.

174
00:12:16.180 --> 00:12:19.000
And that'll mean that we will
need extensions for local files.

175
00:12:19.000 --> 00:12:20.910
It's optional, you don't need to do it.

176
00:12:20.910 --> 00:12:24.049
If you don't agree with me,
that's fine, just leave it out.

177
00:12:24.049 --> 00:12:26.837
Once we have the Seo component,

178
00:12:26.837 --> 00:12:31.804
then we can come down here and
let's just use it, right?

179
00:12:31.804 --> 00:12:34.597
And so, on the home page,
we wanna use this defaults, so

180
00:12:34.597 --> 00:12:36.368
we just drop that thing right in.

181
00:12:36.368 --> 00:12:40.455
Boom, no changes.

182
00:12:40.455 --> 00:12:42.466
Then we can come over here, reload, and

183
00:12:42.466 --> 00:12:45.019
let's take a look at what
showed up under the hood.

184
00:12:45.019 --> 00:12:48.276
Let me move this over to the side again.

185
00:12:48.276 --> 00:12:53.910
And if we look at our elements,
we can see in our head, we've got a title.

186
00:12:53.910 --> 00:12:56.644
We've got a description.

187
00:12:56.644 --> 00:13:00.328
We've got our canonical, which is bad
because we have this placeholder domain.

188
00:13:00.328 --> 00:13:02.670
But that's okay, we can fix that later.

189
00:13:02.670 --> 00:13:05.040
We've got our image which is
actually going to the right place.

190
00:13:05.040 --> 00:13:10.806
We've got the open graph URL, what type
it is, all the things that we need for

191
00:13:10.806 --> 00:13:16.705
these sites to show up properly on
social media are now in place, right?

192
00:13:16.705 --> 00:13:20.305
And that is really, really handy,
and it used all of our defaults.

193
00:13:20.305 --> 00:13:24.731
So we've got the like in the description,
Intro to Gatsby Course Projects,

194
00:13:24.731 --> 00:13:26.170
that's what we wanted.

195
00:13:27.310 --> 00:13:31.430
So now let's go look at the about page,
so we didn't make any changes here.

196
00:13:31.430 --> 00:13:37.821
So you notice that it kept
the one from the homepage.

197
00:13:37.821 --> 00:13:40.704
This is something that
gets a little bit weird,

198
00:13:40.704 --> 00:13:45.259
which is why it's important to make
sure if you add Seo tags, update them.

199
00:13:45.259 --> 00:13:48.940
Because once they're added,
React and react-helmet, and Gatsby,

200
00:13:48.940 --> 00:13:52.930
they're not gonna unset stuff,
they're just gonna look for changes.

201
00:13:52.930 --> 00:13:58.280
So if you set Seo tags,
make sure you add them to all your pages.

202
00:13:58.280 --> 00:14:00.570
You can do this through front-matter or
whatever.

203
00:14:00.570 --> 00:14:03.880
So let's go ahead and
get this added to the about page as well.

204
00:14:03.880 --> 00:14:06.490
And this time,
we're gonna do it with some changes.

205
00:14:06.490 --> 00:14:10.985
So let's go to about, I'm gonna import

206
00:14:10.985 --> 00:14:15.896
this Seo tag from /components/seo.js.

207
00:14:15.896 --> 00:14:22.016
And then down here, I'm going to wrap
this whole thing in a fragment so

208
00:14:22.016 --> 00:14:26.919
that I don't have to put my
Seo tag inside of my main tag.

209
00:14:26.919 --> 00:14:31.449
We'll do Seo, whoa, thank you,
autocomplete, all right?

210
00:14:31.449 --> 00:14:37.438
So we'll do Seo, we'll do the title,
and I want this to be about this site.

211
00:14:37.438 --> 00:14:39.223
And for a description,

212
00:14:39.223 --> 00:14:43.782
we can put something like more
information about this site.

213
00:14:47.613 --> 00:14:52.513
Now we've got, here's our Seo,
here's our actual site content,

214
00:14:52.513 --> 00:14:57.770
if I refresh the page,
we can see that it's showing up properly.

215
00:14:57.770 --> 00:14:59.410
Let's look at these elements again.

216
00:14:59.410 --> 00:15:03.656
Here's the head, and
we'll watch as I navigate,

217
00:15:03.656 --> 00:15:07.530
you'll see these kinda light up and
change.

218
00:15:07.530 --> 00:15:09.300
So there we go.

219
00:15:09.300 --> 00:15:13.250
Let's see the title change we can see
some of these react components changed.

220
00:15:13.250 --> 00:15:16.785
You see him jumping around
at the bottom here, right?

221
00:15:18.965 --> 00:15:22.367
So, we can see that as
we're navigating around,

222
00:15:22.367 --> 00:15:26.744
the social sharing data is updating and
changing around for us.

223
00:15:29.765 --> 00:15:32.815
So, that is an Seo component, right?

