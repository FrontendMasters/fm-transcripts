WEBVTT

1
00:00:00.260 --> 00:00:04.914
Where we left off was we had just
pulled in the site metadata that we'd

2
00:00:04.914 --> 00:00:07.010
created in our Gatsby config.

3
00:00:07.010 --> 00:00:10.700
So we pulled in this title here,
and we're querying for

4
00:00:10.700 --> 00:00:13.065
it using Gatsby's graph qL layer.

5
00:00:13.065 --> 00:00:16.770
And displaying it in a little
bit of a header here.

6
00:00:16.770 --> 00:00:22.050
So that is giving us this great
experience where we have our

7
00:00:22.050 --> 00:00:27.560
home link in a header controlled
by this Gatsby Config.

8
00:00:27.560 --> 00:00:31.920
So anywhere that we use this, if we edit
the config, it's going to get updated.

9
00:00:31.920 --> 00:00:32.780
Nice and handy.

10
00:00:32.780 --> 00:00:34.210
That's pretty great.

11
00:00:34.210 --> 00:00:38.766
So the next thing that I want to do is we
still haven't solved this problem where

12
00:00:38.766 --> 00:00:42.010
we're just showing
the the URL in the title bar.

13
00:00:42.010 --> 00:00:44.910
I want this to show something
useful on the homepage.

14
00:00:44.910 --> 00:00:47.687
I want it to show this front
end masters intro to Gatsby,

15
00:00:47.687 --> 00:00:49.528
I wanna include a meta description.

16
00:00:49.528 --> 00:00:53.672
I want to include that image that we
created so that if you share this on

17
00:00:53.672 --> 00:00:57.900
Twitter, you'll actually be able
to see that image shared, right?

18
00:00:57.900 --> 00:01:01.883
So we wanna make sure that our
sites have all the SEO benefits and

19
00:01:01.883 --> 00:01:06.856
meta tags that they need to be shared
on Facebook, LinkedIn, Twitter, etc.

20
00:01:06.856 --> 00:01:07.810
[COUGH] So let's do that.

21
00:01:07.810 --> 00:01:12.577
What we're gonna do first is we
are going to install a react project

22
00:01:12.577 --> 00:01:14.570
called react helmet.

23
00:01:14.570 --> 00:01:16.528
This is a package that is designed for

24
00:01:16.528 --> 00:01:19.434
modifying the head of documents
generated by react and

25
00:01:19.434 --> 00:01:23.870
the head tag is where we're going to put
title tags, meta tags, so on and so forth.

26
00:01:25.310 --> 00:01:26.440
So let's do that.

27
00:01:26.440 --> 00:01:31.470
And then we're also going need a plugin
for Gatsby to use react helmet.

28
00:01:31.470 --> 00:01:35.070
And that's what allows the Gatsby to
server side render se head tags so

29
00:01:35.070 --> 00:01:38.410
that they're available if
JavaScript is disabled.

30
00:01:38.410 --> 00:01:40.290
So let's start with that.

31
00:01:40.290 --> 00:01:42.210
We're gonna npm install.

32
00:01:42.210 --> 00:01:43.970
Actually, let me do this in the other one.

33
00:01:43.970 --> 00:01:48.625
We're gonna stop our server npm install,

34
00:01:48.625 --> 00:01:51.740
React helmet, and Gatsby.

35
00:01:51.740 --> 00:01:53.483
Plug in react helmet.

36
00:01:55.737 --> 00:01:58.680
And as these install, or they go,

37
00:01:58.680 --> 00:02:03.050
we can head back over here
into our Gatsby config.

38
00:02:03.050 --> 00:02:08.600
And now we're going to use another
field in our config, which is plugins.

39
00:02:08.600 --> 00:02:12.010
And plugins is an array so
we can put whatever we want in here.

40
00:02:12.010 --> 00:02:14.310
And I'm going to add Gatsby.

41
00:02:14.310 --> 00:02:15.840
Plug in react helmet.

42
00:02:17.850 --> 00:02:20.274
Okay, so
here is Gatsby plugin react helmet,

43
00:02:20.274 --> 00:02:23.830
it's now added to our Gatsby config,
which means we can use it.

44
00:02:23.830 --> 00:02:28.254
So let's restart that dev server.

45
00:02:31.639 --> 00:02:35.110
And as of right now, nothing has happened.

46
00:02:35.110 --> 00:02:40.890
If I wait for this to go, here you go,
refresh the page, no changes.

47
00:02:40.890 --> 00:02:45.020
So we're gonna go into our index file and
we're gonna make this thing work.

48
00:02:45.020 --> 00:02:51.790
So the way that we do that is I'm
gonna add a bunch of SEO tags.

49
00:02:51.790 --> 00:02:55.100
And we're gonna need this for
every page, right?

50
00:02:55.100 --> 00:02:57.266
So let's take advantage of
something that react does and

51
00:02:57.266 --> 00:02:58.740
let's make this into a component.

52
00:02:58.740 --> 00:03:01.580
Let's not hard code this whole thing out.

53
00:03:01.580 --> 00:03:05.108
So I'm going to create
a components folder.

54
00:03:06.951 --> 00:03:11.840
And inside of that,
I'm gonna create a file called SEO.js.

55
00:03:11.840 --> 00:03:15.010
And inside of this we're gonna
do the dance with react,

56
00:03:15.010 --> 00:03:17.310
import everything as react from react.

57
00:03:19.390 --> 00:03:26.900
And we're also going to use helmet, so
let's import helmet from react helmet.

58
00:03:30.620 --> 00:03:31.433
And finally,

59
00:03:31.433 --> 00:03:35.780
we're gonna need that data that we put
in the static config the site config.

60
00:03:35.780 --> 00:03:40.388
So let's import use static query and
graph qL again from Gatsby.

61
00:03:40.388 --> 00:03:45.587
All right, now we can export a function
that we're going to call SEO and

62
00:03:45.587 --> 00:03:50.540
I don't want react to yell at me
about not Pascal casing my company.

63
00:03:50.540 --> 00:03:53.863
Opponents, which is why I'm
not capitalizing the E and

64
00:03:53.863 --> 00:03:57.440
O, even though it deeply
pains me to do that.

65
00:03:57.440 --> 00:04:02.588
And inside of this, we're going to
accept some props because we want

66
00:04:02.588 --> 00:04:09.020
to pull in title, description, etc,
as something you can customize in this.

67
00:04:09.020 --> 00:04:14.360
So let's do that we're gonna have
the ability to pull in actually, what?

68
00:04:14.360 --> 00:04:16.080
Let's just call these props.

69
00:04:16.080 --> 00:04:18.300
And I'll show you why momentarily.

70
00:04:18.300 --> 00:04:20.690
So first and foremost,
let's get our data again.

71
00:04:20.690 --> 00:04:25.580
So we're gonna get data and that is going
to be the result of use static query.

72
00:04:25.580 --> 00:04:27.850
And that's gonna use graph QL.

73
00:04:27.850 --> 00:04:31.390
And this time,
I do actually want all of those fields.

74
00:04:31.390 --> 00:04:37.350
So I'm gonna go back out to my
graphical and we're gonna do site.

75
00:04:37.350 --> 00:04:39.960
And I do want the description image and
site URL.

76
00:04:41.600 --> 00:04:43.090
So let me grab all of that.

77
00:04:46.230 --> 00:04:48.405
And again,
we wanna give our queries a unique name,

78
00:04:48.405 --> 00:04:51.780
because otherwise Gatsby will complain
that we've done something confusing.

79
00:04:51.780 --> 00:04:54.990
So let's call this get site Metadata.

80
00:04:54.990 --> 00:04:56.950
All right.

81
00:04:56.950 --> 00:05:04.150
And then down here,
I'm going to call these are defaults.

82
00:05:04.150 --> 00:05:08.715
So by default,
if we don't provide any arguments,

83
00:05:08.715 --> 00:05:14.020
we're going to use the the metadata
from Gatsby's config.

84
00:05:15.090 --> 00:05:21.342
So we're gonna get this as data,
site, site metadata.

85
00:05:21.342 --> 00:05:27.830
And then we're going to,
we're gonna pull out each one.

86
00:05:27.830 --> 00:05:32.140
So for the title,
we want to check if a title was set.

87
00:05:32.140 --> 00:05:33.780
If the title was set.

88
00:05:33.780 --> 00:05:37.950
We're gonna use it otherwise we'll
use the default state title, right?

89
00:05:37.950 --> 00:05:39.040
So that's why and

90
00:05:39.040 --> 00:05:43.690
the reason I'm using props here is
because I don't wanna have to have like,

91
00:05:43.690 --> 00:05:48.760
title equals and then here would be like
actual title or something like that.

92
00:05:48.760 --> 00:05:50.830
We don't wanna have to double declare.

93
00:05:50.830 --> 00:05:52.730
So by leaving it is a props object.

94
00:05:52.730 --> 00:05:55.170
We don't have to worry about that
it can just be title title title.

95
00:05:56.200 --> 00:06:01.157
See the same thing for
the description, And

96
00:06:01.157 --> 00:06:04.961
for the image, whoops.

97
00:06:09.690 --> 00:06:16.050
Description, and
this one It's gonna be image.

98
00:06:17.420 --> 00:06:21.472
And then finally down here, we're gonna
do a little bit of magic because we want

99
00:06:21.472 --> 00:06:23.900
the URL,
we're going to do a canonical URL.

100
00:06:23.900 --> 00:06:28.857
And the way that we're gonna
do canonical URL is we're

101
00:06:28.857 --> 00:06:33.403
gonna use the URL and
we'll get the props .path.

102
00:06:33.403 --> 00:06:40.586
So props dot path will be like
the full link to our page,

103
00:06:40.586 --> 00:06:46.270
or it'll be just an empty like a slash.

104
00:06:46.270 --> 00:06:51.000
And we're gonna set the base
as the site URL, right?

105
00:06:51.000 --> 00:06:55.396
And so what that'll do is it'll make
the canonical URL a full HTTP URL,

106
00:06:55.396 --> 00:06:57.370
which is what we want.

107
00:06:57.370 --> 00:07:01.190
And now that I think about it,
we wanna do the same thing for the image.

108
00:07:01.190 --> 00:07:04.300
So I'm going to,
let's do the same thing here.

109
00:07:05.620 --> 00:07:09.002
New URL because the image again in a,
like a social sharing,

110
00:07:09.002 --> 00:07:10.540
that needs to be a full URL.

111
00:07:10.540 --> 00:07:15.432
Well it can't just be like slash images
slash whatever it needs to be HTTP,

112
00:07:15.432 --> 00:07:16.140
and so on.

113
00:07:16.140 --> 00:07:19.480
So we're gonna use the the props image or
the default image.

114
00:07:19.480 --> 00:07:24.958
And that will also use as
a base the defaults, site URL.

115
00:07:24.958 --> 00:07:28.870
And that gives us a fully qualified URL.

116
00:07:28.870 --> 00:07:32.989
And the nice thing about this is
if you put in here, a full URL,

117
00:07:32.989 --> 00:07:35.360
it'll just override this base.

118
00:07:35.360 --> 00:07:38.909
So the URL API is is smart
enough to handle that.

119
00:07:38.909 --> 00:07:44.340
But if we wanna put in relative path
this makes sure that it still works.

120
00:07:45.440 --> 00:07:47.924
So now that we've got our title,
description, image and URL,

121
00:07:47.924 --> 00:07:49.310
we can actually start using these.

122
00:07:49.310 --> 00:07:52.310
So let's return some react.

123
00:07:52.310 --> 00:07:56.004
The first thing we're going to
do is set up a helmet component.

124
00:07:56.004 --> 00:08:00.466
And helmet is a kind of it's

125
00:08:00.466 --> 00:08:05.320
like a head tag but not quite.

126
00:08:05.320 --> 00:08:08.960
So it's got a little bit of its own API.

127
00:08:08.960 --> 00:08:12.040
For the most part, we can just
use it like a standard head tag.

128
00:08:12.040 --> 00:08:13.840
So we'll add in a title.

129
00:08:13.840 --> 00:08:17.750
Let's add in a meta Name, Description.

130
00:08:17.750 --> 00:08:20.280
And we'll give that one a content.

131
00:08:21.370 --> 00:08:22.300
Have the description.

132
00:08:25.290 --> 00:08:28.530
And we wanna do link rel canonical.

133
00:08:28.530 --> 00:08:35.190
And this will solve that trailing slash
problem because this URL will be the same.

134
00:08:35.190 --> 00:08:38.370
And we'll get a canonical URL.

135
00:08:38.370 --> 00:08:43.730
So we can set the href to be our URL.

136
00:08:46.010 --> 00:08:51.919
And finally, if there is an image,
because there might not be,

137
00:08:51.919 --> 00:08:55.968
then we're gonna set
a meta name of image and

138
00:08:55.968 --> 00:08:59.599
the content will be the image, right?

139
00:08:59.599 --> 00:09:05.030
Okay, so and
then we need to make that here.

140
00:09:05.030 --> 00:09:09.381
And the reason that I make this optional
is that it is possible that maybe you

141
00:09:09.381 --> 00:09:14.300
don't want a default image and so you
leave this empty in your Gatsby config.

142
00:09:14.300 --> 00:09:20.300
And then that way means we don't put
a broken image up is your image.

143
00:09:21.910 --> 00:09:24.240
So next we want to set up for Facebook.

144
00:09:24.240 --> 00:09:27.965
So let's do property OJI URL, and

145
00:09:27.965 --> 00:09:32.080
that's gonna be content equals URL.

146
00:09:33.320 --> 00:09:39.100
We can do this again let's do a type and
you can do a lot of things with these.

147
00:09:39.100 --> 00:09:45.100
I'm doing a pretty like,
general purpose this will be fine.

148
00:09:45.100 --> 00:09:50.116
And you can do a little more research
if you want to do it like exactly

149
00:09:50.116 --> 00:09:55.313
the right way for for rendering
the title or the OG : title will be that

150
00:09:55.313 --> 00:10:01.400
the description, Right?

151
00:10:01.400 --> 00:10:03.730
And then we want, what else?

152
00:10:03.730 --> 00:10:05.120
Yeah, we need one of these image ones.

153
00:10:05.120 --> 00:10:07.720
So, let's copy this one actually.

154
00:10:07.720 --> 00:10:13.340
And this one will be an og image,
and its content will be image.

155
00:10:13.340 --> 00:10:18.001
Alright, so that's Facebook and
in a lot of other services, but

156
00:10:18.001 --> 00:10:22.430
we also want to make sure
that we're doing Twitter.

157
00:10:22.430 --> 00:10:23.440
Alright, so let's add one more.

158
00:10:23.440 --> 00:10:27.690
We're gonna do a name of Twitter card.

159
00:10:27.690 --> 00:10:31.712
And because we're assuming
we're gonna have an image,

160
00:10:31.712 --> 00:10:35.980
we're gonna make this
a summary large image, right?

161
00:10:35.980 --> 00:10:41.890
Then we're gonna set meta name,
and that'll be Twitter title.

162
00:10:41.890 --> 00:10:46.481
And all of these you could make these
configurable where you could Set custom

163
00:10:46.481 --> 00:10:49.910
stuff on Twitter and
custom stuff on Facebook.

164
00:10:49.910 --> 00:10:56.040
I don't like doing that mainly because
it makes me lazy and I never do it.

165
00:10:56.040 --> 00:10:59.777
So then I just have all this config
that I don't want to deal with.

166
00:10:59.777 --> 00:11:03.900
I get overwhelmed and either ignore
it entirely or end up letting my site

167
00:11:03.900 --> 00:11:09.410
languish because I can't bear the thought
of having to update all this content.

168
00:11:09.410 --> 00:11:11.270
So let's do another one
of those image ones.

169
00:11:11.270 --> 00:11:14.900
This one is gonna be called Twitter image.

170
00:11:14.900 --> 00:11:20.571
Okay, so now what we've created If we
have grabbed out default metadata.

171
00:11:20.571 --> 00:11:25.832
We are exporting a prop called SEO
that accepts props with the title,

172
00:11:25.832 --> 00:11:28.950
description, image and path.

173
00:11:28.950 --> 00:11:33.556
And we are returning all of
the SEO tags that we might need.

174
00:11:33.556 --> 00:11:38.138
To manage not just the browser display.

175
00:11:38.138 --> 00:11:42.602
But also what shows up on Google,
what shows up on Facebook, what shows up

176
00:11:42.602 --> 00:11:46.931
on Twitter and a whole lot of other
services will read these Open Graph.

177
00:11:46.931 --> 00:11:49.250
So like LinkedIn and stuff like that.

178
00:11:49.250 --> 00:11:52.520
So we're customizing the way that our site
is going to look across social media.

179
00:11:54.100 --> 00:11:55.850
Once we have saved that.

180
00:11:55.850 --> 00:11:58.930
We can head on over to our index page.

181
00:12:00.370 --> 00:12:07.650
And we're gonna import
SEO from components SEO.

182
00:12:07.650 --> 00:12:11.250
I include the extension
because yes modules.

183
00:12:11.250 --> 00:12:15.416
Include the extension and eventually
we'll get away from babel and webpack and

184
00:12:15.416 --> 00:12:19.000
that'll mean that we will need
extensions for local files.

185
00:12:19.000 --> 00:12:22.431
It's optional, you don't need to do it,
if you don't agree with me.

186
00:12:22.431 --> 00:12:26.789
That's fine, just leave it out
once we have this SEO component,

187
00:12:26.789 --> 00:12:29.300
then we can come down here.

188
00:12:29.300 --> 00:12:31.860
And let's, just use it, right.

189
00:12:31.860 --> 00:12:34.730
And so on the homepage,
we wanna use those defaults.

190
00:12:34.730 --> 00:12:40.490
So we just drop that thing right in Boom,
no changes.

191
00:12:40.490 --> 00:12:41.810
Then we can come over here.

192
00:12:42.850 --> 00:12:45.800
Reload let's take a look at
what showed up under the hood.

193
00:12:45.800 --> 00:12:47.010
We move this over to the side again.

194
00:12:48.270 --> 00:12:53.910
And if we look at our elements we can
see in our head, we've got a title.

195
00:12:53.910 --> 00:12:57.606
We've got a description,
we've got our canonical which is

196
00:12:57.606 --> 00:13:01.460
bad because we have this
placeholder domain but that's okay.

197
00:13:01.460 --> 00:13:02.670
We can fix that later.

198
00:13:02.670 --> 00:13:05.040
We've got our image which is
actually going to the right place.

199
00:13:05.040 --> 00:13:10.886
We've got the Open Graph URL, what type
it, It is all the things that we need for

200
00:13:10.886 --> 00:13:16.705
these sites to show up properly on
social media are now in place, right?

201
00:13:16.705 --> 00:13:20.305
And that is really handy and
it used all of our defaults.

202
00:13:20.305 --> 00:13:22.930
So we've got the link in the description.

203
00:13:22.930 --> 00:13:27.310
Intro to Gatsby course projects
that's what we want it.

204
00:13:27.310 --> 00:13:31.430
So now, let's go look at the the about
page so we didn't make any changes here.

205
00:13:31.430 --> 00:13:36.140
So you can see that, notice that it
like kept the one from the homepage.

206
00:13:37.790 --> 00:13:42.789
This is something that gets a little bit
weird which is why it's important to make

207
00:13:42.789 --> 00:13:47.567
sure if you add SEO tags, update them,
because once they're added react and

208
00:13:47.567 --> 00:13:51.330
react helmet and Gatsby,
they're not gonna unset stuff.

209
00:13:51.330 --> 00:13:52.930
They're just gonna look for changes.

210
00:13:52.930 --> 00:13:58.280
So if you set it, if you set SEO tags,
make sure you add them to all your pages.

211
00:13:58.280 --> 00:14:00.570
You can do this through front matter or
whatever.

212
00:14:00.570 --> 00:14:03.880
So let's go ahead and
get this added to the about page as well.

213
00:14:03.880 --> 00:14:06.490
And this time we're gonna
do it with some changes.

214
00:14:06.490 --> 00:14:11.466
So let's go to about I'm gonna import this

215
00:14:11.466 --> 00:14:16.540
SEO tag from components, SEO dot j s.

216
00:14:16.540 --> 00:14:22.338
And then down here I'm going to wrap
this whole thing in fragment so

217
00:14:22.338 --> 00:14:28.730
that I don't have to put my SEO tag
inside of my main tag will do SEO.

218
00:14:28.730 --> 00:14:30.970
Whoa, thank you autocomplete.

219
00:14:30.970 --> 00:14:34.551
Alright, so we'll do SEO,
we'll do the title and

220
00:14:34.551 --> 00:14:38.381
I want this to be about this site and
for a description,

221
00:14:38.381 --> 00:14:42.652
We can put something like more
information about this site.

222
00:14:46.521 --> 00:14:52.970
Okay, so now we've got, here's our Seo,
here's our actual site content.

223
00:14:52.970 --> 00:14:57.770
If I refresh the page,
we can see that it's showing up properly.

224
00:14:57.770 --> 00:14:59.410
Let's look at these elements again.

225
00:14:59.410 --> 00:15:00.220
Here's the head.

226
00:15:01.730 --> 00:15:07.530
And we'll watch as I navigate, you'll
see these kind of light up and change.

227
00:15:07.530 --> 00:15:09.300
So there we go.

228
00:15:09.300 --> 00:15:13.434
Let's see the title change we can see
some of these react components changed.

229
00:15:13.434 --> 00:15:16.785
You see him jumping around
at the bottom here, right?

230
00:15:18.965 --> 00:15:22.646
So we can see that as
we're navigating around,

231
00:15:22.646 --> 00:15:27.625
the social sharing data is updating and
changing around for us.

232
00:15:29.855 --> 00:15:32.815
So, that is an SEO component, right?

