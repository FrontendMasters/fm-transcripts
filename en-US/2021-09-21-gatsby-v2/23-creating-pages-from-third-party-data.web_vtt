WEBVTT

1
00:00:00.000 --> 00:00:04.235
So in here, we're going to let
me make this smaller again,

2
00:00:04.235 --> 00:00:07.890
I'm gonna import everything
as react from react.

3
00:00:07.890 --> 00:00:13.134
As you do,
I'm going to import graph QL from Gatsby.

4
00:00:13.134 --> 00:00:18.205
I'm gonna import Gatsby
image because we wanna

5
00:00:18.205 --> 00:00:23.788
use Gatsby images for
showing those episode cards.

6
00:00:23.788 --> 00:00:30.100
And then, I want to import
our layout from components

7
00:00:30.100 --> 00:00:35.156
away to folders in our components layout.

8
00:00:35.156 --> 00:00:39.978
All right, so then I'm gonna
export a const called query,

9
00:00:39.978 --> 00:00:44.526
because we wanna do a graph
QL query to get episode data.

10
00:00:44.526 --> 00:00:47.601
So when we generate this file name,

11
00:00:47.601 --> 00:00:52.836
what that's gonna cause Gatsby
to do is a very simple query.

12
00:00:52.836 --> 00:00:57.240
The query that it's gonna do
is not gonna be filtered,

13
00:00:57.240 --> 00:01:01.090
it's not gonna get the title or
the guest name.

14
00:01:01.090 --> 00:01:03.420
It is only going to get the ID and

15
00:01:03.420 --> 00:01:08.810
whatever the field is that it needs
to create the thing so slug current.

16
00:01:08.810 --> 00:01:15.617
So this is all that's gonna be queried
by Gatsby during page creation but

17
00:01:15.617 --> 00:01:19.530
that ID is all we need
to make a page query.

18
00:01:19.530 --> 00:01:26.516
So in here, I'm going to create a new
query, we'll call this sanity episode and

19
00:01:26.516 --> 00:01:30.951
we're going to pass in the ID And
that's a string.

20
00:01:30.951 --> 00:01:35.329
So you remember when I said that
whenever Gatsby creates a page,

21
00:01:35.329 --> 00:01:37.528
it puts things in page context?

22
00:01:37.528 --> 00:01:43.157
That graph QL query is getting
handed to this page in context.

23
00:01:43.157 --> 00:01:49.827
So we have both the ID and the slug
as a variable in our graph QL query.

24
00:01:49.827 --> 00:01:52.601
I wanna get it this ID,
so I'm gonna use that, so

25
00:01:52.601 --> 00:01:57.290
then I can pick instead of all sanity
episode, I'm gonna get one sanity episode.

26
00:01:57.290 --> 00:02:02.834
So singular sanity episode and
I'm going to check

27
00:02:02.834 --> 00:02:07.851
that the ID equals the ID
that was given to us.

28
00:02:07.851 --> 00:02:13.955
Then, inside we want the title, I want
the description, I want the current slug.

29
00:02:13.955 --> 00:02:18.812
Because we're gonna link
to it on Learn with Jason

30
00:02:18.812 --> 00:02:22.523
site then we wanna get the YouTube ID.

31
00:02:22.523 --> 00:02:26.118
I also wanna get the date and
we'll do that from now,

32
00:02:26.118 --> 00:02:29.328
filter again because I
want it to be relative.

33
00:02:29.328 --> 00:02:33.590
I'm gonna get the image and
here's a cool thing that sanity does.

34
00:02:33.590 --> 00:02:39.573
Sanity is designed to support
Gatsby image data by default,

35
00:02:39.573 --> 00:02:43.808
so we don't actually need to do anything.

36
00:02:43.808 --> 00:02:49.221
We can just use sanity and it will
automatically configure any images from

37
00:02:49.221 --> 00:02:55.000
sanity itself to provide Gatsby image
data as part of the transformer plugin.

38
00:02:55.000 --> 00:02:58.996
So there are a lot of
tools that will do that,

39
00:02:58.996 --> 00:03:04.088
like sanity is one of them,
contentful is another one.

40
00:03:04.088 --> 00:03:10.232
And there's a list of a few more that
you can find on the Gatsby image docs.

41
00:03:10.232 --> 00:03:14.456
As well as a guide on how to do that in
your own transformer plugins if you wanna

42
00:03:14.456 --> 00:03:16.175
add a add a source for your own.

43
00:03:16.175 --> 00:03:18.907
If you're working on a headless CMS or
an API and

44
00:03:18.907 --> 00:03:23.226
you want Gatsby to be able to pull it
in with automatic image optimization.

45
00:03:23.226 --> 00:03:29.068
There's a tutorial you can follow
on how to do that as well.

46
00:03:29.068 --> 00:03:31.841
Cool, so we've got this query,
now we can use it.

47
00:03:31.841 --> 00:03:35.675
Let's export default function,
sanity episode,

48
00:03:35.675 --> 00:03:38.903
that's gonna be the name of our component.

49
00:03:38.903 --> 00:03:45.419
And we're gonna get data,
that data is the result of this query.

50
00:03:45.419 --> 00:03:49.745
So if I wanted to, I could just return pre

51
00:03:49.745 --> 00:03:54.341
JSON.stringify data, null 2, right?

52
00:03:54.341 --> 00:03:59.726
And then, I need to close my parentheses,

53
00:03:59.726 --> 00:04:04.513
let's put this in the layout, just so

54
00:04:04.513 --> 00:04:07.968
it looks somewhat usable.

55
00:04:07.968 --> 00:04:12.399
Alright, so Gatsby images yeah defined but
never used, that's okay, let's get a list.

56
00:04:12.399 --> 00:04:17.408
Let's see what happened, so here's my 404,
we didn't actually build the pages.

57
00:04:17.408 --> 00:04:21.732
So we're going to stop and restart
cuz we created that new dynamic page.

58
00:04:21.732 --> 00:04:26.593
So we actually need Gatsby to run again to
detect that and you can see here now that,

59
00:04:26.593 --> 00:04:28.791
now, sanity is giving info as well.

60
00:04:28.791 --> 00:04:33.775
So we can see that it's pulling in
information and dropping it in.

61
00:04:33.775 --> 00:04:39.576
And so when I refresh this page, now we
have 242 pages instead of the original,

62
00:04:39.576 --> 00:04:43.123
because it created all of
these different pages.

63
00:04:43.123 --> 00:04:47.740
So let's click into one of these and
look at that, there's all of our data.

64
00:04:47.740 --> 00:04:52.423
So this, we've dynamically
created all of these pages and

65
00:04:52.423 --> 00:04:54.961
because we wrote In this query.

66
00:04:54.961 --> 00:05:02.100
We now, have access to all the sanity data
for that episode in the component itself.

67
00:05:02.100 --> 00:05:06.759
So what I'm able to do then,
is I can take the,

68
00:05:06.759 --> 00:05:12.253
let's simplify this a bit,
we'll get the episode and

69
00:05:12.253 --> 00:05:15.726
that'll be data sanity episode.

70
00:05:15.726 --> 00:05:17.260
Not capitalized though there, all right?

71
00:05:17.260 --> 00:05:24.702
And then inside here,
you can set a title of episode title.

72
00:05:24.702 --> 00:05:29.931
You can set a description
of episode description,

73
00:05:29.931 --> 00:05:35.531
we could set the image,
I'm not gonna worry about it.

74
00:05:35.531 --> 00:05:39.690
So instead Let's set up Gatsby image and

75
00:05:39.690 --> 00:05:45.081
what I wanna do here is we're
going to set the image.

76
00:05:45.081 --> 00:05:52.356
Is going to be episode image
asset Gatsby image data and

77
00:05:52.356 --> 00:05:57.742
the alt is going to be the episode title.

78
00:05:57.742 --> 00:06:06.091
Then, we can do NH1
with the episode title.

79
00:06:06.091 --> 00:06:10.171
All right, let's do a paragraph tag and

80
00:06:10.171 --> 00:06:16.540
we'll see when it was posted,
so sorry, posted not episode.

81
00:06:16.540 --> 00:06:21.610
Posted on episode, date and

82
00:06:21.610 --> 00:06:25.629
then let's see here.

83
00:06:27.601 --> 00:06:29.323
Drop in the description,
so episode description.

84
00:06:32.471 --> 00:06:38.482
Okay, then what we can do is, let's
just add some details about this, right?

85
00:06:38.482 --> 00:06:44.433
So we've got in here, if you wanna
watch this on the original show.

86
00:06:44.433 --> 00:06:51.484
We can link out to the site so
learn with Jason dot Dev and

87
00:06:51.484 --> 00:06:56.096
then drop it slug current, right?

88
00:06:56.096 --> 00:07:00.480
And then, like full episode and
details and

89
00:07:00.480 --> 00:07:05.706
then underneath that,
we can add another one that.

90
00:07:05.706 --> 00:07:07.781
What if we just wanna
watch this on YouTube?

91
00:07:07.781 --> 00:07:12.352
We can say HTTPS go to U2.B,

92
00:07:12.352 --> 00:07:16.610
which is the shortcut and then,

93
00:07:16.610 --> 00:07:20.879
we can do episode.YouTube ID.

94
00:07:20.879 --> 00:07:26.211
And that'll take you
right to the the episode

95
00:07:26.211 --> 00:07:30.567
on YouTube and say watch on YouTube.

96
00:07:30.567 --> 00:07:35.112
All right, so
that's like an episode component, right?

97
00:07:35.112 --> 00:07:39.981
So let's see what happened,
bang, look at that,

98
00:07:39.981 --> 00:07:46.116
with very little custom code we
just wrote some markup, right?

99
00:07:46.116 --> 00:07:48.262
We didn't have to dig into internals,

100
00:07:48.262 --> 00:07:50.871
we didn't have to figure
out where data lives.

101
00:07:50.871 --> 00:07:55.579
We didn't have to really do a lot, we were
able to just use this graph QL explorer to

102
00:07:55.579 --> 00:07:57.440
figure out what data look like.

103
00:07:57.440 --> 00:08:00.850
And then build a page out, so again,

104
00:08:00.850 --> 00:08:06.802
this is a really slick way to get
a lot of data in very short order.

105
00:08:06.802 --> 00:08:10.832
I find this to be a really compelling
reason to lean on Gatsby when I'm

106
00:08:10.832 --> 00:08:12.501
trying to build something.

107
00:08:12.501 --> 00:08:16.702
If I need to get something up quickly
Gatsby's a good way to do that you

108
00:08:16.702 --> 00:08:20.116
were able to very quickly
plug in whatever data source.

109
00:08:20.116 --> 00:08:21.533
Write some react,

110
00:08:21.533 --> 00:08:26.768
you know what the data is gonna look
you don't have to figure out like.

111
00:08:26.768 --> 00:08:30.090
What's the difference between the way
that like air table's API works and

112
00:08:30.090 --> 00:08:31.840
the way that Contentful's API works.

113
00:08:31.840 --> 00:08:35.068
I don't have to care because
when they come into Gatsby,

114
00:08:35.068 --> 00:08:36.691
they look exactly the same.

115
00:08:36.691 --> 00:08:38.970
They're nodes,
I'm gonna query those nodes,

116
00:08:38.970 --> 00:08:42.543
I'm gonna filter them based on
predictable filters that Gatsby provides.

117
00:08:42.543 --> 00:08:47.817
And I'm gonna show those as pages,
same workflow, whether it's MDX or

118
00:08:47.817 --> 00:08:51.982
images or sanity data or
something entirely different.

119
00:08:51.982 --> 00:08:56.083
That predictability is a big boost for
using Gatsby,

120
00:08:56.083 --> 00:08:59.828
it's a big reason to steer
into Gatsby as a tool.

