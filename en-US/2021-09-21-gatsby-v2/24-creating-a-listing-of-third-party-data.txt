[00:00:00]
>> So the next thing that we wanna do here is let's figure out how to get these on the homepage, right? Let's make a list of sites, or have recent episodes now they're over 200, so we probably don't wanna show them all. So let's show a subset instead.

[00:00:17]
And to do that, what we can do is we can actually just dive right into this query. We don't have to make another one. We can just go in and just start adding stuff. So we can do all sanity episode. And then, in here we can take some of these things that we already had before, right?

[00:00:37]
So actually, why don't we just build this out in graphical? Why write it by hand when we can copy paste? So I want to filter where the YouTube ID does not equal norm, right? So here we are, not equal I want to get the date by order of descending, and then I also wanna limit to the latest 20.

[00:00:59]
So only 20 episodes, and then I'm going to pull out the ID I don't need, do I need the slug? I want the ID for sure. I want the title. I want the guest name so that I can show who was on the show. And then I want the Gatsby path.

[00:01:21]
Okay, so this one is kinda cool. This is a little bit of a magical thing that Gatsby does. And I believe I need to refresh the page to get it. When you use the the file path name, it's not always predictable what was used to access it. Am I building this from the slug?

[00:01:44]
And if I do, does it know that it was in a folder and those sorts of things? So what Gatsby does is actually gives you the ability to just query whatever the path was that it generated. Where's this? Wait right. You have to actually put in the file path that was generated.

[00:02:09]
So we used sanityepisode.slug Current Right. So what we're saying is Gatsby, give me whatever the path would be for this file name. And then when I run it, it will give me the actual path to use so that we can generate those slugs. So that way we're not trying to like do logic in two places Gatsby is generating files and figuring out paths using one algorithm and I'm doing my best guess at emulating whatever Gatsby's doing under the hood.

[00:02:46]
Now get away from that, instead, you can just use this same flow here of generating that Gatsby path based on what happened. So with this, if I run this, now we get all of those files. And I'm gonna skip the outer query and just get this interior part because we can drop that right in here.

[00:03:09]
And now, we are pulling in our episodes alongside our MDX and down here, I can just grab them out. Episodes equals data.allsanity.nodes. And what I mean by all sanity is all sanity episode, right? Then, come right down to the bottom here. And we can just write some markup to lay it out.

[00:03:38]
So let's add an H2 and we'll say latest episodes of Learn with Jason. And underneath that we'll do another unordered list. And we'll take each episode, map through it. And we don't even need the curlies, we can just make this into a One of those dailies, and just implicitly return our markup, so that's gonna be an LI.

[00:04:13]
And because we're iterating we need to give it a key. So we'll do episode ID. That's why it's always a kind of a nice flow to quit helping. My God, do you see this? Stop it ID, thank you. It's because I spelled it wrong. That's episode ID. Good, okay, so we're putting in the episode ID as the key.

[00:04:36]
Then we are gonna use the Gatsby link And we want to link to episode Gatsby path. And this is nice because otherwise, if we didn't have this Gatsby path, we'd have to do a global search to say, okay we actually changed our minds. They're not in the episode folder anymore we moved them into the top level so look for everywhere in the site that we have the URL generation and make sure that you update these.

[00:05:07]
So, it's a minor thing, that board does it add up. So then let's get the episode.title and we'll say with the episode.guest and I wanna make sure that the guest exists. Guests are always returned as an array because when I designed the sanity scheme, I made bad choices.

[00:05:31]
But so that's how we get to it. This is optional chaining to make sure that if there is not a guest set, it doesn't cause the page to break. And then underneath this unordered list, we can just make a link. We'll say go watch let's learn to Jason.Dev.

[00:05:53]
And we'll say watch all episodes of learn with Jason. Okay, so having done this now what we get if we go to the homepage Is we get a listing of the latest 20 episodes and then a link to the site. So we can get into one of these, all right?

[00:06:16]
Come back out here, get into one of these. And then if we link through, it's gonna take us over to learn with Jason site, or we can click over to YouTube and watch on YouTube, right? So this is a, pretty quickly and with fairly minimal custom code like having to get into the magic stuff, we were able to build a listing of our latest things.

[00:06:45]
And this is one of those things that as developers, when we are working on. Getting our portfolios out there or blogging or keeping track of like for me something I've struggled with is workshops like these when I give conference talks, I store that information somewhere. I'll put it on Airtable is one place I've tried.

[00:07:08]
I'll put it on a marked down unordered list. I'll put it in somewhere like poly work, right? And when I do that I then want to show it on my website. So I tell myself yeah, I'm gonna remember to update my website every month or so. And then I don't for 18 to 24 months.

[00:07:27]
And then someone will be like, hey, your website super out of date and then I'll feel guilty about it for another 18 to 24 months before I finally get around to fixing it. So, with this sort of approach like with this quickly, being able to pull in data from different places, the nice thing is, is that every time the Gatsby site builds and you could theoretically say I want my Gatsby site to rebuild every day, every week, something like that.

[00:07:51]
It's gonna pull the latest data. I never have to look at this site again. It's always going to pull the latest from learn with Jason. So if I made my portfolio site pulling from the learn with Jason sanity and pulling from my, I don't know whatever else I'm using.

[00:08:06]
I could have it automatically build every week or so and it would I would always show up to date information and I personally would never have to touch it again. Which is a pretty nice way to manage these sites that we know were important, but that it's hard to make the time to go and maintain.

[00:08:25]
And again, by getting all of this plumbing work out of the way by getting the cognitive overhead of having to write all the market by hand or deal with bespoke data types or any of those sorts of things. I can just focus that limited maintenance time that I have on actually writing that blog post that I've been promising somebody for a year.

[00:08:47]
Or actually updating my bio, instead of trying to figure out why the site won't build, so that I can eventually update my bio. There's so many things that get in the way of us actually producing. And one of the ways that it gets described as a term called Yak shaving, if you've never heard it, which is you wanna do one task.

[00:09:08]
But before you can do that task, you have to do a whole bunch of other tasks that unblock that first task. I like Gatsby because it removes a lot of that Yak shaving. I don't have to do a bunch of cleanup or special stuff. I can just Build the thing, right?

[00:09:24]
That to me is one of the reasons that you would want to use a tool like Gatsby is if you are not necessarily interested in tinkering with the code of your website. If you're interested in producing things on your website you wanna publish. That's a good reason to use Gatsby.

[00:09:44]
Okay, I mean with that, I think we're ready to deploy. Does anybody have questions about loading in third party data before we move on to deployment?
>> If I will use for example, the Sunny tie for example or Shopify for grabbing the data and use it into Gatsby.

[00:10:06]
So if I will add new posts, for example, from Shopify, the data will the automatically in Gatsby or I have to do something?
>> You would use something called a sanity web hook when you set up content, there are easy ways to do this. So here there's a web hooks tab under your your settings and what I can do is I can set it so that whenever something changes, it will trigger a build.

[00:10:46]
So whenever the production data set changes, it sends a post to this web hook that will cause the the site to rebuild. So WordPress and sanity and a lot of CMSs have some kind of web hook support like that. That would be the way that you would do that if they don't have web hook support.

[00:11:10]
What you would be looking for instead is some kind of a cron job where you would just rebuild the site every day.

