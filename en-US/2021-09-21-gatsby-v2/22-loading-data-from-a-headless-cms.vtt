WEBVTT

1
00:00:00.610 --> 00:00:06.281
Okay, we're in the homestretch, everybody
we are going to cover a couple things and

2
00:00:06.281 --> 00:00:11.580
then we're going to get this thing live so
let's do third party data.

3
00:00:11.580 --> 00:00:15.903
Getting data from another system
is probably the number one

4
00:00:15.903 --> 00:00:19.800
task that you'll get hit
with is a Gatsby developer.

5
00:00:19.800 --> 00:00:24.719
Somebody's got their data in Air table or
Excel or WordPress or sanity or

6
00:00:24.719 --> 00:00:29.638
contentful, or any of these third
party systems, and they're going to

7
00:00:29.638 --> 00:00:34.740
want to make a website out of it, or
as it's becoming more and more common.

8
00:00:35.990 --> 00:00:40.881
You'll actually get multiple sources
they'll have products in Shopify, and

9
00:00:40.881 --> 00:00:42.487
blog posts insanity, and

10
00:00:42.487 --> 00:00:46.940
you'll want to bring all of that
together Gatsby is really good at this.

11
00:00:46.940 --> 00:00:52.285
We talked about source plugins and one of
the things that Gatsby does really well is

12
00:00:52.285 --> 00:00:57.398
sourcing data from third party systems,
especially anything that would bill

13
00:00:57.398 --> 00:01:02.710
itself as like a headless CMS or
other kind of headless commerce, headless?

14
00:01:02.710 --> 00:01:06.740
Whatever the term headless tends to mean,
we store the data and

15
00:01:06.740 --> 00:01:12.500
provide API's to access it and that means
that it's a perfect match for Gatsby.

16
00:01:12.500 --> 00:01:16.959
So let's go ahead and load in some data,

17
00:01:16.959 --> 00:01:21.680
I'm going to use sanity so
sanity is a great

18
00:01:21.680 --> 00:01:26.285
let's let's just give it a little peek.

19
00:01:26.285 --> 00:01:30.065
So this is sanity it's
a really developer friendly,

20
00:01:30.065 --> 00:01:34.937
good free tier way to manage content
if you if you need a headless CMS,

21
00:01:34.937 --> 00:01:39.389
It's configured through code
it's got a good back end it's,

22
00:01:39.389 --> 00:01:43.320
it's it's just nice in
general I like the team.

23
00:01:43.320 --> 00:01:49.109
So this is what I use to manage
the the learn with Jason website,

24
00:01:49.109 --> 00:01:53.586
so on learn with Jason I
list all of my episodes and

25
00:01:53.586 --> 00:01:58.172
each of these is stored in sanity,
so what I need is

26
00:01:58.172 --> 00:02:03.930
the ability to pull these in and
display them somewhere.

27
00:02:03.930 --> 00:02:08.321
So if I was going to do this in a Gatsby
site, Saturday is a great match for

28
00:02:08.321 --> 00:02:13.228
this so for me this is pretty much exactly
what I want so what I haven't showed yet

29
00:02:13.228 --> 00:02:17.037
is this this Gatsby plugin we got
there kind of incidentally as

30
00:02:17.037 --> 00:02:20.810
we were talking about
Gatsby source file system.

31
00:02:20.810 --> 00:02:22.469
But the the plugin library for

32
00:02:22.469 --> 00:02:26.314
Gatsby is is pretty incredible if you
get into this plug in library and

33
00:02:26.314 --> 00:02:30.580
you start looking around We want to
use sanity okay, let's look at sanity.

34
00:02:32.300 --> 00:02:35.202
And we can find in here here's
Gatsby source sanity so

35
00:02:35.202 --> 00:02:39.460
I'm going to click on this, and it gives
us all the instructions that we need on

36
00:02:39.460 --> 00:02:42.210
how to make it work so
we're using Gatsby v3.

37
00:02:42.210 --> 00:02:46.697
So that's great let's go ahead and
just install this thing so

38
00:02:46.697 --> 00:02:50.073
I'm going to npm install
Gatsby source sanity

39
00:02:56.955 --> 00:03:01.740
And now, that we've got that,
we can go and configure it so

40
00:03:01.740 --> 00:03:09.719
I'm gonna get into my Gatsby config,
Down here.

41
00:03:12.964 --> 00:03:16.510
And at the very bottom, really doesn't
matter, you can add it wherever you want.

42
00:03:16.510 --> 00:03:20.490
I'm gonna add one more
plugin config object, and

43
00:03:20.490 --> 00:03:26.081
this one is going to resolve Gatsby
source sanity and for the options,

44
00:03:26.081 --> 00:03:31.440
the Gatsby source for
sanity has a few things that we can do.

45
00:03:31.440 --> 00:03:37.081
If you want to just read data, you can
get the, Public data, which is what goes

46
00:03:37.081 --> 00:03:43.245
on a website from sanity just using its
project ID, and then you set the data set.

47
00:03:43.245 --> 00:03:48.130
So I wanna use production as
the data set now my learn

48
00:03:48.130 --> 00:03:52.787
with Jason instance ID Is,
you can all use this so

49
00:03:52.787 --> 00:03:58.609
you don't have to go set up a data
source is this VNK, up JYP.

50
00:03:58.609 --> 00:03:59.882
And this is read only,

51
00:03:59.882 --> 00:04:04.371
like it's only going to let you pull data
that's public so anything that you can

52
00:04:04.371 --> 00:04:08.260
get through this Source is something
that's already on my website.

53
00:04:08.260 --> 00:04:11.383
So it's not we're doing a security risk or

54
00:04:11.383 --> 00:04:16.502
anything you don't have a right
token you don't have the ability to,

55
00:04:16.502 --> 00:04:19.969
go and mess with the data
this is just to read it so

56
00:04:19.969 --> 00:04:24.600
after I've saved this,
I can start my server NPM run develop.

57
00:04:30.010 --> 00:04:34.970
And what I really love about this is
because we've already looked at how to get

58
00:04:34.970 --> 00:04:38.631
images, how to get MDX posts,
how to get site metadata,

59
00:04:38.631 --> 00:04:43.610
I bet you already have some inkling
of how we're going to do this.

60
00:04:43.610 --> 00:04:48.932
So if I go over to graphical now, even if
you've just heard of sanity for the first

61
00:04:48.932 --> 00:04:53.787
time looking at this, I bet you could
figure out how to create content from

62
00:04:53.787 --> 00:04:58.790
sanity data because of how predictable
Gatsby's data models All right.

63
00:04:58.790 --> 00:05:04.711
That's the magic of this so if we go in
and we look all sanity episode, all right,

64
00:05:04.711 --> 00:05:11.320
let's get the nodes cool I want to get the
title and let's get the guest name right?

65
00:05:11.320 --> 00:05:14.230
So we can see here's the first
look at Gatsby functions

66
00:05:14.230 --> 00:05:18.659
here's JavaScript autocomplete with straw
day on here's introduction to view,

67
00:05:18.659 --> 00:05:21.610
okay, so
those are out of order let's order them.

68
00:05:21.610 --> 00:05:27.233
We're gonna sort by, let's go by
date if we can find it somewhere

69
00:05:27.233 --> 00:05:32.962
down here's the date we're going
to order it red, descending and

70
00:05:32.962 --> 00:05:40.305
hey, now we're into the future these are
posts that are happening in the future.

71
00:05:40.305 --> 00:05:45.135
So I could do like a date is,
let's say less than or

72
00:05:45.135 --> 00:05:49.276
equal to today so let's do like 2021,

73
00:05:49.276 --> 00:05:54.451
811 let's see if that works,
yeah, there we go,

74
00:05:54.451 --> 00:06:01.008
so these are the episodes that have
been published before today, so

75
00:06:01.008 --> 00:06:09.040
not anything that's scheduled,
just stuff that's already happened.

76
00:06:09.040 --> 00:06:13.943
And another way that we can
do that is I know that a post

77
00:06:13.943 --> 00:06:17.509
has happened if it has a YouTube ID, so

78
00:06:17.509 --> 00:06:22.635
I could say instead of filtering
on the date I can filter

79
00:06:22.635 --> 00:06:27.560
on whether or
not the YouTube ID does not equal null.

80
00:06:30.060 --> 00:06:34.221
And we get the same result so
there's a few ways that we can do that now

81
00:06:34.221 --> 00:06:38.820
we just happened and I happen to know that
because I work on this site a lot but

82
00:06:38.820 --> 00:06:42.350
you could pull it in in
whatever way you want it.

83
00:06:42.350 --> 00:06:46.075
Now, usually like it traditionally
in Gatsby version two and prior,

84
00:06:46.075 --> 00:06:50.245
what you would have done at this point is
you would have popped open a file called

85
00:06:50.245 --> 00:06:53.656
Gatsby node, you would have
started digging into node API's,

86
00:06:53.656 --> 00:06:57.760
you'd have to run the Create Page calls
and be providing paths and context and

87
00:06:57.760 --> 00:07:01.840
there's there's a lot of stuff that
would need to happen to make this work.

88
00:07:03.430 --> 00:07:08.327
Fortunately, we don't have to do any of
that anymore we can just let Gatsby do all

89
00:07:08.327 --> 00:07:12.359
of that work for us and this is another
thing that I think is just like

90
00:07:12.359 --> 00:07:15.023
such a cool addition
that they added in v3,

91
00:07:15.023 --> 00:07:18.500
which is the ability to create
pages based on file names.

92
00:07:18.500 --> 00:07:23.109
If you've ever used next j s,
this is going to look pretty familiar,

93
00:07:23.109 --> 00:07:27.239
but you can do sanity episode,
I'm going to write this out and

94
00:07:27.239 --> 00:07:32.960
then we'll break down what I just did slug
underscore underscore current .j s okay,

95
00:07:32.960 --> 00:07:37.120
so let's look at this file name and
talk about what it is.

96
00:07:37.120 --> 00:07:40.585
So what I'm doing here is I'm saying and
you know what,

97
00:07:40.585 --> 00:07:45.081
I want this to live in a folder so
let's give it a folder called episode and

98
00:07:45.081 --> 00:07:47.940
I'm going to move this
inside yes all right.

99
00:07:47.940 --> 00:07:51.712
So in here,
we have a folder called episode and

100
00:07:51.712 --> 00:07:57.228
that's because I want each one to
be prefixed with slash episode and

101
00:07:57.228 --> 00:08:00.437
then we're saying, sanity episode.

102
00:08:00.437 --> 00:08:06.080
Slug current and that's all in curly
braces so the curly braces signify

103
00:08:06.080 --> 00:08:11.157
to Gatsby, we want to dynamically
create the name of this file so

104
00:08:11.157 --> 00:08:17.090
we're going to generate the path
based on what is inside here.

105
00:08:17.090 --> 00:08:22.610
The Sanity Episode is the data
type of what this thing is so

106
00:08:22.610 --> 00:08:27.555
if we look at the The docs on this,
if I go to query and

107
00:08:27.555 --> 00:08:33.075
then we'll go to let me just
filter this sanity all sanity

108
00:08:33.075 --> 00:08:40.020
episode what we get back is nodes and
each node is a sanity episode.

109
00:08:40.020 --> 00:08:44.916
So I'm basically getting,
I'm saying I want to look for

110
00:08:44.916 --> 00:08:50.424
each sanity episode that we can find
I want to create a new file and

111
00:08:50.424 --> 00:08:56.960
we're going to use the slug and
I want to use the the subfield current.

112
00:08:56.960 --> 00:09:01.495
So we're saying use the sanity
episodes and as the actual name For

113
00:09:01.495 --> 00:09:06.363
the path, use the slug current field
the double underscore signifies

114
00:09:06.363 --> 00:09:09.840
that we're using a subfield of slug.

115
00:09:09.840 --> 00:09:14.880
So this is a little bit head bendy to
look at initially when you're looking at

116
00:09:14.880 --> 00:09:19.842
the data, but this is pretty slick
because it basically means any data that

117
00:09:19.842 --> 00:09:25.360
you have We can now generate a file
from it like that really, really cool.

118
00:09:25.360 --> 00:09:29.030
So let's do that ,let's
actually make that happen.

