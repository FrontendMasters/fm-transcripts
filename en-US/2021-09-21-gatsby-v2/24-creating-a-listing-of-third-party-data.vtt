WEBVTT

1
00:00:00.280 --> 00:00:04.489
&gt;&gt; So the next thing that we wanna do
here is let's figure out how to get these

2
00:00:04.489 --> 00:00:06.020
on the homepage, right?

3
00:00:06.020 --> 00:00:10.745
Let's make a list of sites, or have
recent episodes now they're over 200, so

4
00:00:10.745 --> 00:00:13.080
we probably don't wanna show them all.

5
00:00:13.080 --> 00:00:14.700
So let's show a subset instead.

6
00:00:17.310 --> 00:00:24.350
And to do that, what we can do is we can
actually just dive right into this query.

7
00:00:24.350 --> 00:00:26.440
We don't have to make another one.

8
00:00:26.440 --> 00:00:29.630
We can just go in and
just start adding stuff.

9
00:00:29.630 --> 00:00:31.980
So we can do all sanity episode.

10
00:00:31.980 --> 00:00:36.595
And then, in here we can take some of
these things that we already had before,

11
00:00:36.595 --> 00:00:37.100
right?

12
00:00:37.100 --> 00:00:39.320
So actually, why don't we just
build this out in graphical?

13
00:00:39.320 --> 00:00:42.220
Why write it by hand
when we can copy paste?

14
00:00:42.220 --> 00:00:49.730
So I want to filter where the YouTube ID
does not equal norm, right?

15
00:00:49.730 --> 00:00:55.361
So here we are, not equal I want to
get the date by order of descending,

16
00:00:55.361 --> 00:00:59.090
and then I also wanna
limit to the latest 20.

17
00:00:59.090 --> 00:01:04.162
So only 20 episodes, and then I'm going to

18
00:01:04.162 --> 00:01:10.090
pull out the ID I don't need,
do I need the slug?

19
00:01:10.090 --> 00:01:11.280
I want the ID for sure.

20
00:01:13.440 --> 00:01:14.060
I want the title.

21
00:01:14.060 --> 00:01:18.400
I want the guest name so
that I can show who was on the show.

22
00:01:18.400 --> 00:01:21.800
And then I want the Gatsby path.

23
00:01:21.800 --> 00:01:23.090
Okay, so this one is kinda cool.

24
00:01:23.090 --> 00:01:27.100
This is a little bit of a magical
thing that Gatsby does.

25
00:01:27.100 --> 00:01:28.767
And I believe I need to
refresh the page to get it.

26
00:01:31.232 --> 00:01:34.832
When you use the the file path name,

27
00:01:34.832 --> 00:01:40.600
it's not always predictable
what was used to access it.

28
00:01:41.850 --> 00:01:44.560
Am I building this from the slug?

29
00:01:44.560 --> 00:01:49.340
And if I do, does it know that it was
in a folder and those sorts of things?

30
00:01:49.340 --> 00:01:54.051
So what Gatsby does is actually gives
you the ability to just query whatever

31
00:01:54.051 --> 00:01:56.086
the path was that it generated.

32
00:01:56.086 --> 00:02:02.851
Where's this?

33
00:02:03.959 --> 00:02:07.140
Wait right.

34
00:02:07.140 --> 00:02:09.260
You have to actually put in
the file path that was generated.

35
00:02:09.260 --> 00:02:14.297
So we used sanityepisode.slug

36
00:02:16.888 --> 00:02:22.407
Current Right.

37
00:02:22.407 --> 00:02:24.794
So what we're saying is Gatsby,

38
00:02:24.794 --> 00:02:29.260
give me whatever the path would be for
this file name.

39
00:02:29.260 --> 00:02:33.136
And then when I run it,
it will give me the actual path to use so

40
00:02:33.136 --> 00:02:35.590
that we can generate those slugs.

41
00:02:35.590 --> 00:02:38.782
So that way we're not trying to like
do logic in two places Gatsby is

42
00:02:38.782 --> 00:02:41.860
generating files and
figuring out paths using one algorithm and

43
00:02:41.860 --> 00:02:46.050
I'm doing my best guess at emulating
whatever Gatsby's doing under the hood.

44
00:02:46.050 --> 00:02:51.002
Now get away from that, instead, you can
just use this same flow here of generating

45
00:02:51.002 --> 00:02:53.830
that Gatsby path based on what happened.

46
00:02:53.830 --> 00:02:59.450
So with this, if I run this,
now we get all of those files.

47
00:02:59.450 --> 00:03:01.682
And I'm gonna skip the outer query and

48
00:03:01.682 --> 00:03:05.607
just get this interior part because
we can drop that right in here.

49
00:03:09.162 --> 00:03:14.880
And now, we are pulling in our
episodes alongside our MDX and

50
00:03:14.880 --> 00:03:18.550
down here, I can just grab them out.

51
00:03:18.550 --> 00:03:23.780
Episodes equals data.allsanity.nodes.

52
00:03:25.270 --> 00:03:30.390
And what I mean by all sanity
is all sanity episode, right?

53
00:03:31.530 --> 00:03:35.040
Then, come right down to the bottom here.

54
00:03:35.040 --> 00:03:38.220
And we can just write some
markup to lay it out.

55
00:03:38.220 --> 00:03:43.684
So let's add an H2 and
we'll say latest episodes

56
00:03:43.684 --> 00:03:48.720
of Learn with Jason.

57
00:03:48.720 --> 00:03:52.140
And underneath that we'll
do another unordered list.

58
00:03:52.140 --> 00:03:54.960
And we'll take each episode,
map through it.

59
00:04:00.732 --> 00:04:03.183
And we don't even need the curlies,

60
00:04:03.183 --> 00:04:08.835
we can just make this into
a One of those dailies,

61
00:04:08.835 --> 00:04:13.740
and just implicitly return our markup,
so that's gonna be an LI.

62
00:04:13.740 --> 00:04:15.580
And because we're iterating
we need to give it a key.

63
00:04:15.580 --> 00:04:17.710
So we'll do episode ID.

64
00:04:17.710 --> 00:04:22.387
That's why it's always a kind
of a nice flow to quit helping.

65
00:04:22.387 --> 00:04:23.310
My God, do you see this?

66
00:04:24.460 --> 00:04:26.440
Stop it ID, thank you.

67
00:04:27.480 --> 00:04:29.220
It's because I spelled it wrong.

68
00:04:29.220 --> 00:04:31.550
That's episode ID.

69
00:04:31.550 --> 00:04:36.620
Good, okay, so we're putting
in the episode ID as the key.

70
00:04:36.620 --> 00:04:41.574
Then we are gonna use the Gatsby link And

71
00:04:41.574 --> 00:04:46.550
we want to link to episode Gatsby path.

72
00:04:46.550 --> 00:04:51.262
And this is nice because otherwise,
if we didn't have this Gatsby path,

73
00:04:51.262 --> 00:04:56.510
we'd have to do a global search to say,
okay we actually changed our minds.

74
00:04:56.510 --> 00:05:01.378
They're not in the episode folder anymore
we moved them into the top level so

75
00:05:01.378 --> 00:05:05.560
look for everywhere in the site
that we have the URL generation and

76
00:05:05.560 --> 00:05:07.990
make sure that you update these.

77
00:05:07.990 --> 00:05:13.270
So, it's a minor thing,
that board does it add up.

78
00:05:13.270 --> 00:05:17.342
So then let's get the episode.title and

79
00:05:17.342 --> 00:05:21.182
we'll say with the episode.guest and

80
00:05:21.182 --> 00:05:25.530
I wanna make sure that the guest exists.

81
00:05:25.530 --> 00:05:29.566
Guests are always returned as an array
because when I designed the sanity scheme,

82
00:05:29.566 --> 00:05:31.010
I made bad choices.

83
00:05:31.010 --> 00:05:34.680
But so that's how we get to it.

84
00:05:34.680 --> 00:05:38.263
This is optional chaining to make sure
that if there is not a guest set,

85
00:05:38.263 --> 00:05:40.970
it doesn't cause the page to break.

86
00:05:40.970 --> 00:05:45.960
And then underneath this unordered list,
we can just make a link.

87
00:05:45.960 --> 00:05:50.750
We'll say go watch let's
learn to Jason.Dev.

88
00:05:53.920 --> 00:05:59.520
And we'll say watch all
episodes of learn with Jason.

89
00:06:00.840 --> 00:06:05.970
Okay, so having done this now what we
get if we go to the homepage Is we

90
00:06:05.970 --> 00:06:11.860
get a listing of the latest 20
episodes and then a link to the site.

91
00:06:11.860 --> 00:06:14.880
So we can get into one of these,
all right?

92
00:06:16.220 --> 00:06:18.945
Come back out here, get into one of these.

93
00:06:18.945 --> 00:06:25.250
And then if we link through, it's gonna
take us over to learn with Jason site,

94
00:06:25.250 --> 00:06:30.425
or we can click over to YouTube and
watch on YouTube, right?

95
00:06:30.425 --> 00:06:35.468
So this is a, pretty quickly and
with fairly minimal

96
00:06:35.468 --> 00:06:40.510
custom code like having to
get into the magic stuff,

97
00:06:40.510 --> 00:06:45.850
we were able to build a listing
of our latest things.

98
00:06:45.850 --> 00:06:50.030
And this is one of those things that
as developers, when we are working on.

99
00:06:51.450 --> 00:06:56.520
Getting our portfolios out there or
blogging or keeping track of like for

100
00:06:56.520 --> 00:07:01.339
me something I've struggled with is
workshops like these when I give

101
00:07:01.339 --> 00:07:05.730
conference talks,
I store that information somewhere.

102
00:07:05.730 --> 00:07:08.740
I'll put it on Airtable
is one place I've tried.

103
00:07:08.740 --> 00:07:12.810
I'll put it on a marked
down unordered list.

104
00:07:12.810 --> 00:07:15.860
I'll put it in somewhere like poly work,
right?

105
00:07:15.860 --> 00:07:19.314
And when I do that I then want
to show it on my website.

106
00:07:19.314 --> 00:07:24.870
So I tell myself yeah, I'm gonna remember
to update my website every month or so.

107
00:07:24.870 --> 00:07:27.610
And then I don't for 18 to 24 months.

108
00:07:27.610 --> 00:07:30.529
And then someone will be like, hey,
your website super out of date and

109
00:07:30.529 --> 00:07:31.963
then I'll feel guilty about it for

110
00:07:31.963 --> 00:07:35.360
another 18 to 24 months before I
finally get around to fixing it.

111
00:07:35.360 --> 00:07:38.449
So, with this sort of approach
like with this quickly,

112
00:07:38.449 --> 00:07:42.261
being able to pull in data from
different places, the nice thing is,

113
00:07:42.261 --> 00:07:46.601
is that every time the Gatsby site builds
and you could theoretically say I want

114
00:07:46.601 --> 00:07:51.200
my Gatsby site to rebuild every day,
every week, something like that.

115
00:07:51.200 --> 00:07:53.080
It's gonna pull the latest data.

116
00:07:53.080 --> 00:07:55.430
I never have to look at this site again.

117
00:07:55.430 --> 00:07:59.019
It's always going to pull
the latest from learn with Jason.

118
00:07:59.019 --> 00:08:03.411
So if I made my portfolio site pulling
from the learn with Jason sanity and

119
00:08:03.411 --> 00:08:06.945
pulling from my,
I don't know whatever else I'm using.

120
00:08:06.945 --> 00:08:10.373
I could have it automatically
build every week or so and

121
00:08:10.373 --> 00:08:13.726
it would I would always show
up to date information and

122
00:08:13.726 --> 00:08:16.794
I personally would never
have to touch it again.

123
00:08:16.794 --> 00:08:21.735
Which is a pretty nice way to manage these
sites that we know were important, but

124
00:08:21.735 --> 00:08:25.630
that it's hard to make the time to go and
maintain.

125
00:08:25.630 --> 00:08:30.110
And again, by getting all of this
plumbing work out of the way by getting

126
00:08:30.110 --> 00:08:34.216
the cognitive overhead of having
to write all the market by hand or

127
00:08:34.216 --> 00:08:38.450
deal with bespoke data types or
any of those sorts of things.

128
00:08:38.450 --> 00:08:43.318
I can just focus that limited maintenance
time that I have on actually writing that

129
00:08:43.318 --> 00:08:47.160
blog post that I've been
promising somebody for a year.

130
00:08:47.160 --> 00:08:50.312
Or actually updating my bio,
instead of trying to

131
00:08:50.312 --> 00:08:55.480
figure out why the site won't build, so
that I can eventually update my bio.

132
00:08:55.480 --> 00:09:00.000
There's so many things that get in
the way of us actually producing.

133
00:09:00.000 --> 00:09:04.192
And one of the ways that it gets
described as a term called Yak shaving,

134
00:09:04.192 --> 00:09:08.150
if you've never heard it,
which is you wanna do one task.

135
00:09:08.150 --> 00:09:09.932
But before you can do that task,

136
00:09:09.932 --> 00:09:14.820
you have to do a whole bunch of other
tasks that unblock that first task.

137
00:09:14.820 --> 00:09:18.690
I like Gatsby because it removes
a lot of that Yak shaving.

138
00:09:18.690 --> 00:09:22.710
I don't have to do a bunch of cleanup or
special stuff.

139
00:09:22.710 --> 00:09:24.986
I can just Build the thing, right?

140
00:09:24.986 --> 00:09:30.187
That to me is one of the reasons that you
would want to use a tool like Gatsby is

141
00:09:30.187 --> 00:09:35.920
if you are not necessarily interested in
tinkering with the code of your website.

142
00:09:35.920 --> 00:09:40.190
If you're interested in producing things
on your website you wanna publish.

143
00:09:40.190 --> 00:09:41.730
That's a good reason to use Gatsby.

144
00:09:44.270 --> 00:09:48.150
Okay, I mean with that,
I think we're ready to deploy.

145
00:09:48.150 --> 00:09:53.009
Does anybody have questions
about loading in third party

146
00:09:53.009 --> 00:09:56.256
data before we move on to deployment?

147
00:09:56.256 --> 00:10:01.120
&gt;&gt; If I will use for example,
the Sunny tie for example or

148
00:10:01.120 --> 00:10:06.005
Shopify for grabbing the data and
use it into Gatsby.

149
00:10:06.005 --> 00:10:10.516
So if I will add new posts, for

150
00:10:10.516 --> 00:10:14.488
example, from Shopify,

151
00:10:14.488 --> 00:10:19.723
the data will the automatically in

152
00:10:19.723 --> 00:10:24.790
Gatsby or I have to do something?

153
00:10:24.790 --> 00:10:29.751
&gt;&gt; You would use something
called a sanity web hook when

154
00:10:29.751 --> 00:10:34.950
you set up content,
there are easy ways to do this.

155
00:10:34.950 --> 00:10:40.472
So here there's a web hooks tab under
your your settings and what I can do

156
00:10:40.472 --> 00:10:46.930
is I can set it so that whenever something
changes, it will trigger a build.

157
00:10:46.930 --> 00:10:51.251
So whenever the production
data set changes,

158
00:10:51.251 --> 00:10:57.807
it sends a post to this web hook that
will cause the the site to rebuild.

159
00:10:57.807 --> 00:11:00.462
So WordPress and sanity and

160
00:11:00.462 --> 00:11:06.620
a lot of CMSs have some kind
of web hook support like that.

161
00:11:06.620 --> 00:11:10.660
That would be the way that you would do
that if they don't have web hook support.

162
00:11:10.660 --> 00:11:11.984
What you would be looking for

163
00:11:11.984 --> 00:11:15.750
instead is some kind of a cron job where
you would just rebuild the site every day.

