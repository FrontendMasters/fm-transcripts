[00:00:00]
>> So now that we've got our meta tags, we've got a header on the homepage. You may have noticed that things are getting a little bit messy here, we've got these fragments hanging around, this SEO tags over here. This one's got a header but when we go to the About page, there's no header.

[00:00:15]
So, our site has this kind of lack of consistency. I wanna fix that. So, the next thing that we're gonna look at is how to do shared layouts in Gatsby. And, the great news is, it's just like you would do it in any other React app. So what I'm gonna do, is I'm gonna create a new component here.

[00:00:38]
We're gonna call it layout.js. And inside of it, we're going to get all the react goodies from React. We are also going to pull in the stuff that we'll need from Gatsby. So we're gonna create some links, we're going to move that header stuff out of the homepage, so we'll pull the static query over here, and the graphql tag.

[00:01:10]
That was a weird autocomplete from the Gatsby. And then we're also gonna need that SEO tag, so let's pull that in. All right, so once we've got that, we're going to export a default component called layout. And, you can make this, nope, you can make it default, you can make it not default, that's really up to you.

[00:01:38]
I am making it default, mainly out of habit, not out of any particularly good reason. I've just always used layouts as default components, I think Yeah, no rhyme or reason to that, just to preference. So a layout component is gonna take children. What children means is that when you have a React component and you wrap it around something, so for example, when we look in here, this main component, is wrapped around this h1 in this link.

[00:02:08]
This will be passed through as children to the main component. When we're wrapping with a layout, the whole content of the site is gonna get passed through inside of the layout, and we want that to be passed to his children. So we're gonna go in and pass through this children prop, and then we're also going to set the title, but we want it to default to false.

[00:02:29]
And I'll tell you why in a second. The description also false, the image, and the path which we'll set to false, right? And then that is going to be what kind of builds out our layout component. And the reason for that is, if you don't set these, we wanna check if they exist and then default.

[00:02:55]
If we made them an empty string or left them undefined, it's just easier to explicitly say, hey, if this isn't set, just make it false, so that the comparisons are not falsy but actually false. Inside of that, we want to move over this index stuff. So let's grab this straight out And I'm gonna put it in here, okay, so now we've got that metadata.

[00:03:22]
And then, we can start returning our actual layout component. So what we're gonna do in here, is a lot of the same things that we were doing before we're gonna have a fragment. We're gonna have our SEO, and that's going to take a title of Title, a description of description, an image of image, and a path of path, right?

[00:03:50]
And then, underneath that, we're going to put in a header. And in our header, I want to have a link to our home page, and that one's gonna be the meta.title. Then I also wanna have nav. Now, we're only gonna create the About page today, in the nav at least.

[00:04:11]
And so, we maybe don't need to do this, but I'm gonna do it just to show kind of the pattern. So we've got our nav item and then we're linking to the About page within it. And then down here, I'm gonna put in a main tag, and put the children inside that.

[00:04:27]
Okay, so, what we've done now is we've set up our social sharing tags. We've set up a common header, and then we've set up a container for the content of each page. And this is gonna be what lives in our layout. So, to actually use that, we can head over to our index page.

[00:04:47]
And instead of pulling in the SEO, we're gonna pull in layout from components, layout.js, right? And then I no longer need this part, because this header isn't gonna be there anymore. The SEO is already taken care of. And we don't need this closing main tag anymore. Instead, we just wrapped the whole thing with layout.

[00:05:20]
Okay, that also means I don't need these anymore. So we can simplify this component quite a bit by wrapping up that layout into its own separate component. So if I save this, Forgot to call it a function. I got caught in between a few different things there. But yes, so we're gonna call this a function layout.

[00:05:43]
And then, when I come out here to index, save, let's refresh the page. Hey, there we go. So now we have in our elements, we're looking at our header that's got all the things we want in it. And, we've got our main, which includes our content, and we've also got all of that SEO, good.

[00:06:02]
Everything that we were hoping for is now wrapped up in that layout component, so I don't have to think nearly as much about how to make this work. So let's go over do the same thing in our About component. So I'm going to import layout from components, layout .js.

[00:06:23]
And, we will put the layout here, and here, and then what I'm gonna do is actually just keep that title and description from the SEO, drop it right here. But we also don't need this main tag anymore, so I'm gonna get rid of that. So let's save that.

[00:06:44]
Let's head over to the About page. Okay, same thing. We're getting the the title tag that we want, but now, we have this consistent navigation, where the site actually looks like it's a site. It doesn't look like disparate pages kinda chunked together. And it also vastly simplifies as you can see, this is way easier to deal with than a lot of kinda strung out React code.

[00:07:09]
Because, we consolidated it a lot of that complexity, of how the layout works of, hey, we need to get the site page. And we need to do some checking to make sure that it actually exists. We got to set up this SEO tag. The basic markup of having a header and a main, that's all stuff that, we wanna to care about that exactly one time.

[00:07:31]
We want our sites to be, we wanna use semantic markup. We want to set up these meta tags and all those things. We don't want to have to do that on every page though. What we really want is we want one place that automates all of the semantics and the housekeeping of running a site.

[00:07:49]
And then abstract that away, so that when we're writing content, this is all we have to think about, what is actually on my page. And I just wrapped the rest of it with the layout. That is a really nice workflow and it's gonna add a lot of power, and just consistency.

[00:08:05]
If we've got people across multiple platforms, or multiple teams, all having to make content, I don't wanna have to educate every single team on which SEO meta tags are we using. Or, what exactly do we wanna do in terms of the way we markup the header? Forget all that.

[00:08:25]
Just put it into layout, one person owns that component, everybody else can use it. And now, you get consistency across the entire experience. So, let's commit our work here. I'm going to head over to this one. All right, let's add everything, and I'm going to commit and say, add and use a shared layout component.

[00:08:54]
All right, let's push that up. Okay.

