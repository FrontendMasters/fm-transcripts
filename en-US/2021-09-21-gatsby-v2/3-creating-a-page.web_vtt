WEBVTT

1
00:00:00.180 --> 00:00:05.430
We now have our gatsby project and
there's nothing in it.

2
00:00:05.430 --> 00:00:08.380
It won't do anything right
now because there's no code.

3
00:00:08.380 --> 00:00:11.450
So, let's create our first page.

4
00:00:11.450 --> 00:00:15.005
We're gonna make the simplest
possible Gatsby site that we can.

5
00:00:15.005 --> 00:00:17.600
And the way that we do
that is in our source,

6
00:00:17.600 --> 00:00:21.430
we're gonna create a new
folder called pages.

7
00:00:21.430 --> 00:00:23.404
And then inside this pages,

8
00:00:23.404 --> 00:00:28.210
we're gonna create a new file,
and we're gonna call it index.js.

9
00:00:28.210 --> 00:00:34.450
So, the concept of pages in Gatsby,
this is a magic folder.

10
00:00:34.450 --> 00:00:38.569
And, what that means is as Gatsby is run,
it's gonna look for

11
00:00:38.569 --> 00:00:43.980
source pages and anything inside of it,
it will treat as a page for the site.

12
00:00:43.980 --> 00:00:45.987
So, by creating index.js,

13
00:00:45.987 --> 00:00:51.490
what I've just done is created the index
page, the home page for my site.

14
00:00:51.490 --> 00:00:55.890
So, let's import everything as React.

15
00:00:55.890 --> 00:01:00.292
This is something that you have to do in
Gatsby right now because they haven't

16
00:01:00.292 --> 00:01:05.238
turned off the requirement to import React
when you're not using imports from React,

17
00:01:05.238 --> 00:01:07.490
that will likely change in the future.

18
00:01:07.490 --> 00:01:12.251
But for now, it's a little quirk of Gatsby
that we still have to import everything

19
00:01:12.251 --> 00:01:13.777
from react, not Gatsby.

20
00:01:16.419 --> 00:01:22.285
And then,
we can export a default function.

21
00:01:22.285 --> 00:01:27.668
And, this decision here to use
a default function versus export

22
00:01:27.668 --> 00:01:32.753
default with a fat arrow function or
an anonymous function or

23
00:01:32.753 --> 00:01:37.458
any of those things,
those are all arbitrary choices.

24
00:01:37.458 --> 00:01:38.500
This is my preference.

25
00:01:38.500 --> 00:01:42.170
I like having named functions makes
my components easier to debug.

26
00:01:42.170 --> 00:01:45.211
The only big thing is it
has to be a default export.

27
00:01:45.211 --> 00:01:48.960
Pages in Gatsby have to be a default
export or else they won't get picked up.

28
00:01:50.010 --> 00:01:53.740
And inside of this,
we can just return some basic code.

29
00:01:53.740 --> 00:01:57.474
So I'm gonna do a main tag,
what's up, Mark?

30
00:02:07.029 --> 00:02:08.120
That's a great question.

31
00:02:08.120 --> 00:02:12.000
I believe Gatsby, let's see.

32
00:02:12.000 --> 00:02:17.022
That might be an intermediate
Gatsby question,

33
00:02:17.022 --> 00:02:21.560
but they have a doc on
this that we can share.

34
00:02:24.280 --> 00:02:28.650
I think, it just works, yeah, natively
supports JavaScript and TypeScript.

35
00:02:28.650 --> 00:02:35.759
So if you just add the .tsx extension,
you will get TypeScript.

36
00:02:35.759 --> 00:02:37.654
We're not gonna write TypeScript today,

37
00:02:37.654 --> 00:02:40.970
mainly because I don't know
TypeScript well enough to teach it.

38
00:02:40.970 --> 00:02:44.557
So, we are going to stick with
regular old JavaScript, but there

39
00:02:44.557 --> 00:02:49.256
are some really good TypeScript resources
on Frontend Masters, on learn with JSON,

40
00:02:49.256 --> 00:02:52.740
anywhere that you wanna go,
if you wanna dig into TypeScript.

41
00:02:54.140 --> 00:02:55.615
Okay, so in our index page,

42
00:02:55.615 --> 00:02:58.940
what we're going to do is we're
exporting a default function.

43
00:02:58.940 --> 00:03:01.830
I named the index page, so
that it'll show up in debug logs.

44
00:03:01.830 --> 00:03:05.220
And we're returning just a main element.

45
00:03:05.220 --> 00:03:08.760
And, you can make this whatever you want,
it could be a div or whatever.

46
00:03:08.760 --> 00:03:13.955
And I'm going to put an h1 and
let's do Hello Frontend Masters!.

47
00:03:15.160 --> 00:03:16.760
Okay, that's it.

48
00:03:16.760 --> 00:03:18.650
You've now built a Gatsby site.

49
00:03:18.650 --> 00:03:20.490
That is the simplest possible Gatsby site.

50
00:03:20.490 --> 00:03:24.790
It's one file, one React component and
now we can make this thing work.

51
00:03:24.790 --> 00:03:27.720
So let's run it.

52
00:03:27.720 --> 00:03:29.590
I'm gonna npm run develop.

53
00:03:31.588 --> 00:03:33.859
Wait, I need to actually
install all the dependencies,

54
00:03:33.859 --> 00:03:35.340
forgot to actually run npm install.

55
00:03:35.340 --> 00:03:39.480
So inside the repo that we cloned,
I'm running npm install or i for short.

56
00:03:40.800 --> 00:03:43.420
And, this is going to pull in
Gatsby React and ReactDOM,

57
00:03:43.420 --> 00:03:45.780
which are the dependencies we need.

58
00:03:45.780 --> 00:03:48.490
Gatsby is a little bit big
because it does a lot.

59
00:03:48.490 --> 00:03:51.690
So it can take a little bit to install.

60
00:03:51.690 --> 00:03:53.381
That doesn't mean that
it ships all of that.

61
00:03:53.381 --> 00:03:56.930
Most of what it pulls in is only for
development, not for production.

62
00:03:56.930 --> 00:04:01.800
So it's a big package, but it still ships
relatively light amount of JavaScript.

63
00:04:01.800 --> 00:04:05.563
Okay, so we have completed the install,
we are ready to roll and

64
00:04:05.563 --> 00:04:10.304
it looks like I stopped the scrolling cuz
I'd actually only took 16 seconds and

65
00:04:10.304 --> 00:04:13.040
I was just staring at my
scrolled up terminal.

66
00:04:13.040 --> 00:04:17.421
So now that we've actually got the
dependencies, we've got our dependencies,

67
00:04:17.421 --> 00:04:18.575
we've got our page.

68
00:04:18.575 --> 00:04:21.748
And again,
all the pages is a React component and

69
00:04:21.748 --> 00:04:27.190
it's in this special pages folder inside
of our source directory and index.js.

70
00:04:27.190 --> 00:04:29.270
So this is gonna create
our homepage of the site.

71
00:04:29.270 --> 00:04:30.010
Let's run develop.

72
00:04:31.400 --> 00:04:35.590
And what we can see happens here is
the Gatsby develop CLI command runs.

73
00:04:35.590 --> 00:04:37.550
And, Gatsby starts doing its thing.

74
00:04:37.550 --> 00:04:39.090
So a lot happens in here.

75
00:04:39.090 --> 00:04:43.590
And you can see that it's looking for
config, it's setting up a cache.

76
00:04:43.590 --> 00:04:47.825
It's looking for whether or not there
are Gatsby functions which we aren't gonna

77
00:04:47.825 --> 00:04:51.582
talk about today, but we will cover
In the intermediate Gatsby course.

78
00:04:51.582 --> 00:04:55.100
It has a handful of lifecycle
functions and things like that.

79
00:04:55.100 --> 00:04:58.052
The vast majority of this is
what's happening under the hood,

80
00:04:58.052 --> 00:05:00.725
not something that you as
a developer need to care about,

81
00:05:00.725 --> 00:05:03.760
unless you're trying to do
something very specific.

82
00:05:03.760 --> 00:05:07.561
So for the most part, you just look for
all the successes to run and

83
00:05:07.561 --> 00:05:10.690
you'll see a list here of
all of our files names.

84
00:05:10.690 --> 00:05:12.110
So let's open this up.

85
00:05:12.110 --> 00:05:14.570
And now we have Hello Frontend Masters!.

86
00:05:14.570 --> 00:05:16.870
So this is our working site.

87
00:05:16.870 --> 00:05:22.180
And if we inspect this, make this
a little bit bigger so you can see it.

88
00:05:22.180 --> 00:05:25.708
You can see that inside here,

89
00:05:25.708 --> 00:05:30.840
the site has generated a Gatsby div.

90
00:05:30.840 --> 00:05:33.289
This is where Gatsby puts everything.

91
00:05:33.289 --> 00:05:36.570
It adds this div and
then it runs the site inside of here.

92
00:05:36.570 --> 00:05:38.970
And, we can see that there's
some accessibility stuff.

93
00:05:38.970 --> 00:05:42.900
This is actually really slick,
where it's making the page focusable.

94
00:05:42.900 --> 00:05:47.457
So if you do navigation, on the client
side, a lot of times what happens is

95
00:05:47.457 --> 00:05:52.309
screen readers and other accessibility
tools don't realize that the page has

96
00:05:52.309 --> 00:05:56.440
been changed because no browser
page change event happened.

97
00:05:56.440 --> 00:06:00.230
So what Gatsby is doing is it's adding
some helpers that make that work.

98
00:06:00.230 --> 00:06:02.460
Inside of that, we get our markup.

99
00:06:02.460 --> 00:06:05.509
And as you can see,
this is just straight up markup.

100
00:06:05.509 --> 00:06:06.940
That's all there is to it.

101
00:06:06.940 --> 00:06:13.120
And, to see what this looks like when we
build it, let's actually build this site.

102
00:06:13.120 --> 00:06:15.295
So I'm gonna run npm run build.

103
00:06:15.295 --> 00:06:19.551
And, the reason I wanna show
this is that Gatsby when it's in

104
00:06:19.551 --> 00:06:24.641
development mode adds things for
hot reloading and debugging output and

105
00:06:24.641 --> 00:06:29.920
some other information that makes
the bundle a little bit bigger.

106
00:06:29.920 --> 00:06:33.399
When you build the site, it takes all of
that out and builds a production bundle.

107
00:06:34.470 --> 00:06:36.920
So, let's run this thing.

108
00:06:36.920 --> 00:06:38.290
We're gonna run serve.

109
00:06:39.987 --> 00:06:42.504
And this opens up in 9,000.

110
00:06:42.504 --> 00:06:45.983
And so if we look at this,
not a lot has changed here, but

111
00:06:45.983 --> 00:06:48.140
let's check out the Network tab.

112
00:06:49.976 --> 00:06:51.290
If I can find my Network tab.

113
00:06:52.450 --> 00:06:53.870
Here it is.

114
00:06:53.870 --> 00:06:57.168
Let's maybe make this a lot bigger so
we can see what's going on.

115
00:07:00.660 --> 00:07:05.928
So I'm going to refresh the page
now that we're running, and

116
00:07:05.928 --> 00:07:11.519
we can see that we sent down
about 184 kilobytes of resources.

117
00:07:11.519 --> 00:07:13.280
Let's disable the cache and
run that again.

118
00:07:16.100 --> 00:07:21.030
So, 63.6 kilobytes transferred,
that's after compression and everything.

119
00:07:21.030 --> 00:07:23.430
And we got the whole
page down pretty fast.

120
00:07:23.430 --> 00:07:26.760
Obviously, we're on local host so
everything's gonna be real fast.

121
00:07:26.760 --> 00:07:31.209
But we can see here that it's sending
down a little bit of Webpack runtime,

122
00:07:31.209 --> 00:07:34.420
it sends down about 42
kilobytes of the framework.

123
00:07:34.420 --> 00:07:38.070
And then our app comes out
to about 15.6 kilobytes.

124
00:07:38.070 --> 00:07:40.980
And then we can see some other
stuff in here, that's kinda cool.

125
00:07:40.980 --> 00:07:45.210
We get the Index page is
sent down as a component.

126
00:07:45.210 --> 00:07:49.264
And then we get JSON, that is the data for

127
00:07:49.264 --> 00:07:54.240
the page and JSON that's for
the app itself.

128
00:07:54.240 --> 00:07:58.530
And this data will get more interesting
as we add more things to our site.

129
00:07:58.530 --> 00:08:00.870
And again, none of this is stuff
that you need to care about.

130
00:08:00.870 --> 00:08:03.190
This is just how Gatsby's
running things under the hood.

131
00:08:03.190 --> 00:08:07.173
But what this means is, if I go in and
I disable JavaScript, and

132
00:08:07.173 --> 00:08:08.764
see if I can find it here.

133
00:08:11.564 --> 00:08:13.370
Where are my advanced settings?

134
00:08:13.370 --> 00:08:15.370
Let's close the console.

135
00:08:15.370 --> 00:08:19.820
And I'm going to, here,
this is what I was looking for.

136
00:08:19.820 --> 00:08:23.910
Then I can disable JavaScript
down here somewhere.

137
00:08:25.570 --> 00:08:26.600
There we go.

138
00:08:26.600 --> 00:08:29.530
So I'm gonna disable JavaScript and
refresh the page.

139
00:08:29.530 --> 00:08:32.974
And now look, we still get our
Hello Frontend Masters and

140
00:08:32.974 --> 00:08:36.890
if we look at the markup,
we still have our markup here.

141
00:08:36.890 --> 00:08:39.080
All the things that we wanted are present.

142
00:08:39.080 --> 00:08:42.130
So the site's still works
without JavaScript.

143
00:08:42.130 --> 00:08:47.240
But what doesn't happen is you can see
that all of this JavaScript got blocked.

144
00:08:47.240 --> 00:08:53.550
So we sent a lot less data but
we didn't need it.

145
00:08:53.550 --> 00:08:57.810
It's all optional enhancements, these
are things that build on top of the site.

146
00:08:57.810 --> 00:09:02.460
So that's one of the things that's
really powerful about Gatsby.

147
00:09:11.863 --> 00:09:14.270
Right now, it's not there for anything.

148
00:09:14.270 --> 00:09:19.106
When we add a second page, which is
what we'll do next, I'll show you how

149
00:09:19.106 --> 00:09:24.670
that works and that is how we signify
to the document that a page is changed.

150
00:09:24.670 --> 00:09:28.100
So, let's actually go ahead and do that.

151
00:09:28.100 --> 00:09:29.940
We're gonna create a second page here.

152
00:09:31.090 --> 00:09:33.149
And this one we can call about.

153
00:09:34.989 --> 00:09:39.904
And so, what's worth mentioning
here is that what we're doing is

154
00:09:39.904 --> 00:09:44.290
we're basically creating HTML
files with the same name.

155
00:09:44.290 --> 00:09:50.183
So index.js becomes index.html,
which browser shortcut to slash.

156
00:09:50.183 --> 00:09:54.050
About will become .html or /about.

157
00:09:55.110 --> 00:09:59.364
And for us to do that, we can actually
take all the same information out here so

158
00:09:59.364 --> 00:10:01.680
I'll just copy paste this one.

159
00:10:01.680 --> 00:10:07.037
And let's call this one AboutPage and
update some copier.

160
00:10:07.037 --> 00:10:09.437
We'll do About This Site.

161
00:10:12.309 --> 00:10:17.237
Okay, so having done that,
now note, my site is still, wait,

162
00:10:17.237 --> 00:10:19.880
I need to go back to npm run develop.

163
00:10:22.759 --> 00:10:26.773
If npm run develop had been running this,
it would have picked this up without

164
00:10:26.773 --> 00:10:30.990
having to restart because new pages Gatsby
can recover from that and just shown.

165
00:10:32.080 --> 00:10:40.080
So, let's close the server, go back over
here, and we've got about now works.

166
00:10:40.080 --> 00:10:41.360
Okay, so this is great.

167
00:10:41.360 --> 00:10:46.643
So, again, I'm navigating directly,
which means that we are getting

168
00:10:46.643 --> 00:10:52.640
that full page event which doesn't
require any activity on Gatsby site.

169
00:10:52.640 --> 00:10:57.810
But, the next thing that we wanna do is
we wanna figure out how to do a link.

170
00:10:57.810 --> 00:11:03.689
So, before we do that,
let me go ahead and just commit my work.

171
00:11:05.829 --> 00:11:08.568
So I'm gonna get into github.

172
00:11:12.483 --> 00:11:15.203
And then we're gonna go into this project,
so

173
00:11:15.203 --> 00:11:18.500
frontend masters intro to Gatsby project.

174
00:11:18.500 --> 00:11:19.650
And let's just check our stuff.

175
00:11:19.650 --> 00:11:24.780
So we've created two pages so
far, all right?

176
00:11:24.780 --> 00:11:28.890
So I'm going to commit this and
just say create pages.

177
00:11:28.890 --> 00:11:31.480
So I'm gonna open up a new one,
we're gonna call this branch progress.

178
00:11:31.480 --> 00:11:34.850
And this is the one that I'll
actually be changing things on.

179
00:11:34.850 --> 00:11:40.711
So if I look at our log, we can see,
here's our commit, we created pages and

180
00:11:40.711 --> 00:11:45.430
I'm going to push, To progress.

181
00:11:45.430 --> 00:11:49.373
So I'll continually push to the progress
branch throughout the workshop so

182
00:11:49.373 --> 00:11:51.660
you can see the code going
up as we as we do it.

