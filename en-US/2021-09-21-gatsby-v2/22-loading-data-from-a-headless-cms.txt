[00:00:00]
>> Okay, we're in the homestretch, everybody we are going to cover a couple things and then we're going to get this thing live so let's do third party data. Getting data from another system is probably the number one task that you'll get hit with is a Gatsby developer.

[00:00:19]
Somebody's got their data in Air table or Excel or WordPress or sanity or contentful, or any of these third party systems, and they're going to want to make a website out of it, or as it's becoming more and more common. You'll actually get multiple sources they'll have products in Shopify, and blog posts insanity, and you'll want to bring all of that together Gatsby is really good at this.

[00:00:46]
We talked about source plugins and one of the things that Gatsby does really well is sourcing data from third party systems, especially anything that would bill itself as like a headless CMS or other kind of headless commerce, headless? Whatever the term headless tends to mean, we store the data and provide API's to access it and that means that it's a perfect match for Gatsby.

[00:01:12]
So let's go ahead and load in some data, I'm going to use sanity so sanity is a great let's let's just give it a little peek. So this is sanity it's a really developer friendly, good free tier way to manage content if you if you need a headless CMS, It's configured through code it's got a good back end it's, it's it's just nice in general I like the team.

[00:01:43]
So this is what I use to manage the the learn with Jason website, so on learn with Jason I list all of my episodes and each of these is stored in sanity, so what I need is the ability to pull these in and display them somewhere. So if I was going to do this in a Gatsby site, Saturday is a great match for this so for me this is pretty much exactly what I want so what I haven't showed yet is this this Gatsby plugin we got there kind of incidentally as we were talking about Gatsby source file system.

[00:02:20]
But the the plugin library for Gatsby is is pretty incredible if you get into this plug in library and you start looking around We want to use sanity okay, let's look at sanity. And we can find in here here's Gatsby source sanity so I'm going to click on this, and it gives us all the instructions that we need on how to make it work so we're using Gatsby v3.

[00:02:42]
So that's great let's go ahead and just install this thing so I'm going to npm install Gatsby source sanity And now, that we've got that, we can go and configure it so I'm gonna get into my Gatsby config, Down here. And at the very bottom, really doesn't matter, you can add it wherever you want.

[00:03:16]
I'm gonna add one more plugin config object, and this one is going to resolve Gatsby source sanity and for the options, the Gatsby source for sanity has a few things that we can do. If you want to just read data, you can get the, Public data, which is what goes on a website from sanity just using its project ID, and then you set the data set.

[00:03:43]
So I wanna use production as the data set now my learn with Jason instance ID Is, you can all use this so you don't have to go set up a data source is this VNK, up JYP. And this is read only, like it's only going to let you pull data that's public so anything that you can get through this Source is something that's already on my website.

[00:04:08]
So it's not we're doing a security risk or anything you don't have a right token you don't have the ability to, go and mess with the data this is just to read it so after I've saved this, I can start my server NPM run develop. And what I really love about this is because we've already looked at how to get images, how to get MDX posts, how to get site metadata, I bet you already have some inkling of how we're going to do this.

[00:04:43]
So if I go over to graphical now, even if you've just heard of sanity for the first time looking at this, I bet you could figure out how to create content from sanity data because of how predictable Gatsby's data models All right. That's the magic of this so if we go in and we look all sanity episode, all right, let's get the nodes cool I want to get the title and let's get the guest name right?

[00:05:11]
So we can see here's the first look at Gatsby functions here's JavaScript autocomplete with straw day on here's introduction to view, okay, so those are out of order let's order them. We're gonna sort by, let's go by date if we can find it somewhere down here's the date we're going to order it red, descending and hey, now we're into the future these are posts that are happening in the future.

[00:05:40]
So I could do like a date is, let's say less than or equal to today so let's do like 2021, 811 let's see if that works, yeah, there we go, so these are the episodes that have been published before today, so not anything that's scheduled, just stuff that's already happened.

[00:06:09]
And another way that we can do that is I know that a post has happened if it has a YouTube ID, so I could say instead of filtering on the date I can filter on whether or not the YouTube ID does not equal null. And we get the same result so there's a few ways that we can do that now we just happened and I happen to know that because I work on this site a lot but you could pull it in in whatever way you want it.

[00:06:42]
Now, usually like it traditionally in Gatsby version two and prior, what you would have done at this point is you would have popped open a file called Gatsby node, you would have started digging into node API's, you'd have to run the Create Page calls and be providing paths and context and there's there's a lot of stuff that would need to happen to make this work.

[00:07:03]
Fortunately, we don't have to do any of that anymore we can just let Gatsby do all of that work for us and this is another thing that I think is just like such a cool addition that they added in v3, which is the ability to create pages based on file names.

[00:07:18]
If you've ever used next j s, this is going to look pretty familiar, but you can do sanity episode, I'm going to write this out and then we'll break down what I just did slug underscore underscore current .j s okay, so let's look at this file name and talk about what it is.

[00:07:37]
So what I'm doing here is I'm saying and you know what, I want this to live in a folder so let's give it a folder called episode and I'm going to move this inside yes all right. So in here, we have a folder called episode and that's because I want each one to be prefixed with slash episode and then we're saying, sanity episode.

[00:08:00]
Slug current and that's all in curly braces so the curly braces signify to Gatsby, we want to dynamically create the name of this file so we're going to generate the path based on what is inside here. The Sanity Episode is the data type of what this thing is so if we look at the The docs on this, if I go to query and then we'll go to let me just filter this sanity all sanity episode what we get back is nodes and each node is a sanity episode.

[00:08:40]
So I'm basically getting, I'm saying I want to look for each sanity episode that we can find I want to create a new file and we're going to use the slug and I want to use the the subfield current. So we're saying use the sanity episodes and as the actual name For the path, use the slug current field the double underscore signifies that we're using a subfield of slug.

[00:09:09]
So this is a little bit head bendy to look at initially when you're looking at the data, but this is pretty slick because it basically means any data that you have We can now generate a file from it like that really, really cool. So let's do that ,let's actually make that happen.

