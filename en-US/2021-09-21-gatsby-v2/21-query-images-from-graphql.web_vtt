WEBVTT

1
00:00:00.270 --> 00:00:04.956
We're gonna do some dynamic images, so
let me just clean this up a little bit,

2
00:00:04.956 --> 00:00:09.800
get us down to an empty folder and
let's start by opening up our about page.

3
00:00:09.800 --> 00:00:14.658
So on our about page,
I wanna get an image by querying for it,

4
00:00:14.658 --> 00:00:18.870
so to do that,
I'm gonna get GraphQL out of Gatsby.

5
00:00:18.870 --> 00:00:21.657
Now note I'm not getting use static query,

6
00:00:21.657 --> 00:00:25.630
we're gonna introduce
something called a page query.

7
00:00:25.630 --> 00:00:31.889
So page queries in Gatsby are like
they were the original concept,

8
00:00:31.889 --> 00:00:37.350
but they introduce a little
bit of a cognitive leap.

9
00:00:37.350 --> 00:00:41.932
And that's why I usually recommend if
you can just do a static query and

10
00:00:41.932 --> 00:00:46.826
in this case, I'm intentionally not
doing a static query despite the fact

11
00:00:46.826 --> 00:00:49.730
that we could to show how this works.

12
00:00:49.730 --> 00:00:54.025
So let's export a new
concept called query, and

13
00:00:54.025 --> 00:00:58.100
this tells Gatsby that
this is a page query.

14
00:00:58.100 --> 00:01:03.330
So it's gonna go in and look for all
of these, so that it can pull them out.

15
00:01:03.330 --> 00:01:08.246
And anything that we run as a query
like this export const query is

16
00:01:08.246 --> 00:01:12.870
gonna get injected into our
component as a data, right?

17
00:01:12.870 --> 00:01:17.243
So this is a very cool concept, I love the
idea what we're basically doing is saying,

18
00:01:17.243 --> 00:01:19.110
hey, Gatsby, build time.

19
00:01:19.110 --> 00:01:24.800
Take this query and convert the results
of this query into a prop called data.

20
00:01:24.800 --> 00:01:28.827
That's just a JSON object with
the GraphQL query that ran.

21
00:01:28.827 --> 00:01:30.880
Love it as a concept,
it's very, very cool.

22
00:01:31.930 --> 00:01:35.385
Significantly more complicated
to learn than you static query,

23
00:01:35.385 --> 00:01:39.905
which effectively does the same thing, but
doesn't require you to know that you have

24
00:01:39.905 --> 00:01:43.090
to export a query and
that it's gonna show up as data.

25
00:01:43.090 --> 00:01:45.890
You get to just context data
equals use static query.

26
00:01:47.810 --> 00:01:52.590
Page queries though,
get access to that page context.

27
00:01:52.590 --> 00:01:56.623
Which we're not gonna use in
this particular example, but

28
00:01:56.623 --> 00:02:00.910
we'll use it in the shortly when
we look at at third party data.

29
00:02:02.300 --> 00:02:06.083
So in this query,
I want to load a one image, so

30
00:02:06.083 --> 00:02:10.840
I'm going to head over here,
let's load a single image.

31
00:02:10.840 --> 00:02:17.947
So I'm gonna get file and
I want to load a file,

32
00:02:17.947 --> 00:02:21.969
that is called cocktail.

33
00:02:21.969 --> 00:02:26.889
And in that I want the child image sharp,

34
00:02:26.889 --> 00:02:31.820
and I want the Gatsby image data.

35
00:02:31.820 --> 00:02:35.362
And let's get the placeholder
to be dominant color and

36
00:02:35.362 --> 00:02:39.680
again you can choose any of the normal
ones will do dominant color.

37
00:02:41.370 --> 00:02:46.042
So if I run this, we will get back this
Gatsby image data, we've looked at this,

38
00:02:46.042 --> 00:02:47.810
here's our fallback.

39
00:02:47.810 --> 00:02:52.350
Here's our sources, we've got the WebP
version, the JPEG version, so on.

40
00:02:53.530 --> 00:02:58.758
This is going to be my query,
but I wanna change it will say,

41
00:02:58.758 --> 00:03:03.361
what's called like cocktail party or
something and

42
00:03:03.361 --> 00:03:05.990
in here, I can paste that in.

43
00:03:07.790 --> 00:03:14.429
Now this is going to be the GraphQL
query that gets executed.

44
00:03:14.429 --> 00:03:20.572
And then we'll get date.file.child
image.sharp Gatsby image data, right?

45
00:03:20.572 --> 00:03:26.158
Then I'm gonna get a another
helper from Gatsby,

46
00:03:26.158 --> 00:03:31.090
so this one is gonna be
called Gatsby image.

47
00:03:31.090 --> 00:03:34.700
And then we want another thing called
get image, which is a utility function.

48
00:03:34.700 --> 00:03:37.000
And we're pulling that in
from Gatsby plugin image.

49
00:03:39.670 --> 00:03:44.165
Down here with this data,
we're gonna actually grab this out, so

50
00:03:44.165 --> 00:03:49.760
we'll go right under the layout,
and we're gonna say Gatsby image.

51
00:03:49.760 --> 00:03:57.230
And I want the image to
be get image data.file.

52
00:03:57.230 --> 00:04:02.017
And we can set alt and it'll be like,

53
00:04:02.017 --> 00:04:07.425
a cocktail set inside an elaborate floral

54
00:04:07.425 --> 00:04:13.930
arrangement with dry ice
mist curling around it.

55
00:04:13.930 --> 00:04:19.612
This is a cocktail from a bar called
bar chef in Toronto that is famous for

56
00:04:19.612 --> 00:04:23.687
effectively making diremous
you can drink from and

57
00:04:23.687 --> 00:04:27.335
let's go take a look
at what it looks like.

58
00:04:27.335 --> 00:04:32.135
So let me head over to the about page and
look at that cocktail seating there,

59
00:04:32.135 --> 00:04:34.311
that's the thing that you drink.

60
00:04:34.311 --> 00:04:38.725
And this is all the stuff that's
around it, but these are the like,

61
00:04:38.725 --> 00:04:41.993
we were able to query for
that image and load it in.

62
00:04:41.993 --> 00:04:46.390
And this is useful if for example,
you were trying to show an image gallery.

63
00:04:46.390 --> 00:04:51.274
You could query all file and get the
source instance name of images, and then

64
00:04:51.274 --> 00:04:57.110
grab out these child image sharp and kind
of loop over them and show Gatsby images.

65
00:04:57.110 --> 00:05:02.092
This is a bit of a contrived example
just to show how you would do it, but

66
00:05:02.092 --> 00:05:06.920
the principle kind of holds the same,
we would do this the same way.

67
00:05:08.040 --> 00:05:10.472
If we were getting a group of files, or

68
00:05:10.472 --> 00:05:13.436
if we wanted to load a few
different images, or

69
00:05:13.436 --> 00:05:18.835
what we'll look out in the future is when
we don't know what's gonna be on the page.

70
00:05:18.835 --> 00:05:22.038
Because we're building like
a template that gets reused for

71
00:05:22.038 --> 00:05:24.630
all of the data from a third party system.

72
00:05:24.630 --> 00:05:29.317
That's when these page queries really
start to shine because I can't

73
00:05:29.317 --> 00:05:31.980
put if we look at the index.

74
00:05:31.980 --> 00:05:36.914
I can't put variables in here,
if I tried to put a variable in here,

75
00:05:36.914 --> 00:05:38.310
it will tell me no.

76
00:05:40.160 --> 00:05:43.890
So that's why you use static
queries until you can't.

77
00:05:43.890 --> 00:05:47.139
As soon as you have some kind
of variable data, dynamic data,

78
00:05:47.139 --> 00:05:50.825
you have to introduce page queries
because they're the only ones that

79
00:05:50.825 --> 00:05:53.400
can support variables and
any kind of dynamism.

80
00:05:55.450 --> 00:05:59.008
But this isn't so bad,
we know how to query in GraphQL,

81
00:05:59.008 --> 00:06:03.172
we just get to click around until
we find the thing we want in here,

82
00:06:03.172 --> 00:06:06.110
that's why this Explorer is so great.

83
00:06:06.110 --> 00:06:10.146
The Gatsby image data thing if
you're new to Gatsby three, but

84
00:06:10.146 --> 00:06:13.876
you remember what it was like
to get images in Gatsby two and

85
00:06:13.876 --> 00:06:17.020
previously, Gatsby image
data is incredible.

86
00:06:17.020 --> 00:06:20.098
What a great upgrade to the system,
I think for me,

87
00:06:20.098 --> 00:06:23.260
this is the whole reason
to upgrade to Gatsby three.

88
00:06:23.260 --> 00:06:27.337
There's a lot of good things that happen,
but this is night and day, it's so

89
00:06:27.337 --> 00:06:28.750
nice to us.

90
00:06:28.750 --> 00:06:32.560
So now that we've got
this Gatsby image data,

91
00:06:32.560 --> 00:06:37.737
what if we wanna do that in our MDX files,
what if we wanna pull in

92
00:06:37.737 --> 00:06:43.960
our MDX let's say we wanna put
something into another blog here.

93
00:06:43.960 --> 00:06:49.093
To do that we can actually do
almost exactly the same thing,

94
00:06:49.093 --> 00:06:52.490
so I'm going to grab this import here.

95
00:06:53.720 --> 00:06:58.537
And then we can actually just I

96
00:06:58.537 --> 00:07:03.364
also need to import GraphQL.

97
00:07:03.364 --> 00:07:08.998
Oops, from Gatsby and then down here,

98
00:07:08.998 --> 00:07:14.120
we can export a const called query,

99
00:07:14.120 --> 00:07:18.570
and that's gonna be GraphQL.

100
00:07:20.470 --> 00:07:22.760
Now, I already know what that
query is gonna look like,

101
00:07:22.760 --> 00:07:25.460
it's gonna be identical to this one,
so I'm gonna pull it over.

102
00:07:27.230 --> 00:07:31.470
But instead of this one, we're gonna
call this one, the smashburgerQuery.

103
00:07:32.880 --> 00:07:38.090
And this one is going to query for
the smashburger, right?

104
00:07:38.090 --> 00:07:43.640
So this all effectively the same and
then we just do the same thing.

105
00:07:43.640 --> 00:07:49.700
Let's get a Gatsby image in here we're
gonna set the image to be get image and

106
00:07:49.700 --> 00:07:56.380
I can't remember who asked before, but
about getting things from the file.

107
00:07:56.380 --> 00:08:01.570
When we do this,
we've now added a data prop to our page.

108
00:08:03.020 --> 00:08:08.005
We don't have access to the props
in a traditional way where we're

109
00:08:08.005 --> 00:08:13.280
not seeing a function with the props
added, But MDX just adds props.

110
00:08:13.280 --> 00:08:17.025
So whatever gets passed to this page
will get stored into the props, so

111
00:08:17.025 --> 00:08:18.430
we can do props data file.

112
00:08:19.800 --> 00:08:24.530
And so that is exactly the same
as we did on this about page.

113
00:08:24.530 --> 00:08:27.401
The only difference is instead
of destructuring data,

114
00:08:27.401 --> 00:08:28.690
it's like you did this.

115
00:08:31.450 --> 00:08:36.351
So that's the only measurable difference
is that in this one we can destructure and

116
00:08:36.351 --> 00:08:38.880
in MDX we can, so props data file.

117
00:08:38.880 --> 00:08:43.742
Then as an alt,
we'll say a smashburger on a plate with

118
00:08:43.742 --> 00:08:46.714
french fries in the foreground.

119
00:08:54.014 --> 00:08:59.635
And if we save that, head back to our
homepage and navigate to another blog.

120
00:09:00.885 --> 00:09:02.095
Hey, look at that,

121
00:09:02.095 --> 00:09:06.665
we've got ourselves a smashburger right
on the page queried from GraphQL.

122
00:09:06.665 --> 00:09:11.247
So the work Flow is very
similar between MDX and

123
00:09:11.247 --> 00:09:15.690
using it in a standard react component.

124
00:09:15.690 --> 00:09:18.889
There's a couple things to just
know like that props is set here.

125
00:09:18.889 --> 00:09:25.324
That's if you've never seen that before
that can be a little unintuitive but

126
00:09:25.324 --> 00:09:30.475
it's one of those things that I
little bit of a curve with MDX.

127
00:09:30.475 --> 00:09:35.246
But things start to smooth out pretty
quickly and suddenly you're just

128
00:09:35.246 --> 00:09:40.810
often humming I really love this ability
to, write MDX or write mark down.

129
00:09:40.810 --> 00:09:42.515
And then drop in a react component and

130
00:09:42.515 --> 00:09:45.090
then go right back to writing
mark down and not have to.

131
00:09:45.090 --> 00:09:48.120
It would just not be fun if I had to,
go in and

132
00:09:48.120 --> 00:09:53.440
I hate having to write paragraph tags
every time, right, it's not hard.

133
00:09:53.440 --> 00:09:58.182
It's not much but it just adds up and it's
just enough friction that I talked myself

134
00:09:58.182 --> 00:10:02.960
out of doing the work and it keeps me
from publishing it keeps me from writing.

135
00:10:02.960 --> 00:10:06.300
So I really like this idea of
being able to only pull things in,

136
00:10:06.300 --> 00:10:10.864
when I actually need something special and
otherwise, I'm just writing content,

137
00:10:10.864 --> 00:10:12.880
I really like that as a general flow.

138
00:10:16.260 --> 00:10:21.200
Okay, so that's a huge section,
we've just learned a lot about images.

139
00:10:21.200 --> 00:10:26.047
And kind of digging into this going
through it again we looked at how to pull

140
00:10:26.047 --> 00:10:28.040
in images statically.

141
00:10:28.040 --> 00:10:30.470
When you pull in a static image,

142
00:10:30.470 --> 00:10:35.340
you are able to get it just by
its path you wherever you are.

143
00:10:35.340 --> 00:10:38.311
You do a path to where that
image is in your source code and

144
00:10:38.311 --> 00:10:39.910
Gatsby will do the rest.

145
00:10:39.910 --> 00:10:41.449
It's gonna drop all this stuff in and

146
00:10:41.449 --> 00:10:44.580
then you can figure it with
the placeholders width and height.

147
00:10:44.580 --> 00:10:48.190
There's a full API that you can use,
we only looked at a few of the properties.

148
00:10:48.190 --> 00:10:52.341
Honestly, you probably won't need most of
the properties most of the time there,

149
00:10:52.341 --> 00:10:54.860
this is usually gonna be enough.

150
00:10:54.860 --> 00:10:59.722
If you wanna use that in a MDX post,
you can install that remark plug in and

151
00:10:59.722 --> 00:11:03.250
just drop in Markdown the way
that you always would.

152
00:11:04.720 --> 00:11:10.373
You can query using GraphQL,
that shows up as a data prop any GraphQL

153
00:11:10.373 --> 00:11:16.440
queries export ID as a constant called
query, we'll get added as data.

154
00:11:17.920 --> 00:11:20.390
At which point you can
use this Gatsby image.

155
00:11:20.390 --> 00:11:23.926
And if you wanna do something in your MDX,
it's the same flow,

156
00:11:23.926 --> 00:11:26.180
you export a const called query.

157
00:11:26.180 --> 00:11:30.170
You're gonna get props that have data,
and you can use that Gatsby image again.

