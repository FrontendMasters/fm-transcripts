WEBVTT

1
00:00:00.615 --> 00:00:07.344
&gt;&gt; Brian Holt: Okay, so let's go fix
order so that it can be lazily loaded.

2
00:00:07.344 --> 00:00:11.527
Here at the top, we're gonna say, import,

3
00:00:11.527 --> 00:00:17.263
create lazy file route from
TenStack.create React router.

4
00:00:17.263 --> 00:00:18.095
That's correct.

5
00:00:22.146 --> 00:00:23.581
&gt;&gt; Brian Holt: If you didn't modify,

6
00:00:23.581 --> 00:00:27.383
make sure that these are all dot
dot slash instead of dot slash,

7
00:00:27.383 --> 00:00:32.436
cuz obviously they're up a directory,
not in the same directory anymore, okay?

8
00:00:32.436 --> 00:00:36.695
And then what we're gonna do here,
just underneath this,

9
00:00:36.695 --> 00:00:39.427
we're gonna say export const route.

10
00:00:39.427 --> 00:00:47.437
Cuz remember, TanStack Router is expecting
it to be on this route named export.

11
00:00:47.437 --> 00:00:53.118
And we're going to say
equals createLazyFileRoute.

12
00:00:53.118 --> 00:00:54.858
We're gonna tell it
where we want it to be.

13
00:00:54.858 --> 00:00:59.017
We want it to be at /order, right?

14
00:00:59.017 --> 00:01:05.475
And we're going to invoke that immediately
afterwards with the component.

15
00:01:08.280 --> 00:01:13.408
&gt;&gt; Brian Holt: Lowercase c,
sorry, this one.

16
00:01:13.408 --> 00:01:15.225
And we're gonna pass an order.

17
00:01:17.740 --> 00:01:20.646
&gt;&gt; Brian Holt: So we're passing in
this function as the component there.

18
00:01:24.427 --> 00:01:26.492
&gt;&gt; Brian Holt: And this doesn't
need to be exported anymore, so

19
00:01:26.492 --> 00:01:27.581
you can just delete that.

20
00:01:27.581 --> 00:01:30.123
So it's just function order.

21
00:01:30.123 --> 00:01:32.447
You can, doesn't matter.

22
00:01:32.447 --> 00:01:33.279
Does it matter?

23
00:01:33.279 --> 00:01:35.372
I don't think it matters.

24
00:01:35.372 --> 00:01:35.946
But let's not.

25
00:01:42.698 --> 00:01:45.019
&gt;&gt; Brian Holt: That's really
it to make this a route.

26
00:01:45.019 --> 00:01:49.582
Now it's a full on route,
it'll be rendered in that

27
00:01:49.582 --> 00:01:54.677
outlet whenever people are on
the order URL, that's it.

28
00:01:54.677 --> 00:02:00.076
Our issue at the moment is that
we have no index route, right?

29
00:02:00.076 --> 00:02:02.195
We need an index route.

30
00:02:02.195 --> 00:02:07.122
So let's go ahead and
make another file here called

31
00:02:07.122 --> 00:02:11.256
index.lazy.jsx, Index.lazy.jsx.

32
00:02:13.983 --> 00:02:18.112
&gt;&gt; Brian Holt: Actually, I wanna show you
a really cool trick that this will do.

33
00:02:18.112 --> 00:02:22.256
So, you can just ignore this for
a second, if I say npm run dev.

34
00:02:24.890 --> 00:02:27.030
&gt;&gt; Brian Holt: Okay, it's gonna tell
you all the stuff that it's doing here.

35
00:02:27.030 --> 00:02:30.761
You'll see that this
route.gen.ts got generated.

36
00:02:30.761 --> 00:02:34.435
Never modify this directly, because
it'll just get overwritten later, right?

37
00:02:34.435 --> 00:02:37.710
This is generated code, this is
generated by TanStack for TanStack.

38
00:02:37.710 --> 00:02:39.335
Just ignore it.

39
00:02:39.335 --> 00:02:42.584
But I wanna show you this very
pleasant thing that I discovered that

40
00:02:42.584 --> 00:02:44.101
TenStack Router does for you.

41
00:02:44.101 --> 00:02:48.161
I'm gonna create a new file here,

42
00:02:48.161 --> 00:02:53.912
index.lazy.jsx, and
it stubs it out for you.

43
00:02:53.912 --> 00:02:54.918
I didn't do anything,

44
00:02:54.918 --> 00:02:58.101
it just did that for, but your V server
has to be running for that to happen.

45
00:02:59.420 --> 00:03:01.504
&gt;&gt; Brian Holt: So just a text like,
you're making a new route.

46
00:03:01.504 --> 00:03:02.268
Here you go.

47
00:03:04.832 --> 00:03:06.768
&gt;&gt; Brian Holt: I thought my
computer was haunted for a while.

48
00:03:06.768 --> 00:03:10.309
[LAUGH] All right, so
on our home page here.

49
00:03:14.512 --> 00:03:18.241
&gt;&gt; Brian Holt: It did all that stuff for
us, we're gonna import a link as well.

50
00:03:18.241 --> 00:03:21.777
So links are just a tags, right,
anchor tags that use on the page.

51
00:03:21.777 --> 00:03:26.606
But if you use Link, then it'll handle
all the routing and it'll do a client

52
00:03:26.606 --> 00:03:31.363
side redirect, as opposed to doing
like a full side browser redirect, but

53
00:03:31.363 --> 00:03:35.463
it still manages all the history
correctly, so it's all good.

54
00:03:35.463 --> 00:03:39.494
So in other words, if you're using a
router like this, use the Link component,

55
00:03:39.494 --> 00:03:41.764
don't use a tags, that's what I wanna say.

56
00:03:43.139 --> 00:03:47.542
&gt;&gt; Brian Holt: Okay, and then we're
just gonna do a, we're gonna call

57
00:03:47.542 --> 00:03:52.070
this index function, index,
&gt;&gt; Brian Holt: And

58
00:03:52.070 --> 00:03:54.702
we're just gonna return a bunch of markup.

59
00:03:54.702 --> 00:03:56.289
Feel free to just copy and paste this.

60
00:03:56.289 --> 00:03:58.554
None of this is very interesting,
in terms of like,

61
00:03:58.554 --> 00:04:00.153
there's nothing new to learn here.

62
00:04:04.310 --> 00:04:09.400
&gt;&gt; Brian Holt: Div
className = index-brand.

63
00:04:12.727 --> 00:04:16.569
&gt;&gt; Brian Holt: We're
gonna say h1 padre genos

64
00:04:18.834 --> 00:04:23.974
&gt;&gt; Brian Holt: P, Pizza and art at

65
00:04:23.974 --> 00:04:29.763
a location near you.

66
00:04:29.763 --> 00:04:36.248
Ul, li, and then we're gonna say Link.

67
00:04:36.248 --> 00:04:38.716
This is gonna go to Order.

68
00:04:41.447 --> 00:04:42.405
&gt;&gt; Brian Holt: Order.

69
00:04:48.011 --> 00:04:52.887
&gt;&gt; Brian Holt: And
same thing here, link to past,

70
00:04:52.887 --> 00:04:56.958
and this will be past orders.

71
00:04:56.958 --> 00:05:00.893
We don't have anything here yet,
so that won't work, but,

72
00:05:00.893 --> 00:05:03.170
it just won't go anywhere, yeah.

73
00:05:07.823 --> 00:05:09.816
&gt;&gt; Brian Holt: Cool, that should work.

74
00:05:09.816 --> 00:05:12.800
Last thing, head to header, really quick.

75
00:05:12.800 --> 00:05:14.636
We're just gonna wrap this one here.

76
00:05:14.636 --> 00:05:17.053
Everyone expects if you click the header,
it takes you back to the home page.

77
00:05:17.053 --> 00:05:20.205
Let's just make that work really quick.

78
00:05:20.205 --> 00:05:22.882
So, import link.

79
00:05:25.323 --> 00:05:28.489
&gt;&gt; Brian Holt: And
we're gonna wrap the h1 in it.

80
00:05:28.489 --> 00:05:30.239
That's all.

81
00:05:30.239 --> 00:05:35.373
Link to = /, and
we'll just move that inside of it.

82
00:05:42.507 --> 00:05:43.689
&gt;&gt; Brian Holt: Okay.

83
00:05:45.966 --> 00:05:49.579
&gt;&gt; Brian Holt: So
let's go see what carnage we have wrought.

84
00:05:52.436 --> 00:05:56.310
&gt;&gt; Brian Holt: So
Padre Gino's right on our homepage.

85
00:05:56.310 --> 00:05:58.480
Pizza and art at a location near you,

86
00:05:58.480 --> 00:06:01.566
that sounds like some
marketing genius wrote that.

87
00:06:03.899 --> 00:06:05.410
&gt;&gt; Brian Holt: Actually,
that was the designer that wrote that.

88
00:06:05.410 --> 00:06:06.441
So, sorry, Alex.

89
00:06:06.441 --> 00:06:10.605
[LAUGH] And now if we click on Order,

90
00:06:10.605 --> 00:06:14.919
it should take us to our order page.

91
00:06:17.188 --> 00:06:18.959
&gt;&gt; Brian Holt: So, kind of cool here.

92
00:06:18.959 --> 00:06:21.963
Refresh the page.

93
00:06:21.963 --> 00:06:26.163
I'm gonna look at all here for
just a second, and

94
00:06:26.163 --> 00:06:29.245
I'm gonna trash this for a second.

95
00:06:29.245 --> 00:06:34.030
If I click on Order, notice that it

96
00:06:34.030 --> 00:06:38.982
loaded Order.jsx, Pizza.jsx,

97
00:06:38.982 --> 00:06:43.612
Cart.jsx, after I clicked it.

98
00:06:43.612 --> 00:06:48.916
If we had not done the lazy loading,
it would have just been one

99
00:06:48.916 --> 00:06:54.637
file bundle would have loaded when
you initially loaded the page.

100
00:06:54.637 --> 00:06:59.760
But because we're doing lazy loading,
it's going to say, I'm gonna hold off

101
00:06:59.760 --> 00:07:04.899
loading these until the user request
something that does this, which is cool.

102
00:07:04.899 --> 00:07:11.817
Again, this is 27 kilobytes of code.

103
00:07:11.817 --> 00:07:15.818
It's not worth lazy loading, and
once we actually minify it and

104
00:07:15.818 --> 00:07:20.578
do all that kind of stuff, it's gonna
be kilobytes, like, a few, right?

105
00:07:20.578 --> 00:07:24.306
But imagine if this page had
like Three.js on it, right?

106
00:07:24.306 --> 00:07:26.307
Three.js is is a big whole bundle, right?

107
00:07:26.307 --> 00:07:31.060
Or if you're loading Monaco from VS code,
huge bundle.

108
00:07:31.060 --> 00:07:33.456
That makes a ton of sense
that you would wanna do that.

109
00:07:37.623 --> 00:07:42.517
&gt;&gt; Brian Holt: So, cool,
notice we got a little friend down here on

110
00:07:42.517 --> 00:07:45.974
the bottom left, TenStack Router.

111
00:07:45.974 --> 00:07:53.577
Click to get nice little
view into what we have.

112
00:07:56.315 --> 00:07:58.778
&gt;&gt; Brian Holt: So honestly,
I didn't really use this one too much,

113
00:07:58.778 --> 00:08:01.366
cuz we're not gonna use the router too,
too much here.

114
00:08:01.366 --> 00:08:04.011
But imagine if you have a giant app
with a bunch of routing rules and

115
00:08:04.011 --> 00:08:04.741
stuff like that.

116
00:08:04.741 --> 00:08:09.465
This can be helpful to kind of dig
through, why is this getting routed

117
00:08:09.465 --> 00:08:14.767
the way that it is, what data is being
passed around, all that kind of stuff.

118
00:08:14.767 --> 00:08:18.871
So I loaded in there just so
you can take a look, know that it exists,

119
00:08:18.871 --> 00:08:20.755
know how easy it is to install.

120
00:08:20.755 --> 00:08:23.877
This will only show on your local
host development environment,

121
00:08:23.877 --> 00:08:27.393
as long as your node is equal to
production, like I told you about before,

122
00:08:27.393 --> 00:08:30.880
none of this stuff gets shipped, so
you don't have to worry about that.

123
00:08:30.880 --> 00:08:32.981
This will only exist in dev.

