WEBVTT

1
00:00:00.053 --> 00:00:02.434
So, that means that on all platforms,

2
00:00:02.434 --> 00:00:06.561
the code that I will show you will
actually show you all the options.

3
00:00:06.561 --> 00:00:11.149
Like when the user is going from
running to post, to post, to running or

4
00:00:11.149 --> 00:00:16.206
running active to running inactive,
it doesn't matter, its the same code.

5
00:00:16.206 --> 00:00:21.074
We shall listen for visibility change
on the window object I'm going to

6
00:00:21.074 --> 00:00:23.749
show you that in actually a minute, and

7
00:00:23.749 --> 00:00:27.334
then we check the visibility
state on the document.

8
00:00:27.334 --> 00:00:31.356
If it's hidden, it's because we
are going into the background.

9
00:00:31.356 --> 00:00:33.644
Which of the options for the background?

10
00:00:33.644 --> 00:00:35.527
We don't know.

11
00:00:35.527 --> 00:00:39.097
It's the background tab,
is the background window,

12
00:00:39.097 --> 00:00:41.898
it's the user closing the whole browser.

13
00:00:41.898 --> 00:00:44.726
We actually don't know, okay.

14
00:00:44.726 --> 00:00:51.884
And as I mentioned before, on some devices
that's the moment to save the state, okay.

15
00:00:51.884 --> 00:00:55.929
If you're using something like Redux or
a state manager,

16
00:00:55.929 --> 00:01:00.397
maybe that's a moment to actually
save that safely somewhere.

17
00:01:00.397 --> 00:01:02.683
Locally, that's better.

18
00:01:02.683 --> 00:01:05.713
Because if you want to
send that to the server,

19
00:01:05.713 --> 00:01:10.622
you don't know on mobile if you have
enough time to send that to the server.

20
00:01:10.622 --> 00:01:14.064
So if you're trying to send
that to the server and iOS, and

21
00:01:14.064 --> 00:01:18.642
it's taking more than two seconds,
your request will probably be aborted.

22
00:01:18.642 --> 00:01:22.585
So you will never get that server side.

23
00:01:22.585 --> 00:01:26.123
&gt;&gt; What are the other values for
visibility state?

24
00:01:26.123 --> 00:01:26.991
&gt;&gt; Visible, okay.

25
00:01:26.991 --> 00:01:31.407
And then you can also mix that
with with other properties for

26
00:01:31.407 --> 00:01:35.221
example you can know if it's visible and
focused.

27
00:01:35.221 --> 00:01:39.737
Because mostly on desktop,
but now on iPad and Android,

28
00:01:39.737 --> 00:01:43.133
you can also have two
apps at the same time.

29
00:01:43.133 --> 00:01:46.430
So both are visible, but
only one is the one in focus.

30
00:01:46.430 --> 00:01:49.137
So you can also detect
that if you want to.

31
00:01:49.137 --> 00:01:51.416
But for background execution, yeah,

32
00:01:51.416 --> 00:01:55.152
maybe we don't get too much if
it's the focus one or not, okay?

33
00:01:55.152 --> 00:01:57.953
If it's visible,
the user is actually seeing the app.

34
00:01:57.953 --> 00:02:03.329
So it's probably expecting the web app to
react as if it's the one that is there.

35
00:02:03.329 --> 00:02:04.970
It should be live.

