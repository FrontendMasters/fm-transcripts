WEBVTT

1
00:00:00.150 --> 00:00:02.247
Anyway it's giving me a yellow,
what's going on?

2
00:00:02.247 --> 00:00:04.969
Well it's asking me that because
there is nothing in green in the XML.

3
00:00:04.969 --> 00:00:11.180
I could actually, with Alt+Enter,
collapse the empty tab, it was just that.

4
00:00:11.180 --> 00:00:15.711
You don't have anything
inside just do this, okay?

5
00:00:15.711 --> 00:00:16.345
Make sense?

6
00:00:20.238 --> 00:00:23.469
So if I build this and execute this,

7
00:00:23.469 --> 00:00:29.201
I'm not sure if you realize that
there is a very small 4 there.

8
00:00:29.201 --> 00:00:33.486
So those are the four categories
that were downloaded and

9
00:00:33.486 --> 00:00:36.709
parsed automagically into my structure.

10
00:00:36.709 --> 00:00:41.524
So now what I need to do is
to loop through the structure

11
00:00:41.524 --> 00:00:45.590
instead of putting dummy data, make sense?

12
00:00:45.590 --> 00:00:48.962
So we are getting there.

13
00:00:48.962 --> 00:00:54.749
So I need to open the order,
I'm sorry, the menu page.

14
00:00:57.119 --> 00:00:58.619
Let me minimize emulator,

15
00:00:58.619 --> 00:01:03.449
typically having multiple monitors, it's
pretty good for for Android development,

16
00:01:03.449 --> 00:01:07.772
as you can see you have emulators and
panels all over the place on the previous.

17
00:01:07.772 --> 00:01:10.548
So, then I don't need this
item that I have here.

18
00:01:10.548 --> 00:01:16.513
What I need, there is an items
version that receives at list, okay?

19
00:01:16.513 --> 00:01:21.949
So instead of receiving
a fixed number like

20
00:01:21.949 --> 00:01:26.932
five that we have here, we can actually

21
00:01:26.932 --> 00:01:31.915
go around this with just a list, okay?

22
00:01:31.915 --> 00:01:33.902
So, before actually doing that,

23
00:01:37.883 --> 00:01:41.541
When we go here down, we are using
an image, a dummy image, okay?

24
00:01:41.541 --> 00:01:47.311
So later we will need to also change that,
the dummy image, with something different.

25
00:01:47.311 --> 00:01:49.503
Just have that in mind, okay?

26
00:01:49.503 --> 00:01:51.223
So we need to change that as well.

27
00:01:51.223 --> 00:01:54.857
Okay, so we need to loop
through the structure, okay?

28
00:01:54.857 --> 00:02:01.822
The structure has the data manager,
has the menu, okay?

29
00:02:01.822 --> 00:02:08.700
Like so, do I need to,
Do something else here?

30
00:02:08.700 --> 00:02:12.914
Well, actually, what we need to do,

31
00:02:12.914 --> 00:02:18.863
even if this is really weird,
we need to import this.

32
00:02:18.863 --> 00:02:21.428
So we dataManager.menu.

33
00:02:21.428 --> 00:02:25.635
Let's move on and then it will work.

34
00:02:25.635 --> 00:02:27.614
It's complaining but I think it's fine.

35
00:02:27.614 --> 00:02:35.445
So, this is looping through,
The category names, okay?

36
00:02:35.445 --> 00:02:38.686
So we are going to loop
through the category names.

37
00:02:38.686 --> 00:02:41.735
So here we can say it.name,

38
00:02:41.735 --> 00:02:46.316
that is the category, okay, make sense?

39
00:02:46.316 --> 00:02:48.998
So, it is a category.

40
00:02:48.998 --> 00:02:51.309
So I can say it.name.

41
00:02:51.309 --> 00:02:52.660
This is the name of the category.

42
00:02:52.660 --> 00:02:56.600
And then we have products, makes sense?

43
00:02:56.600 --> 00:03:01.242
And what we need to do with the products,
is actually loop through with a for each.

44
00:03:01.242 --> 00:03:07.704
So for each product, what we need to do,
If we have a product now.

45
00:03:07.704 --> 00:03:12.782
Maybe if you don't like it, we can now
call it product, or it's up to you.

46
00:03:12.782 --> 00:03:17.936
Because now we have two its, the one
on the outside is the category, okay?

47
00:03:17.936 --> 00:03:20.121
And the other one it's the product.

48
00:03:20.121 --> 00:03:22.036
So I mean it's fine, it's up to you.

49
00:03:22.036 --> 00:03:26.317
So now I can take the card that
I have here and paste it here.

50
00:03:26.317 --> 00:03:28.860
And now the product is
not a dummy product.

51
00:03:31.091 --> 00:03:32.164
What should I put inside this?

52
00:03:34.481 --> 00:03:40.546
It, so I'm going to render it,
okay, make sense?

53
00:03:40.546 --> 00:03:41.668
And what about onAdd?

54
00:03:41.668 --> 00:03:43.081
What should I do here in onAdd?

55
00:03:45.968 --> 00:03:46.824
&gt;&gt; Data Manager.

56
00:03:46.824 --> 00:03:50.377
&gt;&gt; datamanager.cartAdd,
we already did that.

57
00:03:50.377 --> 00:03:51.951
And they're going to add?

58
00:03:51.951 --> 00:03:52.871
&gt;&gt; Product, it.

59
00:03:52.871 --> 00:03:56.800
&gt;&gt; It, they're going to add it, okay?

60
00:03:56.800 --> 00:03:59.087
Let's see, look at that.

61
00:03:59.087 --> 00:04:04.090
First, we have hot coffee, yeah,
we need some padding, some sort of thing.

62
00:04:04.090 --> 00:04:10.237
But we are seeing, Black Americano,
Flat White, now Iced Coffee, Frappuccino.

63
00:04:10.237 --> 00:04:13.241
So this is actually the data
coming from the web server.

64
00:04:13.241 --> 00:04:17.832
The only missing piece regarding
some paddings that I may have is

65
00:04:17.832 --> 00:04:19.029
the lacy image.

66
00:04:19.029 --> 00:04:22.343
I wanna change that black
coffee with the real image.

67
00:04:22.343 --> 00:04:23.157
So let's do that.

68
00:04:23.157 --> 00:04:28.902
This is actually, well first, let me
remove this item count five that I have.

69
00:04:28.902 --> 00:04:31.907
And now I need to change my product item.

70
00:04:31.907 --> 00:04:36.205
So instead of an image,
we are going to use an AsyncImage,

71
00:04:36.205 --> 00:04:41.937
that is coming from one of the external
dependencies that we use, remember.

72
00:04:41.937 --> 00:04:47.507
And instead of painter by need
to import it, it receives model.

73
00:04:47.507 --> 00:04:48.956
And what is model?

74
00:04:48.956 --> 00:04:52.646
The URL of the image.

75
00:04:52.646 --> 00:04:54.076
Where is the URL of the image?

76
00:04:54.076 --> 00:04:55.057
Does anyone remember?

77
00:04:55.057 --> 00:04:56.781
&gt;&gt; [INAUDIBLE] the web.

78
00:04:56.781 --> 00:04:59.291
&gt;&gt; Product.imageUrl.

79
00:04:59.291 --> 00:05:03.953
Remember, we did like a property
an immutable variable

80
00:05:03.953 --> 00:05:06.636
that is calculated every time.

81
00:05:06.636 --> 00:05:09.145
Just that, let's see.

82
00:05:11.708 --> 00:05:13.604
Look at that, it seems like it's working.

83
00:05:13.604 --> 00:05:18.476
It's downloading all the images on
the fly really quickly because we

84
00:05:18.476 --> 00:05:20.576
have a good connection here.

85
00:05:20.576 --> 00:05:24.320
But yeah, well,
you may wanna also have a placeholder or

86
00:05:24.320 --> 00:05:27.525
a background while the image is loading,
okay?

87
00:05:27.525 --> 00:05:28.383
You can play with that.

88
00:05:28.383 --> 00:05:30.453
But this is actually
working at this point.

89
00:05:30.453 --> 00:05:34.466
It's actually reading
all that information.

90
00:05:34.466 --> 00:05:36.706
Okay, let me add some paddings.

91
00:05:36.706 --> 00:05:42.106
So, we can actually, here in the
LazyColumn, well the text that we have,

92
00:05:42.106 --> 00:05:47.365
we can add some properties like, for
example, we can change the color.

93
00:05:47.365 --> 00:05:49.331
We can use the primary color.

94
00:05:49.331 --> 00:05:53.750
And maybe some padding to the,
this is the name of the category, okay?

95
00:05:53.750 --> 00:05:58.297
We can add a padding, so modifier.padding.

96
00:05:58.297 --> 00:06:02.194
And we can say,
remember the first one is left,

97
00:06:02.194 --> 00:06:07.944
it's gonna start because if you
are in right-to-left like Arabic or

98
00:06:07.944 --> 00:06:11.371
Hebrew, it will be the other way around.

99
00:06:11.371 --> 00:06:15.683
So we can say 10, 20, no 10, 10 no,

100
00:06:15.683 --> 00:06:21.021
that's too much 10,
20dp, then 10dp and 10dp

101
00:06:23.322 --> 00:06:31.570
So for values like so,
Think we are fine with this.

102
00:06:33.755 --> 00:06:36.657
So just to separate things a little bit,
like that.

103
00:06:38.529 --> 00:06:39.657
So we can see the elevation.

104
00:06:39.657 --> 00:06:42.809
And that's all for the menu page.

105
00:06:42.809 --> 00:06:44.812
Now we need to work with the cart.

106
00:06:44.812 --> 00:06:47.769
But the cart is actually not so
complicated.

107
00:06:47.769 --> 00:06:52.211
Actually, the logic of the cart,
the business logic was already done.

108
00:06:52.211 --> 00:06:56.083
If our code works, we shouldn't
need to render similar to product,

109
00:06:56.083 --> 00:06:57.965
we need to render the other list.

110
00:06:57.965 --> 00:07:01.515
So it's actually pretty similar,
okay, to these examples.

111
00:07:01.515 --> 00:07:04.353
So we go to the OrderPage,
and right now it's empty.

112
00:07:04.353 --> 00:07:10.242
And what we need to do is
also add a LazyColumn.

113
00:07:10.242 --> 00:07:18.143
And the LazyColumn will contain items,
as we did before.

114
00:07:19.942 --> 00:07:22.093
Because it's actually similar
to what we did before.

115
00:07:22.093 --> 00:07:26.909
If you go to the companion website,
lesson seven,

116
00:07:26.909 --> 00:07:30.948
lesson six, sorry, finishing the menu,

117
00:07:33.014 --> 00:07:38.801
Here you have the code in case
you wanna copy and paste.

118
00:07:38.801 --> 00:07:40.684
We need to do something very similar.

119
00:07:40.684 --> 00:07:43.994
So we need to create items, okay?

120
00:07:43.994 --> 00:07:47.652
So we are going to create an item here,
with,

121
00:07:51.900 --> 00:07:56.799
Our dataManager.cart, okay?

122
00:07:56.799 --> 00:07:57.358
Makes sense?

123
00:07:57.358 --> 00:07:58.276
So we need to do this.

124
00:07:58.276 --> 00:08:00.874
Before doing that, well,
I need to also import.

125
00:08:02.163 --> 00:08:03.692
What happens if the cart is empty?

126
00:08:03.692 --> 00:08:11.619
Well if the cart is empty, Its count is 0.

127
00:08:11.619 --> 00:08:16.096
Also we can call the recent
empty function, it's empty.

128
00:08:16.096 --> 00:08:21.521
If it's zero, we can put a text or
a card with a text inside.

129
00:08:21.521 --> 00:08:23.190
What's the difference?

130
00:08:23.190 --> 00:08:26.578
The card will be like a container,
okay, for the text.

131
00:08:30.513 --> 00:08:33.284
The text will say, your cart is empty.

132
00:08:33.284 --> 00:08:34.988
Or your order is empty.

133
00:08:34.988 --> 00:08:35.954
Something like that.

134
00:08:39.223 --> 00:08:43.900
Okay, like so, Cart is complaining.

135
00:08:43.900 --> 00:08:50.659
So if we don't have items in the cart,
we will not render a text.

136
00:08:50.659 --> 00:08:55.078
But because a text alone can be
really simple we can put a cart.

137
00:08:55.078 --> 00:09:00.930
Because we are in a LazyColumn, LazyColumn
also accept item or items as children.

138
00:09:00.930 --> 00:09:04.305
So I can create an item, and
within the item, a cart,

139
00:09:04.305 --> 00:09:09.256
and within the cart, a text that says your
cart is empty or your order is empty.

140
00:09:09.256 --> 00:09:14.395
But remember the cart can contain
elevation and some modifiers as

141
00:09:14.395 --> 00:09:19.359
we are used to at this point,
like padding, let's extend dp.

142
00:09:19.359 --> 00:09:25.260
And then, we add also for example,
elevation is not a modifier,

143
00:09:25.260 --> 00:09:29.033
it's actually a property of elevation.

144
00:09:29.033 --> 00:09:35.199
So, let's say 4.dp, like so, okay?

145
00:09:35.199 --> 00:09:39.990
So, then we need to render items, okay?

146
00:09:39.990 --> 00:09:44.770
From the companion website,
I have already here,

147
00:09:44.770 --> 00:09:47.668
a cart item already designed.

148
00:09:47.668 --> 00:09:51.857
That is just more of everything
that we have already done.

149
00:09:51.857 --> 00:09:56.136
It's a row with different text,
one for the quantity,

150
00:09:56.136 --> 00:10:00.153
one for the product name,
one for the price, okay?

151
00:10:00.153 --> 00:10:05.867
And one for one image that is
actually a delete button, okay?

152
00:10:05.867 --> 00:10:10.420
That's kind of what I have here, okay?

153
00:10:10.420 --> 00:10:14.276
So what do I need to do
here is render cart items.

154
00:10:14.276 --> 00:10:18.236
So we are going to ask item in cart is it,
and

155
00:10:18.236 --> 00:10:21.983
then on delete, I need to do something.

156
00:10:24.229 --> 00:10:24.974
What is on delete?

157
00:10:24.974 --> 00:10:27.752
An argument that we have here.

158
00:10:27.752 --> 00:10:30.557
This is similar to the add
button that we saw before.

159
00:10:30.557 --> 00:10:36.780
So when you click on the image, actually,
how to do that with a clickable modifier?

160
00:10:36.780 --> 00:10:37.923
We already done this.

161
00:10:37.923 --> 00:10:42.831
So it's a clickable modifier over
the image that will call on delete.

162
00:10:42.831 --> 00:10:44.145
What's on delete?

163
00:10:44.145 --> 00:10:49.746
An argument that we receive
of type lambda expression.

164
00:10:51.677 --> 00:10:53.161
Okay, makes sense?

165
00:10:53.161 --> 00:10:55.156
So what do we need to do on delete?

166
00:10:55.156 --> 00:11:01.061
We need to talk to our data manager and
call cart remove with it.

167
00:11:01.061 --> 00:11:03.956
We're going to remove it, okay?

168
00:11:03.956 --> 00:11:08.022
It makes sense, right, in this context.

169
00:11:08.022 --> 00:11:12.264
So let's see what happens at this point.

170
00:11:12.264 --> 00:11:17.961
So now it's working with previews and
data managers, it's a bit tricky.

171
00:11:17.961 --> 00:11:20.737
It's probably better to
run it directly here.

172
00:11:20.737 --> 00:11:24.749
So actually, if I go to my order,
it says your order is empty.

173
00:11:24.749 --> 00:11:28.126
Maybe we need to increase a little
bit the font size of that.

174
00:11:28.126 --> 00:11:29.366
It's really small.

175
00:11:29.366 --> 00:11:30.679
How'd you do that?

176
00:11:30.679 --> 00:11:35.014
It's text, so
we change the texts style if we want,

177
00:11:35.014 --> 00:11:39.952
or the font size directly, or
the style wherever you want.

178
00:11:39.952 --> 00:11:41.883
Or just the style.

179
00:11:41.883 --> 00:11:48.591
Remember we have different text styles
that we asked you material theme,

180
00:11:48.591 --> 00:11:54.882
material theme.typography.body-subtitle,
subtitle-one.

181
00:11:54.882 --> 00:11:57.088
Remember these are pre-built styles.

182
00:11:58.974 --> 00:12:03.227
So if I go to my order,
it's kind of the same thing.

183
00:12:03.227 --> 00:12:10.216
But anyway let's use h4, Now it's better.

184
00:12:10.216 --> 00:12:12.848
Also we can add some paddings and
more things.

185
00:12:12.848 --> 00:12:17.264
Now if I go to the menu, and
I add a Black Americano, and

186
00:12:17.264 --> 00:12:20.152
I go back to order, magic happens.

187
00:12:20.152 --> 00:12:22.441
I see the Black Americano.

188
00:12:22.441 --> 00:12:27.022
If I go to the menu and
add another Black Americano, and

189
00:12:27.022 --> 00:12:33.109
also I'm more of a flat white guy,
there is a Flat White here somewhere.

190
00:12:33.109 --> 00:12:36.903
Here, and I'll also, what else, cold brew?

191
00:12:36.903 --> 00:12:39.980
I go to my order, and I see my cart.

192
00:12:39.980 --> 00:12:42.129
And I have delete buttons.

193
00:12:42.129 --> 00:12:44.503
Will they work if I click here?

194
00:12:44.503 --> 00:12:47.270
Hm, it works.

195
00:12:47.270 --> 00:12:50.832
Remember, these buttons
are talking to the data manager.

196
00:12:50.832 --> 00:12:56.117
The data manager is creating
a new list in our mutable state.

197
00:12:56.117 --> 00:13:01.068
So the mutable state recognized that
something has changed in that state.

198
00:13:01.068 --> 00:13:04.322
And it's recompoing our structure.

199
00:13:04.322 --> 00:13:08.247
It goes to our app, and executes again,

200
00:13:08.247 --> 00:13:12.990
the functions that are actually needed,
okay?

201
00:13:12.990 --> 00:13:14.675
So, it actually works.

202
00:13:14.675 --> 00:13:17.801
I can delete this, I can delete this,
and my order is empty.

203
00:13:17.801 --> 00:13:22.340
Yeah, then we can have a button
that says Submit Order and

204
00:13:22.340 --> 00:13:25.567
we are kind of done on the order section.

