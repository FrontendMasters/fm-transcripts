WEBVTT

1
00:00:00.171 --> 00:00:03.616
All right, so now we're gonna start
getting into putting all this

2
00:00:03.616 --> 00:00:06.335
stuff together and
starting with authentication.

3
00:00:06.335 --> 00:00:10.474
So before we can actually like
make the authentication form and

4
00:00:10.474 --> 00:00:14.629
put it on the page and do all that stuff,
we need the API routes.

5
00:00:14.629 --> 00:00:17.965
We need the functions
that call the API routes.

6
00:00:17.965 --> 00:00:21.350
So when we submit the form,
we can actually log in.

7
00:00:21.350 --> 00:00:24.740
So we're gonna move away from
components and get into some logic, and

8
00:00:24.740 --> 00:00:26.989
we're gonna start working
on some API stuff.

9
00:00:26.989 --> 00:00:30.871
So Because it's a form,

10
00:00:30.871 --> 00:00:35.305
it's probably gonna be what a server
component or a client component.

11
00:00:35.305 --> 00:00:36.223
&gt;&gt; It's gonna be a client?

12
00:00:36.223 --> 00:00:37.324
&gt;&gt; It's gonna be a client, exactly.

13
00:00:37.324 --> 00:00:40.091
So how do you fetch data on the client?

14
00:00:40.091 --> 00:00:41.713
How do you mutate data on the client?

15
00:00:41.713 --> 00:00:42.873
&gt;&gt; Fetch.

16
00:00:42.873 --> 00:00:43.633
&gt;&gt; Fetch, yeah.

17
00:00:43.633 --> 00:00:44.803
Nothing changes there.

18
00:00:44.803 --> 00:00:47.585
It's pretty much the same thing for now.

19
00:00:47.585 --> 00:00:49.881
So that's what we're gonna do.

20
00:00:49.881 --> 00:00:55.745
So inside of our lib/api, go to lib,
make a file called api and

21
00:00:55.745 --> 00:01:02.175
I'm going to make a function just
like my notes here called fetcher.

22
00:01:02.175 --> 00:01:07.005
If you've ever used something like SWR or
React query,

23
00:01:07.005 --> 00:01:11.012
you know this is not new
to you just abstracting

24
00:01:11.012 --> 00:01:14.838
away the fetch function so
you can reuse it.

25
00:01:14.838 --> 00:01:18.698
Many times because it's kind of redundant
to have to do all this stuff all

26
00:01:18.698 --> 00:01:19.531
the damn time.

27
00:01:19.531 --> 00:01:21.912
So we're gonna make our own
fetcher that way we can reuse it.

28
00:01:21.912 --> 00:01:25.418
So, there's no wrong or
right right way to do this,

29
00:01:25.418 --> 00:01:28.696
this is just how I felt
like writing it this time.

30
00:01:28.696 --> 00:01:30.695
I change it all the time.

31
00:01:30.695 --> 00:01:31.798
So let's do that.

32
00:01:31.798 --> 00:01:36.410
So I'm gonna say fetcher and

33
00:01:36.410 --> 00:01:39.991
make it take an object here.

34
00:01:39.991 --> 00:01:43.379
[INAUDIBLE] async.

35
00:01:43.379 --> 00:01:47.152
And it's going to take in a URL a method.

36
00:01:47.152 --> 00:01:49.301
What else do I have here?

37
00:01:49.301 --> 00:01:51.151
Body and whether is JSON or not.

38
00:01:51.151 --> 00:01:55.986
So it takes a body and if it's JSON or
not, what defaults is true?

39
00:02:00.030 --> 00:02:02.801
And all this is gonna do is wait,

40
00:02:05.017 --> 00:02:09.730
Fetch with the URL here with the method

41
00:02:09.730 --> 00:02:13.858
that you passed like so it was like

