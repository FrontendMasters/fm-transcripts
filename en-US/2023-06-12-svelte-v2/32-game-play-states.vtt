WEBVTT

1
00:00:00.109 --> 00:00:02.598
Okay, so
things are mostly looking good but

2
00:00:02.598 --> 00:00:06.506
we would like to add some of the polish
that we saw in the original app.

3
00:00:06.506 --> 00:00:13.139
So if you remember, in the one that
we've got deployed, when we find a pair,

4
00:00:13.139 --> 00:00:19.078
then it kind of transitions nicely
from the grid into that boundary.

5
00:00:19.078 --> 00:00:21.514
And we can do this with
svelte transitions.

6
00:00:21.514 --> 00:00:23.388
So let's, build that now.

7
00:00:26.536 --> 00:00:30.137
The first thing we're gonna need
to do is create a pair of send and

8
00:00:30.137 --> 00:00:34.420
receive transitions, just like we saw
in the example with the to-do list.

9
00:00:34.420 --> 00:00:40.451
So we'll create a new module,
call it transitions.ts.

10
00:00:40.451 --> 00:00:45.478
And inside there,
we're gonna import the crossfade function.

11
00:00:50.090 --> 00:00:55.396
From svelte transition,

12
00:00:55.396 --> 00:00:59.497
along with cubicOut

13
00:00:59.497 --> 00:01:04.324
from svelte/easing.

14
00:01:04.324 --> 00:01:13.335
And we're gonna create a pair of send and
receive transitions By calling crossfade.

15
00:01:20.771 --> 00:01:27.618
Give it a duration of 400 see how that
looks, and then an easing of cubicOut.

16
00:01:31.193 --> 00:01:35.580
Okay, and
now when something leaves the grid,

17
00:01:35.580 --> 00:01:39.206
we want it to appear in the found array.

18
00:01:39.206 --> 00:01:43.983
First we need to add the send

19
00:01:43.983 --> 00:01:49.188
transition from the square.

20
00:01:49.188 --> 00:01:54.036
And you'll recall that we do

21
00:01:54.036 --> 00:01:58.884
that by adding R colon send,

22
00:01:58.884 --> 00:02:03.331
and then providing a key.

23
00:02:03.331 --> 00:02:08.564
For now we'll just use
the emoji itself as a key.

24
00:02:08.564 --> 00:02:18.452
We need to import the send function,
From transitions.

25
00:02:22.003 --> 00:02:23.017
We've got to export it.

26
00:02:27.305 --> 00:02:29.033
So we'll do that now.

27
00:02:29.033 --> 00:02:35.782
And then we need to have the corresponding
receive transition in the found array.

28
00:02:35.782 --> 00:02:36.897
So open that up.

29
00:02:39.542 --> 00:02:40.443
Same deal.

30
00:02:44.595 --> 00:02:49.964
When it comes in we'll do
a receive just autocomplete

31
00:02:49.964 --> 00:02:56.421
that import it from transitions and
we'll give it the same key.

32
00:03:02.338 --> 00:03:06.662
Let's see what happens now that
we've added those transitions.

33
00:03:06.662 --> 00:03:11.297
First we need to find a matching pair,
I think that was the monkey, no,

34
00:03:11.297 --> 00:03:13.167
that was the monkey, okay.

35
00:03:15.486 --> 00:03:17.632
All right, almost works.

36
00:03:17.632 --> 00:03:22.688
Only one of the monkeys went
down into that foundry.

37
00:03:22.688 --> 00:03:26.023
One thing I just noticed is that
this needs a height of a 100% so

38
00:03:26.023 --> 00:03:27.670
that it's properly centered.

39
00:03:27.670 --> 00:03:29.410
That's nicer.

40
00:03:29.410 --> 00:03:32.761
And the reason for that is that
when we create a pair of send and

41
00:03:32.761 --> 00:03:36.390
receive transitions,
it operates on this map of counterparts.

42
00:03:36.390 --> 00:03:38.468
And if you have two
elements with the same key,

43
00:03:38.468 --> 00:03:41.362
it's a little bit like having a key
each block with the same key.

44
00:03:41.362 --> 00:03:42.062
It just gets confused.

45
00:03:42.062 --> 00:03:45.294
It doesn't know which elements
it's supposed to be transitioning.

46
00:03:45.294 --> 00:03:50.607
So we need to be able to distinguish them
a little bit better and we need to have

47
00:03:50.607 --> 00:03:55.852
two elements in the found array for
the emojis in the grid to correspond to.

48
00:03:55.852 --> 00:04:02.894
So we're gonna add a new element here,
let's call it div class = pair.

49
00:04:05.707 --> 00:04:12.305
And inside that we're gonna
have two copies of this image.

50
00:04:12.305 --> 00:04:16.277
And those need to have two unique keys.

51
00:04:16.277 --> 00:04:21.373
So let's call them

52
00:04:21.373 --> 00:04:26.791
emoji A and emoji B.

53
00:04:26.791 --> 00:04:32.913
We'll add some styles to that paramount.

54
00:04:32.913 --> 00:04:39.638
And then the images we're
gonna have position absolute.

55
00:04:44.469 --> 00:04:49.922
Left top 0 and the width and
height are gonna be 100%.

56
00:04:49.922 --> 00:04:54.071
Okay, so you've got two monkeys
stacked on top of each other now.

57
00:04:54.071 --> 00:04:56.501
And they're gonna have
separate transitions.

58
00:04:56.501 --> 00:05:01.958
But we need to have some way of
representing this inside the grid in,

59
00:05:01.958 --> 00:05:03.968
other words here, and so

60
00:05:03.968 --> 00:05:09.648
we're gonna need to be able to pass
that information in from the grid.

61
00:05:09.648 --> 00:05:14.199
We'll add a new prop to
the square that's felt component,

62
00:05:14.199 --> 00:05:21.286
we'll call it group And
group could be either A or B.

63
00:05:27.209 --> 00:05:31.918
And then we'll use that in the key
that we pass to the send transition.

64
00:05:38.571 --> 00:05:41.975
Right now, of course,
if we open the Grid.svelte,

65
00:05:41.975 --> 00:05:45.771
it's gonna complain that we're
not passing in the group.

66
00:05:51.363 --> 00:05:53.401
And there's a few different
ways that we could solve this.

67
00:05:53.401 --> 00:05:58.169
The way that I'm gonna do it is
if the current iteration in this

68
00:05:58.169 --> 00:06:03.029
loop is the first instance of this
emoji is gonna be the A group,

69
00:06:03.029 --> 00:06:06.162
otherwise it's going to be the B group.

70
00:06:06.162 --> 00:06:10.990
And the way that we can do this is if

71
00:06:10.990 --> 00:06:17.374
grid.index of emoji is the current index,

72
00:06:17.374 --> 00:06:24.103
then it's group A, otherwise it's group B,

73
00:06:24.103 --> 00:06:29.796
and then maybe if we find another pair,

74
00:06:29.796 --> 00:06:38.443
all right, it's starting to
look like it's supposed to.

75
00:06:38.443 --> 00:06:42.424
We can add a little bit more
styling to our found array.

76
00:06:42.424 --> 00:06:49.869
Let's give it a little
bit of a drop shadow.

77
00:06:59.416 --> 00:07:03.958
And each of these will
turn into a white disk.

78
00:07:26.948 --> 00:07:28.519
I'm just gonna get rid of the position.

79
00:07:28.519 --> 00:07:32.563
We'll get rid of the left and
the top here and

80
00:07:32.563 --> 00:07:37.385
we'll give these some
slightly different widths.

81
00:07:44.452 --> 00:07:46.511
And we'll make this
a display flex container.

82
00:07:59.151 --> 00:08:03.311
And it's starting to look a little
bit more like the original.

