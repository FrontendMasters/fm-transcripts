[00:00:00]
>> Let's start adding some logic for this game, we'll do it in the game.svelte component. First, we're gonna import the levels from the module that we just created. And we're gonna have a few different values here. We're gonna have a size value, we're gonna have a grid of emojis, initialize that to an empty array.

[00:00:36]
And we're gonna keep track of the pairs that we've found as we're playing the game. So the first task is to create a grid from the set of emojis that we got in levels.ts. So let's create a function, call it create_grid, and that's gonna take a level as its input.

[00:01:02]
Now, right now, we don't know what kind of object that is, because we haven't declared it, and this is where a TypeScript becomes really useful. At the top here, I'm gonna add a lang=ts attribute, and that now allows us to start using TypeScript inside this component. Our grid is gonna be an array of strings.

[00:01:21]
Found is also gonna be an array of strings. Size is gonna be a number. And the thing that gets passed into create_grid is gonna be a level. We need to import that as well from our levels module. We need to have that in a separate type declaration, import type {Level} from levels.

[00:01:53]
So ultimately, what we want to have is a user interface that allows us to select a different level and create all of these values on that basis. But for now, we're just gonna hard code easy mode into our app. So const level = level{0}, cuz that's the only one that we've got.

[00:02:11]
Size is gonna be level.size, and grid is gonna be created from the level. And you can see that it's throwing an error, because we're not currently returning an array of strings from create_grid. The first thing we wanna do is create a clone of the emojis array so that we can start plucking images out of it at random.

[00:02:37]
We don't want to mutate the original data. So create const copy = level.emoji, and you can see that TypeScript is giving us all of the properties to autocomplete it, level.emojis.slice. And our task is to create a set of pairs. So const pairs = another array, that's gonna be an array of strings.

[00:03:11]
And if we have a 4 by 4 grid, that means we need 8 pairs, 4 times 4 divided by 2. So in a loop for let i = 0; i < level.size × level.size / 2. Or if you wanna be fancy, you can use the times times operator, i += 1.

[00:03:42]
Inside here, we need to pick an emoji at random. Do that with const index = Math.floorMath.random() × the copy.length. Then we wanna get the value at that index, and then we wanna splice it out of that copy so that we can't accidentally pick it again. Copy.splice index will take that one element out of the array, and we'll push the emoji into our pairs array.

[00:04:31]
Right, so at this point, we should have eight emojis in an array. So the first thing we need to do obviously is duplicate that list. And at that point, we've got enough to fill a grid, so we can return that. And you'll see that red squiggly that was there a second ago, right now that we're returning the string, that disappears.

[00:05:05]
All right, we need to pass that data into the grid component so that we can render it. We'll do that down here. And it's gonna yell at us, because grid is not a prop on the grid component. Let's change that, let's go over to grid.svelte. I'm gonna press Cmd+P, type Grid to open that.

[00:05:27]
And in our script block, we don't have to declare props. We do export let grid. Because we're in TypeScript land, we're gonna use string so that we know what type of prop it is. But we need to tell svelte that this is a TypeScript component. So we add the lang="ts" there.

[00:05:48]
And it's got a yellow squiggly, because we're not actually using it anywhere in the component. So let's replace this hard coded array(16) with the grid. And then, we can pass the emoji down into the square component. And it's the same deal, the square component is not expecting an emoji prop at this point, so we need to go over to square.svelte and define that prop.

[00:06:20]
First, we've got to create our script. We'll add the lang="ts">, And declare the emoji prop as a string. Now, inside the square, We'll add a span and render that emoji, right? And you can see it's pretty subtle, but in the top left of each of those squares, you can now see some content.

[00:06:56]
Make it a little bit bigger by adding a span selector and adding, let's say, 5ms, like so. All right, so far so good, although obviously, we'd like that to be centered. So by this point, you know the drill, display flex, Justify-content center, align-items center. And now, our emojis are nicely centered.

