[00:00:00]
>> We're gonna talk about Gatsby today. And today, we're gonna dig in to some of the more advanced used cases of it. This is something that I think it's really interesting. There's so much you can do with Gatsby beyond what the initial impressions are. I think when you first look at Gatsby, if you just went to the intro to Gatsby course that I did a couple days ago, you may have have kind of gotten the impression that Gatsby is reserved for building static sites.

[00:00:27]
It's a really good tool for that. You can load data from anywhere, you can put it up from the Internet, and it all happens very fast. But, Gatsby can do a lot more than that. And today, we're gonna dig into what the opportunities are. What the additional things we can do are with Gatsby that let us go more toward the app side of the spectrum and take advantage of some of these dynamic things, and do some pretty powerful stuff.

[00:00:54]
So first, let's go ahead and go through just some basics. I'm gonna show a few slides here. If you've seen the intro to Gatsby workshop, this is gonna look familiar but it's good to recap. So let's start by saying who I am? So I am Jason Lengstorf. I'm the VP of Developer Experience at Netlify.

[00:01:18]
I'm also the host of a show called Learning with Jason which runs on Twitch. I pair program with people and we learn something new together a couple times a week. I used to be on the Gatsby team. I am now over at Netlify as I said. But while I was at Gatsby, I got to see a lot of cool things, work with a lot of amazing people.

[00:01:35]
And I'm also a boop enthusiast, I really like just being goofy on the Internet, I like corgis, I like booping them on the nose. I like making websites about boop and corgis on the nose. It's all really just right here in my heart. So let's start with saying what the heck is Gatsby?

[00:01:53]
So, Gatsby is two things. If you start googling Gatsby, it can get a little bit confusing, and that is because Gatsby is the name of both an open source framework and a venture backed cloud company, right? And they are connected, but they're not the same. And so that can get a little bit confusing, it can be a little hard to understand what's going on.

[00:02:16]
So for the purposes of this workshop, we are only going to talk about Gatsby the framework. We are not going to talk about Gatsby cloud. So that helps it, at least in the context of this, we are going to restrict all of our discussion around the open source framework only.

[00:02:34]
None of the features that we're using today are restricted to Gatsby cloud. Nothing requires you to have a Gatsby cloud account. This is all open source, you can do whatever you want with it. So, what Gatsby is, it's a static site generator. But as I said, it can do a little bit more than that.

[00:02:48]
Its primary thing is taking in data, running a build step, and outputting static files. This is known as the Jamstack architecture. And what that means is you decouple your front end, because by putting them into static files, you're able to ship that to a CDN, it's not reliant on a server.

[00:03:05]
It can be completely decoupled from any API's microservices back-ends that you have. It is also then pre-compiled which is that build step. And that pre-compilation helps cut down on resource usage. If you know that a page is always gonna look the same no matter who looks at it, building that page ahead of time cuts down on the server resources required to make that available to the Internet.

[00:03:30]
You have the ability to put it up on a CDN, CDN are cheap, they're very performant, they are scalable, they're secure. It's pretty hard to take down a CDN. And so in the grand scheme of things, if you've got a file that you can make static, putting it as a static file on a CDN is probably one of the easiest ways to hit that kind of enterprise grade of uptime and availability and scale.

[00:03:56]
Gatsby is also built on React. So React is a Facebook framework that gives us a lot of ability to modify the UI quickly through pretty thoughtful APIs. It's a great way to handle user interactivity. And stateful things across UI is where you can kind of have a button over here and change some state over here.

[00:04:16]
Things that are getting easier with native web APIs, but especially when React first came to prominence, they weren't easy, it was it was pretty challenging. Gatsby's also all in on GraphQL. GraphQL is a data layer that allows for us to query for arbitrary nested data. You can start by looking at one object and then look at the related object.

[00:04:39]
So if you've ever used Rest, you would hit an end point for let's say your blog posts or API/ posts. That's gonna come back with a list of blogs. And then if you have comments, it would give you an array of comment IDs. And then you would have to go and make a query for each one of those comments if you wanted to show them.

[00:04:57]
Which means that you're making tens or even hundreds of rest calls to load one blogs worth of posts and comments. That can be really challenging. What GraphQL does instead, is it abstracts all that away into a kind of a centralized layer. Where you're able to say I want my blog and I also want all the comments and let me get the comment author in the comment text.

[00:05:19]
And GraphQL will bring all that data together and let us make one request to the GraphQL endpoint that then brings us back all that data. So it's, really really good when you're dealing with loosely structured data. If you're doing data in your site that will be related to itself kind of spread all over the place.

[00:05:39]
Sometimes you'll need a subsection and maybe you'll need something much broader in all over the place, GraphQL is a great way to solve that. And when you're dealing with building websites, especially websites that pull in data from all around the web, which is how the Jamstack works. You might be pulling from a REST API, multiple headless services, maybe you've got a headless CMS for your blog.

[00:06:00]
Maybe you've got a headless e-Commerce system like you're using Shopify to manage your products. Maybe you're pulling in comments from a third party system as well. Maybe you've got a custom back end that has an API for some of your own data, all of that gets stitched together in a Jamstack layer.

[00:06:18]
And having this GraphQL layer to bring those together and create relationships between them is really powerful, gives you a lot of flexibility. So that's why Gatsby went all in on it. It's a really good use case for building websites. Gatsby is also opinionated, it wants you to do things a certain way.

[00:06:36]
It's gonna give you very clear APIs, it's got a lot of things that are done for you. But in order to get those benefits, you have to be willing to work with the platform. I've watched a lot of people make themselves really sad by trying to disagree with Gatsby's opinions and then they'll dive into the babble configure the Webpack config to change it, and it just leads to sadness, right?

[00:06:58]
So Gatsby is an opinionated tool, you get a lot for agreeing to follow the conventions that Gatsby provides. If you find yourself constantly fighting against what Gatsby does, you may wanna consider another framework, because the benefit of an opinionated framework is what's done for you. If you are spending most of your effort arguing with your framework, you've probably chosen the wrong framework.

[00:07:22]
Gatsby is perf-conscious, so one of the core benefits of Gatsby outside of just when you build things to static files and put them on a CDN, you're automatically gonna get a perf benefit. Because the site loads faster, there's less data to load, you don't have to keep servers running.

[00:07:36]
So you don't have to manage data round trips or scaling up servers making them globally available. So you're just inherently faster gets. Gatsby also does a bunch of things like pre-loading assets in the background. It will optimize your images, it will do some just baseline compression and tree shaking and all the things that you want it to do to make sure that your bundles are as small as they can be.

[00:07:59]
That they're compressed properly, that they're only loaded when they're actually needed. But that the browser is able to start pre-loading them a little bit so that they feel even faster. And finally, Gatsby's convenient, right? That's its biggest value prop. Is that If you use Gatsby, you get to go very far, very fast because of the way that it's set up to just let you hit the ground running.

[00:08:21]
It has a huge ecosystem, a tonne of plugins, a tonne of third party sources already integrated with it. And that means that you as a creator don't need to argue with your framework or set up this boilerplate or build the foundational stuff. You can just build the thing you wanna build.

[00:08:39]
And that makes it a great choice for you if you're trying to stand up a marketing site. If you're trying to get a blog rolling, if you wanna be a content creator and you're trying to get up and running, don't spend all your time fine tuning your website.

[00:08:53]
Just start publishing, just get things out there, start that muscle of being a content creator. It's also great for agencies for that reason. There's just a lot of reasons why Gatsby is a good like, hey, we need to move fast, Gatsby is probably a good choice. So specifically, what we're gonna cover today is a whole bunch of Gatsby's more advanced features.

[00:09:15]
So if you're interested in the basics of Gatsby, how to make pages how to set up a project, we're not gonna cover that today. That's going to be in the intro to Gatsby workshop which you can watch on the front-end master site. What we're gonna cover today is we're gonna be using a monorepo for a dev setup.

[00:09:32]
So in a lot of bigger companies I've seen they use monorepos. And especially if you're gonna start building your custom plugins, custom themes, things like that, having a monorepo is gonna make dev a whole lot easier. So we're gonna talk about how to do that and what the benefits are.

[00:09:48]
We're gonna set up custom pages. So not just like building a page in the pages directory, but actually getting into the Gatsby node APIs and creating pages using those node APIs with custom context and all those good things. We're gonna look at custom data types. How do you get data into the Gatsby GraphQL layer and not using a source plug in, but actually building your own using the node APIs dropping data in.

[00:10:15]
We're gonna look at custom data relationships. So after you've created data, how can we make it possible to do the nesting and the arbitrary queries? We're gonna look at custom resolvers. If we have some data and we wanna get a derived field, we can build that right into Gatsby's GraphQL layer.

[00:10:30]
So we're gonna look at how to do that. You can do remote image handling. If you've got data that listen image that's available on say unsplash or whatever service had the images before, you can have Gatsby pull out locally and do optimization for you. We'll look at how to do that.

[00:10:46]
We're gonna do theme development. So we're gonna build a theme that can be shared between sites, reusable code. This is really, really good, especially if you are in the agency space or if you work with clients where you need to kind of basic boilerplate things that are always more or less the same.

[00:11:01]
So that you don't have to do the same general setup for everyone in your clients. We're gonna look at client only route. So, if you wanna build something that shouldn't be server rendered. Let's say you've got an account page, or you're doing a search, where some kind of user interaction is required before you know what you're gonna display on the page, we're gonna look at that.

[00:11:21]
We're also gonna look at serverless functions. So when you are working with a client-only site, you can do a lot, but there are moments where you find yourself wanting a node server or some kind of a back-end. Serverless functions are often a way to very quickly stand up that little bit of back-end functionality you need without the headache of actually standing up and scaling a server.

[00:11:46]
Building a little bit of functionality is fine, I love doing that as a dev. Building out a whole node server and figuring out how to get it into a docker container and then figuring out how to get that deployed in a way that scales means now I'm writing Kubernetes config.

[00:11:59]
There's a lot to that, I don't wanna do it, I would love to never think about it again. And serverless functions make that, generally speaking, I can almost always solve my problems with a serverless function instead of having to actually stand up a whole node service. We're going to set a protected route.

[00:12:15]
So we're not gonna do actual authentication. We're not going to deal with usernames and passwords, but we are gonna show how if you do have someone authenticated, if you've used a service like Auth0. Or you've used Netlify identity or some other thing that gives you like a token or Login status, we'll show you how to make sure that Gatsby only shows pages to people who are logged in that way.

[00:12:41]
We're gonna look at deployment, how do you get this thing up on the Internet? And especially when you're talking about monorepo development, there's a little bit to that. So we wanna make sure that we've got a good flow there. We're gonna do environment variables. Environment variables are a really good way when you're working with third party services, you're gonna have public keys for how you integrate with somebody's JavaScript SDK.

[00:13:02]
Or private keys so that you can get access to data that shouldn't be publicly available on the web, so that you can pull out a subset of it for display on the website. Those workflows are a little head bendy at first. So if you've never worked with environment variables, this will be a good kind of look at what Gatsby does with environment variables.

[00:13:21]
And how we can make sure that only the public ones should be available to the website and everything else should be restricted to the builds process and serverless functions.

