WEBVTT

1
00:00:00.210 --> 00:00:03.221
Just as a general recap before
we go into deployment and

2
00:00:03.221 --> 00:00:06.958
then we're gonna look at environment
variables here a little bit.

3
00:00:06.958 --> 00:00:09.730
Let's poke at what we built today.

4
00:00:09.730 --> 00:00:13.210
So first and foremost,
we set up custom data.

5
00:00:13.210 --> 00:00:18.443
We're able to pull in custom
data from these JSON files.

6
00:00:18.443 --> 00:00:20.863
We could have pulled them in
from a third party API or

7
00:00:20.863 --> 00:00:25.045
could've used software as a service thing,
could've use a headless CMS, whatever.

8
00:00:26.913 --> 00:00:29.798
In using those and
the Gatsby source nodes API,

9
00:00:29.798 --> 00:00:33.346
we were able to specify some
relationships between them.

10
00:00:33.346 --> 00:00:37.740
And then create nodes in
the GraphQL layer for each one.

11
00:00:37.740 --> 00:00:42.561
We were also able to use the create
pages API to then go ahead and

12
00:00:42.561 --> 00:00:47.000
turn all of these into,
like here we got our books.

13
00:00:47.000 --> 00:00:51.630
We turned our books into pages
with some special handling.

14
00:00:51.630 --> 00:00:55.268
We needed some logic for
the way that the slugs were done.

15
00:00:55.268 --> 00:00:59.698
And that led us to some
customization in the data itself,

16
00:00:59.698 --> 00:01:03.340
we wanted to be able to create a buy link.

17
00:01:03.340 --> 00:01:07.230
We wanted to be able to get the cover
image from a third party service.

18
00:01:07.230 --> 00:01:12.279
So we used the Open Library to find
those covers and then turn that into

19
00:01:12.279 --> 00:01:17.173
a locally optimized image by loading
it in with a custom resolver.

20
00:01:17.173 --> 00:01:20.500
All that led to us
building up these pages.

21
00:01:20.500 --> 00:01:28.230
And then we dug into client only routes,
we're able to get those up and running.

22
00:01:28.230 --> 00:01:31.160
We got protected routes up and running.

23
00:01:31.160 --> 00:01:33.490
And we also built ourselves a theme.

24
00:01:33.490 --> 00:01:37.924
So with a Gatsby theme, we were able
to set up this header and the nav, and

25
00:01:37.924 --> 00:01:40.788
all that good stuff with
this shared styling.

26
00:01:40.788 --> 00:01:43.490
And we didn't actually have to
include that nav on anything.

27
00:01:43.490 --> 00:01:45.133
So if you look at our pages,

28
00:01:45.133 --> 00:01:48.640
our pages actually don't have
any reference to a layout.

29
00:01:48.640 --> 00:01:51.660
There's no layout here,
we just export this markup.

30
00:01:51.660 --> 00:01:55.240
But when we go to the books page, you can
see that it still has this layout applied.

31
00:01:55.240 --> 00:01:57.070
That's the power of a theme.

32
00:01:57.070 --> 00:02:01.537
And we used some tools,
including just regular old config,

33
00:02:01.537 --> 00:02:06.510
by overriding the site metadata
which composes in themes.

34
00:02:06.510 --> 00:02:10.074
To set our site title and
the nav items, and

35
00:02:10.074 --> 00:02:14.436
then we also use a technique
called file shadowing.

36
00:02:14.436 --> 00:02:19.395
To replace the variables and
change the heading color to dark blue,

37
00:02:19.395 --> 00:02:23.700
up here so that we were able
to have a dark blue header.

38
00:02:23.700 --> 00:02:28.084
&gt;&gt; I'm just curious the way
you did the data poll,

39
00:02:28.084 --> 00:02:32.370
I've been putting it in
a plugins directory.

40
00:02:33.840 --> 00:02:38.234
Did you do it differently
because this is a mono site, or

41
00:02:38.234 --> 00:02:43.670
has the convention just changed, or
could you just do it either way?

42
00:02:44.870 --> 00:02:47.609
&gt;&gt; I mean the idea of
making a custom plugin for

43
00:02:47.609 --> 00:02:52.870
your site to handle stuff like data
pulling, that's an organizational choice.

44
00:02:54.240 --> 00:02:57.125
If I had a really complicated Gatsby node,

45
00:02:57.125 --> 00:03:00.340
which we are kind of approaching that,
right.

46
00:03:00.340 --> 00:03:05.600
This is a fairly complex Gatsby
node file we're at 150 lines.

47
00:03:05.600 --> 00:03:10.724
So I could pull all of this out
into a Gatsby plugin books.

48
00:03:10.724 --> 00:03:14.312
That would be locally installed and
then I could use it and

49
00:03:14.312 --> 00:03:17.765
not have to look at this as
part of my actual site build.

50
00:03:18.995 --> 00:03:22.431
It mostly comes down to your preference,
right.

51
00:03:22.431 --> 00:03:28.082
Because there's the cleanliness of having
it tucked away in a plugin is nice.

52
00:03:28.082 --> 00:03:29.720
You don't have to think about it,
you don't have to look at it.

53
00:03:29.720 --> 00:03:32.248
If I was shipping this to lots and
lots of developers,

54
00:03:32.248 --> 00:03:33.830
I would probably consider that.

55
00:03:33.830 --> 00:03:38.010
Because it's one less thing for
somebody to get intimidated by,

56
00:03:38.010 --> 00:03:41.360
to stumble into and
accidentally break their site.

57
00:03:42.430 --> 00:03:43.823
The other side of it though,

58
00:03:43.823 --> 00:03:46.810
like the trade off here is
that that's an indirection.

59
00:03:46.810 --> 00:03:52.003
So by taking it out of the site setup and
putting it into a separate directory.

60
00:03:52.003 --> 00:03:53.739
If it's not gonna be reused,

61
00:03:53.739 --> 00:03:58.580
you're adding a layer of indirection
around where the data is coming from.

62
00:03:58.580 --> 00:04:01.630
So it's ultimately a matter of preference.

63
00:04:01.630 --> 00:04:04.309
I would say way the use case and
where it's gonna live and

64
00:04:04.309 --> 00:04:06.630
how many people have to look at it.

65
00:04:06.630 --> 00:04:10.950
Who has to maintain the data itself versus
who has to just use what comes out of it.

66
00:04:10.950 --> 00:04:13.360
And based on the answers
to those questions,

67
00:04:13.360 --> 00:04:15.460
I think both answers are good answers.

