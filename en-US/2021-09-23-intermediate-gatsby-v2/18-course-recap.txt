[00:00:00]
>> Just as a general recap before we go into deployment and then we're gonna look at environment variables here a little bit. Let's poke at what we built today. So first and foremost, we set up custom data. We're able to pull in custom data from these JSON files.

[00:00:18]
We could have pulled them in from a third party API or could've used software as a service thing, could've use a headless CMS, whatever. In using those and the Gatsby source nodes API, we were able to specify some relationships between them. And then create nodes in the GraphQL layer for each one.

[00:00:37]
We were also able to use the create pages API to then go ahead and turn all of these into, like here we got our books. We turned our books into pages with some special handling. We needed some logic for the way that the slugs were done. And that led us to some customization in the data itself, we wanted to be able to create a buy link.

[00:01:03]
We wanted to be able to get the cover image from a third party service. So we used the Open Library to find those covers and then turn that into a locally optimized image by loading it in with a custom resolver. All that led to us building up these pages.

[00:01:20]
And then we dug into client only routes, we're able to get those up and running. We got protected routes up and running. And we also built ourselves a theme. So with a Gatsby theme, we were able to set up this header and the nav, and all that good stuff with this shared styling.

[00:01:40]
And we didn't actually have to include that nav on anything. So if you look at our pages, our pages actually don't have any reference to a layout. There's no layout here, we just export this markup. But when we go to the books page, you can see that it still has this layout applied.

[00:01:55]
That's the power of a theme. And we used some tools, including just regular old config, by overriding the site metadata which composes in themes. To set our site title and the nav items, and then we also use a technique called file shadowing. To replace the variables and change the heading color to dark blue, up here so that we were able to have a dark blue header.

[00:02:23]

>> I'm just curious the way you did the data poll, I've been putting it in a plugins directory. Did you do it differently because this is a mono site, or has the convention just changed, or could you just do it either way?
>> I mean the idea of making a custom plugin for your site to handle stuff like data pulling, that's an organizational choice.

[00:02:54]
If I had a really complicated Gatsby node, which we are kind of approaching that, right. This is a fairly complex Gatsby node file we're at 150 lines. So I could pull all of this out into a Gatsby plugin books. That would be locally installed and then I could use it and not have to look at this as part of my actual site build.

[00:03:18]
It mostly comes down to your preference, right. Because there's the cleanliness of having it tucked away in a plugin is nice. You don't have to think about it, you don't have to look at it. If I was shipping this to lots and lots of developers, I would probably consider that.

[00:03:33]
Because it's one less thing for somebody to get intimidated by, to stumble into and accidentally break their site. The other side of it though, like the trade off here is that that's an indirection. So by taking it out of the site setup and putting it into a separate directory.

[00:03:52]
If it's not gonna be reused, you're adding a layer of indirection around where the data is coming from. So it's ultimately a matter of preference. I would say way the use case and where it's gonna live and how many people have to look at it. Who has to maintain the data itself versus who has to just use what comes out of it.

[00:04:10]
And based on the answers to those questions, I think both answers are good answers.

