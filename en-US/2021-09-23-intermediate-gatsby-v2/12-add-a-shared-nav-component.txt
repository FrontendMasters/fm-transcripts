[00:00:00]
>> So for our shared nav here, let's dive into the theme, so I'll collapse that site down. And I'm gonna create, what I want is a the name of the site up here. And then I want navigation over here and the items will just kind of grow out from the side as we add more.

[00:00:17]
So by default, we're just gonna link to the homepage cuz that's the only thing that we're pretty sure every site is gonna have. It's pretty rare that you don't have a homepage on your site. So if that's the case, then I want to be able to let people configure, so for us, for example, I want the ability to set a link to the authors into the books.

[00:00:38]
So in the theme, I'm gonna use just the site metadata, which is a built in way to handle this sort of information. So we can set the title and we'll start by saying, Gatsby Theme Shared Nav. And then in here, we can say navItems and we can just set these to whatever we want.

[00:00:58]
So I'm gonna make it an array, I'm going to put in just the one for now. So the label will be the text that shows the Home, and the path will be a / for taking us to the homepage. And so this is gonna be the way that we configure this theme, there's also a way, and I just realized I put this in the wrong place.

[00:01:16]
Let me take this out cuz I was looking at the wrong Gatsby config, I want this to be in the theme gatsby-config, this one. So I'm gonna put that here, and then this one, I want to leave the site one, we'll leave alone. So this should retriggered, it will actually start now, so we're gonna notify the, and that puts these into our GraphQL layer.

[00:01:48]
So we'll see those as part of the the GraphQL layer, something went wrong, siteMetadata, yeah, that's correct. That was a helpful validation, I thought they would just go quietly, and then we'd be really confused. Okay, so it validated our config for us, and now we're gonna put this in.

[00:02:14]
Now, keep in mind, this is the Gatsby config for the theme, not the one for the site. So when I go out to Graphical, and I reload, I can pull in the site and site metadata and it's gonna give me my title and my nav items. Gotta turn off this ID that we're not using.

[00:02:41]
There we go, and so now, we can just query this right out. So what I wanna do is in my site, I just wanna override this, so I'm gonna take this part. I can copy it, move into the Gatsby config, drop this in, and we're gonna say this is My Book Club and then we will skip the home.

[00:03:05]
We don't actually wanna go home, we're gonna do books and authors. Okay, so, now that we've got that, if we rerun this query, we can see that it automatically overrode so that we've got these new values. Great, that's what we wanted, we're gonna need some styles. So in the interest of keeping everything in one place, not jumping around between files, let's start with the styles for it.

[00:03:36]
So the way that our nav is gonna work is it's gonna live in a container and that container is gonna be up at the top of the screen. So for that, I want the background to be our dark color and then I want the color of it to be our light color.

[00:03:51]
We will set it to display: flex, because I want the logo on one side and the items on another side, remember? I will justify the content with space-between and then we'll do a margin: 0. We will do padding 0.5rem and we'll give it 5% of the viewport width on either side.

[00:04:14]
And that'll give us a box that we can put things in, and then we're gonna have our shared-nav. And that shared-nav is going to be also display:flex because I want to justify content and put space-between. And I'm gonna put a little bit of a gap in this, so we'll give it like a 1rem gap.

[00:04:37]
Then we're gonna style up the links in the nav, so we want those to be whatever the color of the nav is. We're gonna set padding so that it's a little easier to click on them. And we will set the text-decoration to none, and since we took the text-decoration off, we got to do a little bit of work to make these accessible.

[00:04:57]
So let's do a link:focus, link not like. And a link:hover and then with those, let's just invert the background. We will set the background color to be our light color, and then we'll set the color of the text to be our dark color. So that should signify pretty clearly that we are using like what we're hovering over, what we focus on.

[00:05:31]
So now that we've got that, we can set up our components, so let's set up a nav.js. And in nav.js, we're going to import everything as react from react. We're going to import Link, useStaticQuery and graphql from Gatsby. And we're also gonna get that the styles that we set, so the container sharedNav, and link from /styles/nav.module.css.

[00:06:14]
And now we can export a function called Nav(), which will be our nav component. And I'm gonna start by getting data, that's going to be UseStaticQuery(graphql. And we can set up a query here, we'll get our site, siteMetadata, and then we want the title, the navItems. And then we want the label and path for each nav item, oops.

[00:06:50]
One more, good, then we can get out our navItems from data.site.siteMetadata navItems, And we can return a header with a class name of container. Then we'll link to our homepage, and that's gonna have a class name of link. And inside of it we'll use the data.site.siteMetadata.title. All right, then we can set up our navItems, so navItems.map, and for each one, we're going to set up a link with a key of, we'll give it a unique name.

[00:07:54]
So nav, item.path is somewhat unique, we'll make that okay, we'll link that to item.path. We'll give that a class name of link, and inside of it, we're going to put the item.label. Okay, so now that we've saved that, we can import it into here, import Nav from ' ./nav.js': and then we'll use it right here.

[00:08:32]
And let's go check it out. I missed something, I missed in my header a I missed the end of my loop. And then I missed another closing parentheses, hey, there we go, so that's better. That's a little weird, that's not exactly what I wanted, maybe we should mess with this a little bit.

[00:09:08]
Maybe we want these ones instead of being space-between to be flex end. I didn't wrap it in the nav is what went wrong, so let's go back into our nav. And we're gonna put nav and that needs a className of sharedNav. And then we can drop this around, and that should fix everything.

[00:09:31]
There it is, that's what we were actually after, and so we can put that gap back in now cuz that's a gap isn't, okay, good. All right, so we have a nice looking shared nav, we can go to the books page, we can go to the author's page.

[00:09:44]
We can click around, get to where we wanna go and this is all I mean, this is great, right, this is what we want.

