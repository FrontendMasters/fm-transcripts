WEBVTT

1
00:00:00.240 --> 00:00:03.551
&gt;&gt; Erik Reinert: So one of the things I
do want you guys to do really quickly is

2
00:00:03.551 --> 00:00:06.794
just make sure that your
previous branches were merged so

3
00:00:06.794 --> 00:00:09.498
that we can create a new
branch off of the main and

4
00:00:09.498 --> 00:00:14.000
at least make sure that you've got
a branch for this stage to work in.

5
00:00:14.000 --> 00:00:19.280
So yeah, just please make sure to do that
while I'm going through all this stuff.

6
00:00:19.280 --> 00:00:22.246
So once we've got our new branch,
we want to go ahead and

7
00:00:22.246 --> 00:00:25.520
basically get started
setting up Terraform.

8
00:00:25.520 --> 00:00:28.367
So actually this first step,
I will say go ahead and

9
00:00:28.367 --> 00:00:31.280
follow me because it's
just the AWS console.

10
00:00:31.280 --> 00:00:32.432
But what we're gonna do is,

11
00:00:32.432 --> 00:00:36.060
we're gonna step up no is we're actually
going to set up our state first.

12
00:00:36.060 --> 00:00:39.604
Does anyone know what I mean by State when
I say what does it mean to set up our

13
00:00:39.604 --> 00:00:40.300
state first?

14
00:00:41.660 --> 00:00:45.538
Terraform has to know or
needs to have a place to

15
00:00:45.538 --> 00:00:50.940
store how things are built and
allocated and behavior.

16
00:00:50.940 --> 00:00:55.208
Yeah, so basically,
when you run Terraform,

17
00:00:55.208 --> 00:01:00.340
it keeps data that is
referential to your resources.

18
00:01:00.340 --> 00:01:04.300
So it knows like, I created this instance,
I know that this is the ID of it.

19
00:01:04.300 --> 00:01:06.982
Right, like all these other things,
so that it keeps track of

20
00:01:06.982 --> 00:01:09.940
everything that's been created
that's called Terraform State.

21
00:01:11.060 --> 00:01:15.080
Terraform State is something that you
want to hold on to very closely and

22
00:01:15.080 --> 00:01:16.980
take very good care of.

23
00:01:16.980 --> 00:01:20.214
Because if that state disappears,
gets deleted or anything like that,

24
00:01:20.214 --> 00:01:23.140
then you have to delete or
manage all of your resources manually.

25
00:01:23.140 --> 00:01:27.022
And then on top of that, if it does get
removed, or if any of the state gets

26
00:01:27.022 --> 00:01:30.700
removed, then you also need to re
import all of those resources.

27
00:01:30.700 --> 00:01:36.822
So overall, State's a very sensitive piece
of data that you need to take care of and

28
00:01:36.822 --> 00:01:41.580
make sure that it has backups and
all that kind of stuff.

29
00:01:41.580 --> 00:01:46.378
What's nice about this though is that
Terraform does provide you the option of

30
00:01:46.378 --> 00:01:48.785
storing State in multiple locations.

31
00:01:48.785 --> 00:01:52.013
You can store it in the cloud,
you can store it on another server,

32
00:01:52.013 --> 00:01:54.930
you could really put it wherever you want.

33
00:01:54.930 --> 00:01:59.170
Because we're using Amazon,
we want to store it on Amazon.

34
00:01:59.170 --> 00:02:02.934
What we want to do is we want
to actually store it on S3.

35
00:02:02.934 --> 00:02:05.330
S3 is completely redundant.

36
00:02:05.330 --> 00:02:07.490
S3 has version support.

37
00:02:07.490 --> 00:02:11.732
S3 makes a really good option here
because again, we have high availability,

38
00:02:11.732 --> 00:02:13.770
redundancy, all of that good stuff.

39
00:02:13.770 --> 00:02:19.065
And even versioning, if we wanted to,
to be able to have multiple versions

40
00:02:19.065 --> 00:02:23.853
of that state, what we're going to
do is we're going to go to S3 and

41
00:02:23.853 --> 00:02:29.720
then you'll see I have a whole bunch
of buckets that already exist here.

42
00:02:29.720 --> 00:02:32.760
But what I want to do is I
want to create a new bucket.

43
00:02:32.760 --> 00:02:34.280
So I'm gonna click Create Bucket.

44
00:02:35.640 --> 00:02:37.560
Now here's the fun part.

45
00:02:39.960 --> 00:02:44.702
I don't think we'll be able to create
all the same bucket names because I

46
00:02:44.702 --> 00:02:45.720
think we'll.

47
00:02:46.740 --> 00:02:47.780
Isn't that how S3 works?

48
00:02:47.780 --> 00:02:49.892
Yeah.
So I think if I create a bucket name and

49
00:02:49.892 --> 00:02:53.940
then you try creating the same
bucket name, it won't work.

50
00:02:53.940 --> 00:02:59.110
So what I'm going to do is I'm
going to do FEM FD service and

51
00:02:59.110 --> 00:03:05.060
then I'll just put like,
I don't know, the account ID maybe.

52
00:03:05.060 --> 00:03:08.251
Yeah, I mean, no, you could put
the account ID if you wanted,

53
00:03:08.251 --> 00:03:12.060
I'll just put like, I don't know,
black glasses, I guess, whatever.

54
00:03:12.060 --> 00:03:13.860
You can put your own name there.

55
00:03:13.860 --> 00:03:18.311
But yeah, just some kind of unique
identifier so that you know that it,

56
00:03:18.311 --> 00:03:20.720
you know, you won't conflict.

57
00:03:20.720 --> 00:03:23.360
Does anyone know what I'm talking about,
by the way?

58
00:03:23.360 --> 00:03:25.840
Can somebody tell me
what am I talking about?

59
00:03:25.840 --> 00:03:28.640
Well, I think it needs
to be globally unique.

60
00:03:28.640 --> 00:03:30.240
Exactly.

61
00:03:30.240 --> 00:03:31.520
Yeah, Exactly.

62
00:03:31.520 --> 00:03:34.560
So Amazon S3 buckets are global.

63
00:03:34.560 --> 00:03:37.840
They're provisioned across
the entire world, basically.

64
00:03:37.840 --> 00:03:39.214
And so because of that,

65
00:03:39.214 --> 00:03:43.120
you're at the mercy of the uniqueness
of the name of a bucket.

66
00:03:43.120 --> 00:03:46.713
So somebody else could have
a bucket name that you may want and

67
00:03:46.713 --> 00:03:50.010
you cannot use it because
now they're using it.

68
00:03:50.010 --> 00:03:51.210
It's actually one of.

69
00:03:51.210 --> 00:03:54.810
It's kind of interesting, but
it's also kind of annoying as well.

70
00:03:54.810 --> 00:03:56.490
So, yeah, I'm just going to do.

71
00:03:56.490 --> 00:03:59.370
Actually, I'll just do Alta 4
because that makes more sense.

72
00:03:59.370 --> 00:04:03.890
So I'm gonna o FVM FDService Alta 4 and
then that's it.

73
00:04:03.890 --> 00:04:04.610
That's all I need.

74
00:04:04.610 --> 00:04:07.130
I'm just going to click
Create Bucket after that.

75
00:04:07.130 --> 00:04:09.683
Cool.
Okay, so I have a new bucket called

76
00:04:09.683 --> 00:04:13.700
Fem FD Service Alt F4, but
I have absolutely nothing in it yet.

77
00:04:13.700 --> 00:04:15.860
So let's go ahead and put something in it.

78
00:04:19.940 --> 00:04:23.345
Okay, so the next thing we're going to
do is we're actually going to go back

79
00:04:23.345 --> 00:04:26.500
to the console and I'm going to make
sure that I am logged into Amazon.

80
00:04:35.460 --> 00:04:36.500
Okay.

81
00:04:36.500 --> 00:04:39.450
And then I'm gonna do an AWS S3.

82
00:04:39.450 --> 00:04:40.250
Oops, nope.

83
00:04:40.250 --> 00:04:43.370
AWS S3LS just to make sure.

84
00:04:44.810 --> 00:04:45.930
Cool.
Yep, looks good.

85
00:04:45.930 --> 00:04:47.530
I can even see my bucket right there.

86
00:04:47.530 --> 00:04:48.810
Cool.
Awesome.

87
00:04:48.810 --> 00:04:52.114
And then the next thing I'm going to do
is I'm going to actually add a couple

88
00:04:52.114 --> 00:04:53.010
of things to my git.

89
00:04:53.010 --> 00:04:53.650
Ignore, right?

90
00:04:53.650 --> 00:04:57.050
Because we're going to be using Terraform
Terraform generates a lot of files.

91
00:04:57.050 --> 00:04:58.970
We don't want every file to get committed.

92
00:04:58.970 --> 00:05:03.450
So the first thing we're going to do
is we're going to do star.tf plan.

93
00:05:03.450 --> 00:05:06.680
So we want to make sure that
none of our plans get committed.

94
00:05:06.680 --> 00:05:11.016
We're also going to do Terraform just
to make sure that any directory or

95
00:05:11.016 --> 00:05:14.120
anything name Terraform doesn't stay.

96
00:05:14.120 --> 00:05:16.680
And then we're going to do
one more called overrides.

97
00:05:16.680 --> 00:05:23.560
Txt, which is a unique file that we
will be creating a little later.

98
00:05:23.560 --> 00:05:27.480
So we're gonna add those three
things to our git ignore.

99
00:05:27.480 --> 00:05:31.269
And then what we're going to do is
we're going to make a directory called

100
00:05:31.269 --> 00:05:31.960
Terraform.

