WEBVTT

1
00:00:00.190 --> 00:00:03.829
&gt;&gt; Shirley Wu: So I absolutely love
transitions, because it basically

2
00:00:03.829 --> 00:00:07.941
emphasizes the changes in state
from state A to state B, right?

3
00:00:07.941 --> 00:00:12.621
So some examples I had for you,

4
00:00:12.621 --> 00:00:17.841
like this one was basically just,

5
00:00:17.841 --> 00:00:23.820
this is a really old example from me.

6
00:00:23.820 --> 00:00:27.820
This is basically the annual salary,
as well as the cost of living.

7
00:00:27.820 --> 00:00:33.560
So this bar graph is the salary, and
then this is the cost of living for

8
00:00:33.560 --> 00:00:36.320
BART which is Bay Area Rapid Transit.

9
00:00:36.320 --> 00:00:41.270
It's like the subway system
in like San Francisco.

10
00:00:41.270 --> 00:00:47.750
And the whole thing is like there was

11
00:00:47.750 --> 00:00:52.570
like BART strike a few years ago and then
this was the visualization around that.

12
00:00:52.570 --> 00:00:57.550
And so right now, I'm defaulting to
Station Agent but if let say for

13
00:00:57.550 --> 00:01:02.540
example, I knew transition, so

14
00:01:02.540 --> 00:01:06.610
I can play around with,
depending on who it is,

15
00:01:06.610 --> 00:01:10.120
like how much did they make, and
a lot of the transition is super simple.

16
00:01:10.120 --> 00:01:11.880
It's just that bar graph going up and
down.

17
00:01:11.880 --> 00:01:16.690
But then there's also that transition
of the cost of living going red

18
00:01:16.690 --> 00:01:21.230
if the cost of living
is below their salary.

19
00:01:21.230 --> 00:01:25.450
And then sometimes,
it's just fun to go from one of

20
00:01:26.580 --> 00:01:30.600
these guys to management,
because it just shoots all the way up.

21
00:01:31.710 --> 00:01:37.630
So transitions are kind of fun to
emphasize when you have a visualization

22
00:01:37.630 --> 00:01:41.070
and you want to emphasize something that's
a little bit extreme, that's really fun.

23
00:01:43.110 --> 00:01:45.750
The other thing that I love
about transitions is that

24
00:01:48.480 --> 00:01:52.350
in here I use it to interpolate.

25
00:01:52.350 --> 00:01:57.443
So I did something really silly recently

26
00:01:57.443 --> 00:02:02.270
where I got all of Obama's late

27
00:02:02.270 --> 00:02:07.200
night talk show interviews, and
just put emojis on their faces.

28
00:02:08.400 --> 00:02:12.890
And this actually, the technology behind
this is actually quite sophisticated.

29
00:02:12.890 --> 00:02:16.820
Because I took screenshots of
every time somebody talked.

30
00:02:16.820 --> 00:02:22.390
And then I ran through google vision
API to see what their emotions were

31
00:02:22.390 --> 00:02:27.800
like and
that gave me dimensions of their faces.

32
00:02:27.800 --> 00:02:30.070
This has nothing to do with D3.

33
00:02:30.070 --> 00:02:34.000
I'm just telling you because
I I have to do this.

34
00:02:34.000 --> 00:02:39.370
So dimensions of their faces and like how
happy they were or how sad they were and

35
00:02:39.370 --> 00:02:46.020
the confidence like 0 to 99 or 100% and

36
00:02:46.020 --> 00:02:51.265
yeah, this is the kind of stuff
I do with D3 [LAUGH] And so

37
00:02:51.265 --> 00:02:57.035
the idea is like and I had way too much
fun making a cut out of their faces.

38
00:02:58.965 --> 00:03:04.535
But the idea is that each of
these are a interview and

39
00:03:04.535 --> 00:03:07.920
these are the talk show hosts and
as I scroll down,

40
00:03:07.920 --> 00:03:12.020
like I think you guys have seen like this
thing called like scrollytelling, right?

41
00:03:12.020 --> 00:03:14.929
Like as the data visualization
changes as you scroll down.

42
00:03:17.941 --> 00:03:22.415
&gt;&gt; Shirley Wu: And then as I scroll
down like the links come down and

43
00:03:22.415 --> 00:03:27.319
these are like kind of just like,
now this is over time.

44
00:03:29.380 --> 00:03:31.440
So each of these interviews
are played over time and

45
00:03:31.440 --> 00:03:35.830
you can just hover and
see all of the different talk show hosts.

46
00:03:35.830 --> 00:03:40.410
And then as you scroll down,
these are all of the YouTube videos.

47
00:03:41.640 --> 00:03:45.630
And then these are all of the YouTube
videos that had captions, and

48
00:03:45.630 --> 00:03:51.618
thus I could get data about
every time somebody talked.

49
00:03:51.618 --> 00:03:57.018
And, this is, these are the videos

50
00:03:57.018 --> 00:04:02.418
that you can see, and you can just,

51
00:04:02.418 --> 00:04:08.538
So what I found out
from this is that Jimmy

52
00:04:08.538 --> 00:04:14.118
smiles a lot and Obama just has that,

53
00:04:14.118 --> 00:04:18.643
he's unamused all the time.

54
00:04:18.643 --> 00:04:23.278
&gt;&gt; Speaker 2: [LAUGH]
&gt;&gt; Shirley Wu: [LAUGH] Very rarely does

55
00:04:23.278 --> 00:04:28.430
Mr Obama have a smiley face on him.

56
00:04:28.430 --> 00:04:33.370
But the whole point of showing you this is
to show you like first of all that whole

57
00:04:33.370 --> 00:04:37.230
thing about object consincy, about
like you know all of these videos and

58
00:04:37.230 --> 00:04:41.430
these like interviews, in going up and
down the screen so like.

59
00:04:41.430 --> 00:04:44.520
So then hopefully you drives home
that like these are the same

60
00:04:44.520 --> 00:04:47.100
things that we're talking
about from section to section.

61
00:04:47.100 --> 00:04:53.410
And this is actually using,
not d3.transition,

62
00:04:53.410 --> 00:04:58.560
but using a part of d3 transition
called interpolate, d3 interpolate.

63
00:04:58.560 --> 00:05:03.240
And like various other things that all
together makes up a d3 transition and

64
00:05:03.240 --> 00:05:06.280
I'm using that under the hood to

65
00:05:06.280 --> 00:05:11.830
figure out where these things should be
moving as you scroll down the screen.

66
00:05:11.830 --> 00:05:14.740
So this is the kind of things that
you could do with d3 transitions.

67
00:05:14.740 --> 00:05:17.630
Unfortunately I don't have enough time
to go into all the details of how

68
00:05:17.630 --> 00:05:22.800
the transition works but I'm also
fascinating to kind of looking into it and

69
00:05:22.800 --> 00:05:26.240
figure out cuz once you understand how
it works, you can do stuff like this.

70
00:05:27.960 --> 00:05:31.270
All though recently I learned GreenSock
for animation, I've learned that that's so

71
00:05:31.270 --> 00:05:35.070
much easier for
just like Scrollytelling and all of that.

72
00:05:36.390 --> 00:05:39.600
If you really want to do this kind of
thing GreenSock could also be a way

73
00:05:39.600 --> 00:05:40.270
to go, not d3.

74
00:05:42.380 --> 00:05:44.980
There's things that you can
do with d3 transitions.

75
00:05:45.990 --> 00:05:48.430
Let's get right into it.

76
00:05:48.430 --> 00:05:52.200
Transitions are one of those things that I
feel like there is three different ways to

77
00:05:52.200 --> 00:05:56.500
do the same exact Motion and
like they all work and

78
00:05:56.500 --> 00:05:59.680
they all work in almost similar ways.

79
00:05:59.680 --> 00:06:03.860
So I would tell you my favourite way and
then you guys can go read d3

80
00:06:03.860 --> 00:06:07.180
transmissions like all the docs and figure
out all the different ways to do it.

81
00:06:08.430 --> 00:06:11.890
So the way that I usually do
it is I actually just define

82
00:06:11.890 --> 00:06:14.020
a d3.transition all the way up top.

83
00:06:15.460 --> 00:06:20.040
I usually give it a duration because
d3 transition defaults to 250

84
00:06:20.040 --> 00:06:23.250
milliseconds which is a little bit fast,

85
00:06:23.250 --> 00:06:28.550
so I give it a duration of 1000
milliseconds, or a second.

86
00:06:28.550 --> 00:06:34.200
And if you define this up top,
and then you use it, and

87
00:06:34.200 --> 00:06:40.440
anywhere that you then use it,
it syncs the animations across.

88
00:06:40.440 --> 00:06:44.865
So the way that I'm using it is I am

89
00:06:44.865 --> 00:06:51.080
transitioning the exit selection,

90
00:06:51.080 --> 00:06:55.350
the height down to 0, and
I'm also transitioning the enter and

91
00:06:55.350 --> 00:06:59.000
update selection so
that the height goes to the right place.

92
00:06:59.000 --> 00:07:04.820
And so if I define it up top,
it just makes sure that the timer for

93
00:07:04.820 --> 00:07:09.280
both of those animations I think
start at exactly the same time and

94
00:07:09.280 --> 00:07:10.890
they're synced across the board.

95
00:07:10.890 --> 00:07:15.660
And whereas I think some of the, don't
quote me on this because it's been a while

96
00:07:15.660 --> 00:07:18.810
since I've read the docs, but
I think for some of the other options,

97
00:07:20.300 --> 00:07:25.550
it doesn't get synced and it just starts
whenever that piece of code executes.

98
00:07:25.550 --> 00:07:30.010
So, I like using it this way for
that whole syncing.

99
00:07:30.010 --> 00:07:36.400
And then what I'm doing is, I set this
earlier, so for the exit selection.

100
00:07:36.400 --> 00:07:40.630
And the way that you call the transition,
is you say .transition,

101
00:07:40.630 --> 00:07:42.950
then you pass in the transition
you've already defined.

102
00:07:42.950 --> 00:07:45.270
So .transition t is what's happening here.

103
00:07:46.310 --> 00:07:49.520
The t that I defined up here,
and then I pass it in here.

104
00:07:51.180 --> 00:07:57.050
And then, I just say,
I want you to transition all of the bars,

105
00:07:58.310 --> 00:08:02.290
height down to 0, which is what's
happening here for the exit selection.

106
00:08:03.530 --> 00:08:07.980
And then I say, animate the remaining
rects on the screen to their next state

107
00:08:09.070 --> 00:08:14.160
down here, and that's all you have to do.

108
00:08:14.160 --> 00:08:16.430
It's super straightforward.

109
00:08:16.430 --> 00:08:21.160
I feel like my I feel like my,

110
00:08:21.160 --> 00:08:26.415
what's the word, summary for
the day is d3 just makes your life easier.

111
00:08:26.415 --> 00:08:29.252
That's it.

112
00:08:29.252 --> 00:08:34.292
So the thing that I do want to kind
of emphasise a little bit is, when

113
00:08:34.292 --> 00:08:40.684
we think of transitions it's essentially
we're animating from a certain state A.

114
00:08:40.684 --> 00:08:44.095
And we're animating to a certain state B,
right?

115
00:08:44.095 --> 00:08:48.461
So if you actually notice,
you might be like, hey,

116
00:08:48.461 --> 00:08:53.557
when you did this,
actually I think I have this in the slide.

117
00:08:53.557 --> 00:08:59.100
So, you might be like hey,
I noticed you only specified

118
00:08:59.100 --> 00:09:03.480
the attributes to transition to and

119
00:09:03.480 --> 00:09:09.370
you didn't specify what should
be transitioned from, right?

120
00:09:09.370 --> 00:09:13.800
So, when you call
.transition(t) on a selection,

121
00:09:13.800 --> 00:09:19.560
everything that comes after it is the
state b that you want to transition to.

122
00:09:19.560 --> 00:09:23.250
So keep that in mind because
there's a reason why.

123
00:09:23.250 --> 00:09:27.430
For example, the x and
the fill is above the transition for

124
00:09:27.430 --> 00:09:29.750
me because those are things that
I don't want to transition.

125
00:09:29.750 --> 00:09:32.880
Those are the things that I don't
want to animate the attribute for.

126
00:09:32.880 --> 00:09:36.820
Like I don't want the colors so
like interplay between the first and

127
00:09:36.820 --> 00:09:38.070
the second stay.

128
00:09:38.070 --> 00:09:41.068
Maybe you do, but for
my purpose, I didn't.

129
00:09:41.068 --> 00:09:48.270
Although I do wonder why I
didn't want to transition the x.

130
00:09:48.270 --> 00:09:50.860
I could transition the x attribute,
and that makes sense.

131
00:09:52.360 --> 00:09:55.850
But notice that the y and

132
00:09:55.850 --> 00:10:01.384
the height attributes that I
transitioned to,doesn't, yeah,

133
00:10:01.384 --> 00:10:07.540
actually, let me pause here and
ask if thus far, this makes sense.

134
00:10:09.830 --> 00:10:11.110
And a question.

135
00:10:11.110 --> 00:10:17.440
&gt;&gt; Speaker 3: This question was from your
previous work on the scrolling telling.

136
00:10:17.440 --> 00:10:19.480
&gt;&gt; Shirley Wu: Okay.
&gt;&gt; Speaker 3: On a very high level,

137
00:10:19.480 --> 00:10:20.510
how was that architected?

138
00:10:20.510 --> 00:10:23.904
Did you have a canvas that was full screen
on the back, that was actually performing

139
00:10:23.904 --> 00:10:26.250
your animations, and
then on the front you had a scroll?

140
00:10:26.250 --> 00:10:27.538
&gt;&gt; Shirley Wu: Yeah.

141
00:10:27.538 --> 00:10:28.080
&gt;&gt; Speaker 3: Okay.

142
00:10:28.080 --> 00:10:29.360
&gt;&gt; Shirley Wu: Yeah.

143
00:10:29.360 --> 00:10:33.360
So it's basically starting here,
I think I have an SVG in the background.

144
00:10:33.360 --> 00:10:40.880
And then the text is divs on top of that
and then I use react a lot in my work,

145
00:10:40.880 --> 00:10:44.490
and so I think i had react kind of keep
a state of where we had scrolled to.

146
00:10:45.910 --> 00:10:51.170
And I had react be like this is the data
that needs to be rendered right now and

147
00:10:51.170 --> 00:10:52.740
I used d3 to render.

148
00:10:52.740 --> 00:10:57.230
So yeah that's what's
happening underneath the hood.

149
00:10:57.230 --> 00:11:01.360
This might relate to the like
state change or state a to be.

150
00:11:01.360 --> 00:11:04.730
So cuz I feel like I
guess I was interpreting

151
00:11:04.730 --> 00:11:10.520
the state you were coming from
as the exit attributes up there.

152
00:11:10.520 --> 00:11:14.050
Is that wrong or
is that not quite how to think about it?

153
00:11:16.470 --> 00:11:19.752
So the exit attributes, okay, good point.

154
00:11:19.752 --> 00:11:22.920
&gt;&gt; Speaker 4: Well, and
also maybe related, why is the exit first?

155
00:11:26.350 --> 00:11:30.765
&gt;&gt; Shirley Wu: No particular reason,
I think we're just used to thinking of it

156
00:11:30.765 --> 00:11:36.084
that way because I'm just used to
thinking of it I don't know how

157
00:11:36.084 --> 00:11:41.084
many people I speak for, but I feel like
I speak for a lot of people when I say,

158
00:11:41.084 --> 00:11:45.718
I'm used to thinking about the order
going from one state to the next.

159
00:11:45.718 --> 00:11:49.052
I first-
&gt;&gt; Speaker 4: Reset the palette?

160
00:11:49.052 --> 00:11:53.540
&gt;&gt; Shirley Wu: I don't reset because I
only remove what should be removed, right?

161
00:11:53.540 --> 00:11:58.150
So the remaining update selection
is still on the screen.

162
00:11:58.150 --> 00:12:03.250
So I think of it as I get rid of

163
00:12:03.250 --> 00:12:08.550
what's extraneous, and
then I add what I need,

164
00:12:08.550 --> 00:12:13.960
and then I operate on everything
that's remaining on the screen.

165
00:12:16.140 --> 00:12:19.830
You could do it in any order and
it will work exactly the same way.

166
00:12:19.830 --> 00:12:22.910
But it logically just the way I think
about it is like the step by step,

167
00:12:22.910 --> 00:12:24.030
that's how I think about it.

168
00:12:24.030 --> 00:12:28.530
But yeah if you reorder this,
because the selections are self contained

169
00:12:28.530 --> 00:12:31.830
like you're only removing the excess
selection, you're only entering the,

170
00:12:31.830 --> 00:12:37.900
well actually I think the only thing that
you need to make sure is to make the enter

171
00:12:37.900 --> 00:12:41.880
selection before you do the enter plus
update or else your enter isn't there.

172
00:12:41.880 --> 00:12:45.930
But, yeah, you can put the exit like
below everything and it will work fine.

173
00:12:48.190 --> 00:12:54.120
So, in that same sense I think your
question was like is this, is the Why

174
00:12:54.120 --> 00:12:59.880
in height on the exit selection is that
the state a that we're transitioning from.

175
00:12:59.880 --> 00:13:03.350
And the answer is no, for two reasons.

176
00:13:03.350 --> 00:13:09.160
One because this exit selection is not the
same as this enter plus update selection.

177
00:13:09.160 --> 00:13:12.000
So there are two different
things that are animating.

178
00:13:12.000 --> 00:13:15.110
So that's why it's not the from state.

179
00:13:15.110 --> 00:13:18.387
And second part is actually,

180
00:13:18.387 --> 00:13:24.154
because this is after the .transition,
these y and

181
00:13:24.154 --> 00:13:30.197
height are actually the state b,
the two transition.

182
00:13:30.197 --> 00:13:32.861
&gt;&gt; Speaker 4: For bars,
when you're doing an exit,

183
00:13:32.861 --> 00:13:36.344
are you just adding
attributes to the transition?

184
00:13:36.344 --> 00:13:40.453
So when exit is called, when there's
a switch it runs whatever is in there?

185
00:13:40.453 --> 00:13:41.988
Is that what that's doing?

186
00:13:41.988 --> 00:13:42.970
&gt;&gt; Shirley Wu: Yeah.

187
00:13:42.970 --> 00:13:44.574
&gt;&gt; Speaker 4: Okay.
&gt;&gt; Shirley Wu: Yeah, yeah.

188
00:13:44.574 --> 00:13:47.279
So yeah if I-
&gt;&gt; Speaker 4: So

189
00:13:47.279 --> 00:13:50.950
you're just passing in parameters to exit
on what to do on transit when it gets

190
00:13:50.950 --> 00:13:53.330
called it's not getting
called when it's made?

191
00:13:53.330 --> 00:13:54.337
&gt;&gt; Shirley Wu: Wait hold on.

192
00:13:54.337 --> 00:13:57.153
I think I missed something crucial
at the beginning of your question.

193
00:13:57.153 --> 00:14:00.592
&gt;&gt; Speaker 4: So
you're doing vars.exit.transition.

194
00:14:00.592 --> 00:14:01.155
&gt;&gt; Shirley Wu: Uh-huh.

195
00:14:01.155 --> 00:14:04.963
&gt;&gt; Speaker 4: And basically what you're
doing is passing in this is what I want

196
00:14:04.963 --> 00:14:07.088
you to do when you x Is that correct?

197
00:14:07.088 --> 00:14:09.397
&gt;&gt; Shirley Wu: Yeah.

198
00:14:09.397 --> 00:14:12.882
So I'm saying right before I exit,

199
00:14:12.882 --> 00:14:17.307
I want you to do these things and
then remove.

200
00:14:17.307 --> 00:14:18.394
&gt;&gt; Speaker 4: Okay.

201
00:14:18.394 --> 00:14:22.350
And bar is just the object that can
hold x and has all those in it, and

202
00:14:22.350 --> 00:14:26.320
d3 knows when to call that when
there's a change with the update?

203
00:14:29.850 --> 00:14:34.280
&gt;&gt; Shirley Wu: When the data changes, so

204
00:14:34.280 --> 00:14:37.370
actually I'll show
the code in a little bit.

205
00:14:37.370 --> 00:14:41.930
D3 doesn't know to call to execute
all of this when the data changes.

206
00:14:41.930 --> 00:14:43.240
We have to tell it.

207
00:14:43.240 --> 00:14:46.330
To re-execute this data,
every time the data changes.

208
00:14:46.330 --> 00:14:50.490
Yeah, so usually what I do,
If we had done the play with Coe section,

209
00:14:50.490 --> 00:14:53.180
then we would have been able to
see what actually happens is

210
00:14:55.120 --> 00:15:00.420
the starting from the bars,
this part is wrapped around in a function.

211
00:15:00.420 --> 00:15:03.208
I wrap it in a function and
call it update or something like that.

212
00:15:03.208 --> 00:15:06.425
And then every time the data
changes I call update.

213
00:15:06.425 --> 00:15:07.431
&gt;&gt; Speaker 4: Okay, that makes sense.

214
00:15:07.431 --> 00:15:07.958
&gt;&gt; Shirley Wu: Okay.

215
00:15:07.958 --> 00:15:09.207
&gt;&gt; Speaker 4: Yeah.
&gt;&gt; Shirley Wu: Yeah, okay, cool.

216
00:15:09.207 --> 00:15:10.232
Thanks for asking that.

217
00:15:10.232 --> 00:15:13.180
I didn't even think of that as, yeah.

218
00:15:15.630 --> 00:15:16.960
Cool.

219
00:15:16.960 --> 00:15:21.140
Yeah, so it only gets executed
when we call it again.

220
00:15:22.970 --> 00:15:28.305
The part that I wanted to get at is when,

221
00:15:28.305 --> 00:15:33.680
so the question of where is d3 getting

222
00:15:33.680 --> 00:15:39.320
the state A to transition from and
the answer is anytime you set it

223
00:15:39.320 --> 00:15:45.860
before you call that transition that's
how it knows what to transition from.

224
00:15:45.860 --> 00:15:47.470
And if you don't set anything,

225
00:15:47.470 --> 00:15:52.140
if you don't set any attributes,
if the attribute is not specified for

226
00:15:52.140 --> 00:15:57.400
state A to transition from, d3 kind of
just extrapolates that from the default.

227
00:15:57.400 --> 00:16:01.810
So for example, the default for
height is 0, the default for

228
00:16:01.810 --> 00:16:05.030
y is 0, the default is fill is black, etc.

229
00:16:05.030 --> 00:16:09.030
So d3 is like, this is my default.

230
00:16:09.030 --> 00:16:11.110
So this is what I'm going
to transition from.

231
00:16:11.110 --> 00:16:15.090
So we'll transition from that to what
we've specified after the .transition,

232
00:16:15.090 --> 00:16:16.310
the state B.

233
00:16:16.310 --> 00:16:22.070
And then after that, if you think
about it when we are transitioning,

234
00:16:22.070 --> 00:16:25.330
you know the update selection,
that already exists on the screen, so

235
00:16:25.330 --> 00:16:29.810
then like maybe, it already has
the y attribute is already 50.

236
00:16:29.810 --> 00:16:34.230
So that's the transition from and
then a translation,

237
00:16:34.230 --> 00:16:38.470
it translates Transitions
to the new state B.

238
00:16:38.470 --> 00:16:43.170
So, most of the time people only
specify the transition to and

239
00:16:43.170 --> 00:16:46.590
doesn't really specify
like that transition from.

240
00:16:46.590 --> 00:16:49.680
But sometimes, like you don't
want to transition from like

241
00:16:49.680 --> 00:16:52.440
you know black to your colors or
something like that, right?

242
00:16:52.440 --> 00:16:57.618
And that's why you can set that your
initial like from your initial,

243
00:16:57.618 --> 00:17:02.633
like what you want it to like animate
from in your enter selection.

244
00:17:07.924 --> 00:17:10.402
&gt;&gt; Shirley Wu: And then here is that code.

245
00:17:13.379 --> 00:17:16.410
&gt;&gt; Shirley Wu: And
again I'm using set interval, so

246
00:17:16.410 --> 00:17:19.636
make sure to exit out of it after awhile.

247
00:17:19.636 --> 00:17:25.276
[LAUGH] But yeah, this is the function
update bars that I wrap everything

248
00:17:25.276 --> 00:17:30.660
around in, and I just call it every
time I want my data to change.

249
00:17:30.660 --> 00:17:34.085
And so now you can see things
are coming in and out.

250
00:17:34.085 --> 00:17:41.873
Actually let me also just,
&gt;&gt; Shirley Wu: Transition the x and

251
00:17:41.873 --> 00:17:42.860
see what happens.

252
00:17:44.651 --> 00:17:45.978
&gt;&gt; Shirley Wu: Cool, yeah.

253
00:17:53.887 --> 00:17:59.370
&gt;&gt; Shirley Wu: Yeah, so this is enter,
update, exit and transitions.

